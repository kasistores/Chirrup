webpackJsonp([3],{0:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i=s(705),n=r(i),o=s(26),a=r(o);new a["default"]({Platform:n["default"]})},16:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(5),n=r(i),o=n["default"].createActions([]);o.persist=n["default"].createAction({asyncResult:!0}),o.setWorkspace=n["default"].createAction({asyncResult:!0}),o.setStatus=n["default"].createAction(),o.setReadyState=n["default"].createAction(),o.setIdleState=n["default"].createAction(),o.updateFiles=n["default"].createAction({asyncResult:!0}),o.createDirectories=n["default"].createAction({asyncResult:!0}),o.getFile=n["default"].createAction({asyncResult:!0}),o.getFiles=n["default"].createAction({asyncResult:!0}),o.deleteFile=n["default"].createAction({asyncResult:!0}),o.rename=n["default"].createAction({asyncResult:!0}),o.lock=n["default"].createAction({asyncResult:!0}),o.unlock=n["default"].createAction({asyncResult:!0}),o.peerLock=n["default"].createAction({asyncResult:!0}),o.peerUnlock=n["default"].createAction({asyncResult:!0}),o.getFileTree=n["default"].createAction({asyncResult:!0}),o.initialize=n["default"].createAction({asyncResult:!0}),t["default"]=o},17:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.STATUSES=void 0;var i=s(5),n=r(i),o=s(15),a=r(o),l=s(16),c=r(l),u=s(273),h=r(u),d=s(740),f=r(d),p=s(741),m=r(p),g=s(20),v=r(g),y=s(38),_=r(y),b=s(27),k=r(b),w={CONNECTING:{message:"Connecting to Codecademy",type:"neutral"},AVAILABLE:{message:"Connected to Codecademy",type:"success"},UNAVAILABLE:{message:"Unable to connect to Codecademy",type:"error"},DISCONNECTED:{message:"Lost connection to Codecademy",type:"error"}};t["default"]=n["default"].createStore({mixins:[a["default"].store],init:function(){this.listenToMany({initialize:c["default"].initialize,persist:c["default"].persist,setWorkspace:c["default"].setWorkspace,setStatus:c["default"].setStatus,setReadyState:c["default"].setReadyState,setIdleState:c["default"].setIdleState,updateFiles:c["default"].updateFiles,createDirectories:c["default"].createDirectories,deleteFile:c["default"].deleteFile,rename:c["default"].rename,getFileTree:c["default"].getFileTree,getFile:c["default"].getFile,getFiles:c["default"].getFiles})},getInitialState:function(){return{workspaceDirty:!1,workspaceReady:!1,workspaceIdle:!1,workspaceClientHasLostConnection:!1,workspaceBackend:null,workspaceSlug:null,workspaceObject:null,workspaceStatusType:null,workspaceStatusMessage:null}},setWorkspace:function(e){var t=this;if(this.state.workspaceObject&&e.slug===this.state.workspaceSlug)return this.setState({workspaceReady:!0}),this.trigger(this.state),void c["default"].setWorkspace.completed(this["interface"].workspace);this.setState({workspaceReady:!1,workspaceObject:null,workspaceClientHasLostConnection:!1});var s=void 0;return e.backend?(this["interface"]=new f["default"](e),s="godex"):(this["interface"]=new m["default"](e.slug),s="library"),this.setStatus(w.CONNECTING),this.setState({workspaceSlug:e.slug,workspaceBackend:s}),this.initialize().then(function(){c["default"].setWorkspace.completed(t["interface"].workspace),v["default"].increment("WorkspaceStore.setWorkspace."+s,"completed")},function(e){k["default"].error(e),h["default"].apologize(),c["default"].setWorkspace.failed(e),t.setStatus("Unable to connect to Codecademy","error"),v["default"].increment("WorkspaceStore.setWorkspace."+s,"failed")})},setStatus:function(e){this.setState({workspaceStatusMessage:e.message,workspaceStatusType:e.type})},setReadyState:function(e){this.setState({workspaceReady:e})},setIdleState:function(e){this.setState({workspaceIdle:e})},getSlug:function(){return this.state.workspaceObject.slug},initialize:function(){var e=this;return this["interface"].initialize().then(function(){e.setState({workspaceObject:e["interface"].workspace,workspaceReady:!0}),c["default"].initialize.completed()},function(){c["default"].initialize.failed()})},persist:function(){var e=this;return this.state.workspaceDirty?((0,_["default"])("info","Persisting workspace '"+this.state.workspaceObject.slug+"'"),new Promise(function(t,s){e._attemptToPersist(t,s)})):void c["default"].persist.completed()},_attemptToPersist:function(e,t){var s=this,r=new Date,i="francine.workspace."+this["interface"].workspace.backend+".persist";this["interface"].persist().then(function(){s._persistAttempts=0,e(),(0,_["default"])("info","Successfully persisted workspace '"+s.state.workspaceObject.slug+"'"),v["default"].increment(i,"success"),s.setState({workspaceDirty:!1})},function(n){s._persistAttempts++,v["default"].increment(i,"error"),v["default"].timing(i,(new Date).valueOf()-r.valueOf()),(0,_["default"])("error","Error while persisting workspace "+s.state.workspaceObject.slug+": "+n),s._persistAttempts<3?((0,_["default"])("info","Giving up trying to persist workspace"),v["default"].increment(i,"give-up"),s._attemptToPersist(e,t)):t("Failed to persist 3 times in a row")})},getFileTree:function(){var e=this;return this["interface"].getFileTree().then(function(){e.setState({workspaceObject:e["interface"].workspace}),e.trigger(e.state)})},getFiles:function(e){var t=this;return this["interface"].getFiles(e).then(function(){t.trigger(t.state)})},getFile:function(e,t){var s=this;return this["interface"].getFile(e,t).then(function(){s.trigger(s.state)})},deleteFile:function(e){var t=this;return this["interface"].deleteFile(e).then(function(){t.setState({workspaceDirty:!0,workspaceObject:t["interface"].workspace}),t.trigger(t.state)})},updateFiles:function(e){var t=this;return this["interface"].updateFiles(e).then(function(){t.setState({workspaceDirty:!0,workspaceObject:t["interface"].workspace}),t.trigger(t.state)})},createDirectories:function(e){var t=this;return this["interface"].createDirectories(e).then(function(){t.setState({workspaceDirty:!0,workspaceObject:t["interface"].workspace}),t.trigger(t.state)})},rename:function(e,t,s){var r=this;return this["interface"].rename(e,t,s).then(function(){r["interface"].getFileTree().then(function(){r.setState({workspaceDirty:!0,workspaceObject:r["interface"].workspace}),r.trigger(r.state)})})}}),t.STATUSES=w},20:function(e,t,s){var r;r=function(e,t,s){"use strict";var r="/stats/v1/batch",i=function(e){e=e||{},this.FLUSH_INTERVAL=1e3*(e.flushInterval||10),this.QUEUE_LIMIT=e.queueLimit||10,this.flushUrl=e.flushUrl,this._statsdQueue=[],this._beforeUnloadQueue={},this._flushTimeout=null,e.stopped||this._startIntervalFlush(),this._registerBeforeUnload()};(function(){this._preparedData=function(){return{data:this._statsdQueue}},this._flush=function(){var e=new XMLHttpRequest;e.open("POST",this.flushUrl,!0),e.setRequestHeader("Content-Type","application/json;charset=UTF-8"),e.send(JSON.stringify(this._preparedData())),this._statsdQueue=[]},this._flushIfNecessary=function(){this._statsdQueue.length>0&&this._flush()},this._flushBeforeOnload=function(){for(var e in this._beforeUnloadQueue)this._beforeUnloadQueue[e]();this._flushIfNecessary()},this._record=function(e,t,s,r){var i={name:e,payload:{measurement:t,action:s}};null!=r&&(i.payload.value=r),this._statsdQueue.push(i),setTimeout(this._flushIfOverflow.bind(this),0)},this._flushIfOverflow=function(){if(this._statsdQueue.length>=this.QUEUE_LIMIT){var e=!1;null!==this._flushTimeout&&(this._stopIntervalFlush(),e=!0),this._flush(),e&&this._startIntervalFlush()}},this._stopIntervalFlush=function(){clearTimeout(this._flushTimeout),this._flushTimeout=null},this._startIntervalFlush=function(){this._flushIfNecessary(),this._flushTimeout=setTimeout(this._startIntervalFlush.bind(this),this.FLUSH_INTERVAL)},this._registerBeforeUnload=function(){window.addEventListener("beforeunload",this._flushBeforeOnload.bind(this),!1)},this.increment=function(e,t){this._record(e,t,"increment",null)},this.decrement=function(e,t){this._record(e,t,"decrement",null)},this.gauge=function(e,t,s){this._record(e,t,"gauge",s)},this.timing=function(e,t,s){this._record(e,t,"timing",s)},this.set=function(e,t,s){this._record(e,t,"set",s)},this.registerUnloadAction=function(e,t){this._beforeUnloadQueue[e]=t}}).call(i.prototype),s.exports=new i({flushUrl:r})}.call(t,s,t,e),!(void 0!==r&&(e.exports=r))},33:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(5),n=r(i),o=s(15),a=r(o),l=s(126),c=r(l),u=s(176),h=r(u),d=s(175),f=r(d),p=s(16),m=r(p),g=s(77),v=s(9),y=r(v),_=s(20),b=r(_),k=s(530),w=r(k),x=s(27),T=(r(x),3),S=15e3;t["default"]=n["default"].createStore({mixins:[a["default"].store],init:function(){this.listenToMany(c["default"]),this.state.manager=new w["default"].Manager(window.location.protocol+"//"+window.location.host+"/api/management/v1",{id:y["default"].id(),authentication_token:y["default"].authenticationToken(),username:y["default"].get("username")})},getInitialState:function(){return{manager:null,client:null,status:null,ready:!1}},storeDidUpdate:function(e){e.status!==this.state.status&&"string"==typeof this.state.status&&b["default"].increment("GodexClientStore.set-status",this.state.status)},onGetClient:function(e){var t=this;this.contentWorkspace=e,this.slug=e.slug,this.type=e.type,this._connectionAttempts=0,this._hasAskedForFreshInstance=!1,this._getFreshGodexConn().then(function(e){c["default"].getClient.completed(t.state.client)},function(e){c["default"].getClient.failed(e)})},onPersist:function(){var e=this;return new Promise(function(t,s){e.state.client.persistWorkspace(e.slug,function(e,r){e?s(e):t(r)})})},onGetFileTree:function(){var e=this;return new Promise(function(t,s){e.state.client.getListing(e.slug,function(e,r){e?(c["default"].getFileTree.failed(e),s(e)):(c["default"].getFileTree.completed(r),t())})})},onExecute:function(e){var t=this;return new Promise(function(s,r){t.state.client.execute(t.slug,e,function(e,t){e?(c["default"].execute.failed(e),r(e)):(c["default"].execute.completed(t),s())})})},onRestoreWorkspace:function(e){var t=this;return new Promise(function(s,r){t.state.client.restoreWorkspace(t.slug,e,function(e,t,i){t?(c["default"].restoreWorkspace.failed(t),r(t)):(c["default"].restoreWorkspace.completed(e,i),s())})})},onCheckpointWorkspace:function(e){var t=this;return new Promise(function(s,r){t.state.client.checkpointWorkspace(t.slug,e,function(e){e?(c["default"].checkpointWorkspace.failed(e),r(e)):(c["default"].checkpointWorkspace.completed(),s())})})},_getFreshGodexConn:function(){var e=this;return new Promise(function(t,s){delete e.state.client,e.setState({ready:!1}),e._attemptToConnect().then(t,s)})},_attemptToConnect:function(){var e=this;return this.setState({status:"connecting"}),new Promise(function(t,s){e.state.manager.getGodexClient(e.contentWorkspace,function(r,i){e._acceptGodexClient(i).then(function(r){b["default"].increment("GodexClientStore.getClient","ok"),e._ensureWorkspace().then(function(){t(r)},s)},function(e){b["default"].increment("GodexClientStore.getClient","error")})},function(e,t){s(e)})})},_acceptGodexClient:function(e){var t=this;return new Promise(function(s,r){var i=!1;t.state.client=e;var n=setTimeout(function(){r("Connect timeout"),b["default"].increment("GodexClientStore.client-events","connection-time-out"),e.close(4e3,"Connection Timeout")},S);e.removeAllListeners("ready"),e.on("ready",function(){i=!0,clearTimeout(n),b["default"].increment("GodexClientStore.client-events","ready"),s(e)}),e.removeAllListeners("unauthorized"),e.on("unauthorized",function(){clearTimeout(n),b["default"].increment("GodexClientStore.client-events","unauthorized"),c["default"].getClient.failed()}.bind(t)),e.on("idle",function(){e.removeAllListeners("disconnected"),t.setState({status:"idle",ready:!1}),e.close(1e3,"Client Went Idle.")}),e.removeAllListeners("disconnected"),e.on("disconnected",function(){i?(t.setState({status:"disconnected"}),b["default"].increment("GodexClientStore.client-events","lost-connection")):(r("Could not connect"),b["default"].increment("GodexClientStore.client-events","could-not-connect")),clearTimeout(n),t.setState({ready:!1}),t._respondToDisconnection()}),e.connect()})},_respondToDisconnection:function(){var e=this;this._connectionAttempts++,this._connectionAttempts>T?this._giveUpOnInstance():setTimeout(function(){e._attemptToConnect()},1e3)},_giveUpOnInstance:function(e){var t=this;delete this.state.client,this._hasAskedForFreshInstance?(this.setState({status:"unavailable"}),b["default"].increment("GodexClientStore.failures","failed-to-connect-to-two-different-instances"),c["default"].getClient.failed()):this.state.manager.askForFreshGodexInstance({success:function(){t._connectionAttempts=0,t._hasAskedForFreshInstance=!0,t._attemptToConnect()},error:function(e){t.setState({status:"unavailable"}),b["default"].increment("GodexClientStore.failures","failed-to-get-fresh-instance"),c["default"].getClient.failed()}})},_ensureWorkspace:function(){var e=this;return new Promise(function(t,s){var r=new Date;return"undefined"==typeof e.slug?s("Exercise does not define its workspace"):void e.state.client.createWorkspace(e.contentWorkspace,function(i,n){if(i)return b["default"].increment("GodexClientStore.createWorkspace","error"),s(i);if(n.LockStatus&&n.LockStatus.Locked&&m["default"].peerLock(n.LockStatus.User),n.Peers&&(h["default"].update(n.Peers),y["default"].isAdvisor())){var o=n.Peers.filter(function(e){return e.Username!==y["default"].get("username")}),a="";o.forEach(function(e){a+=e.Username+" "}),n.Peers.length>1&&((0,g.trackEvent)("joined-learner-collaboration",{learners:a}),f["default"].adminChange("nolock",!0))}return b["default"].timing("GodexClientStore.createWorkspace",e.slug,(new Date).valueOf()-r.valueOf()),e.setState({ready:!0,status:"available"}),t(n)})})}})},38:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t){n["default"][e]?n["default"][e]({event:t},"learner_activity"):console.warn("Tried to log activity using ${type} type, which doesn't exist")};var i=s(27),n=r(i)},52:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(5),n=r(i),o=n["default"].createActions([]);o.refresh=n["default"].createAction({asyncResult:!0}),o.navigateBack=n["default"].createAction({asyncResult:!0}),o.load=n["default"].createAction({asyncResult:!0}),o.push=n["default"].createAction(),t["default"]=o},62:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(5),n=r(i),o=n["default"].createActions([]);o.closeFile=n["default"].createAction(),o.openFile=n["default"].createAction(),o.setCurrentOpenFile=n["default"].createAction(),o.updateCurrentFile=n["default"].createAction(),o.saveFiles=n["default"].createAction({asyncResult:!0}),o.reloadFile=n["default"].createAction({asyncResult:!0}),t["default"]=o},100:function(e,t,s){var r;r=function(e,t,s){s.exports={extname:function(e){return e?(e.split(".").slice(-1)[0]||"").toLowerCase():void 0},contentEncoding:function(e){var t=e.toLowerCase()||"";switch(t){case"jpg":case"jpeg":case"png":case"gif":return"base64";default:return"text"}}}}.call(t,s,t,e),!(void 0!==r&&(e.exports=r))},103:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){return(0,h["default"])(e)};var i=s(1),n=r(i),o=s(1096),a=r(o),l=s(128),c=r(l),u=s(528),h=r(u);h["default"].setOptions({highlight:function(e,t){var s=n["default"].createElement(c["default"],{language:t},e);return a["default"].renderToString(s)}})},104:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(5),n=r(i),o=s(15),a=r(o),l=s(52),c=r(l),u=s(17),h=r(u),d=s(33),f=r(d),p=s(83),m=r(p),g=s(27),v=r(g);t["default"]=n["default"].createStore({mixins:[a["default"].store],init:function(){this.listenToMany(c["default"])},getInitialState:function(){return{nonce:0,history:[],historyIndex:-1,loading:!1,location:{internalUrl:"",displayUrl:""}}},currentLocation:function(){return this.state.history[this.state.historyIndex]},onRefresh:function(){this.currentLocation()&&(this.setState({nonce:this.state.nonce+1}),this.setState({loading:!0}),this.state.onLoad=this.onLoadComplete(c["default"].refresh))},onNavigateBack:function(){this.state.historyIndex--,this.setState({location:this.currentLocation(),nonce:this.state.nonce+1}),this.setState({loading:!0}),this.state.onLoad=this.onLoadComplete(c["default"].navigateBack)},onLoad:function(e){if(void 0!==e){if(!/localhost/.test(e)&&!/http/.test(e)){"/"!==e[0]&&(e="/"+e);var t=void 0,s=void 0;this.state.location?(t=this.state.location.displayUrl.host(),s=this.state.location.displayUrl.port()):(t="localhost",s="8000"),e=s?t+":"+s+e:t+e}/^http.*/.test(e)||(e="http://"+e);var r=this.currentLocation(),i=this.displayUrlToLocation(e);r&&i.displayUrl.toString()===r.displayUrl.toString()||this.push(i),this.state.onLoad=this.onLoadComplete(c["default"].load),this.setState({location:i}),this.setState({nonce:this.state.nonce+1}),this.setState({loading:!0})}},onPush:function(e){var t=this.internalUrlToLocation(e);t.internalUrl.toString()!==this.state.location.internalUrl.toString()&&(this.push(t),this.setState({location:this.currentLocation()}))},push:function(e){this.state.history=this.state.history.slice(0,this.state.historyIndex+1),this.state.history.push(e),this.state.historyIndex=this.state.history.length-1},onLoadComplete:function(e){var t=this;return function(){e.completed(),t.setState({loading:!1})}},displayUrlToLocation:function(e){return{displayUrl:new m["default"](e),internalUrl:this._displayToInternalUrl(e)}},internalUrlToLocation:function(e){return{internalUrl:new m["default"](e),displayUrl:this._internalToDisplayUrl(e)}},_displayToInternalUrl:function(e){if(void 0===e)return"";var t=new m["default"](e);if("localhost"!==t.host()&&""!==t.host())return e;this._originalPort=t.port(),"8080"===t.port()&&t.port("8000");var s=void 0;switch(h["default"].state.workspaceBackend){case"godex":return"development"===CCDATA.env?(t.host("external-dev.codecademy.com"),t.protocol("http"),t):(t.port(""),(s=f["default"].state.manager)?(t.host(s.mgmt.instance.http_url),t.protocol("https"),t):(v["default"].error("Unable to translate browser URL because godex manager is not available"),""));case"library":return""===t.host()&&(t.host("localhost"),t.port("8000")),t;default:throw new Error("Unknown workspaceBackend"+h["default"].state.workspaceBackend)}},_internalToDisplayUrl:function(e){var t=new m["default"](e);return"development"===CCDATA.env?t.host("localhost"):/ccterminalcloud/.test(e)&&t.host("localhost"),t}})},125:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(5),n=r(i),o=n["default"].createActions([]);o.publishFilenames=n["default"].createAction(),o.loadFiles=n["default"].createAction({asyncResult:!0}),t["default"]=o},126:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});for(var i=s(5),n=r(i),o=n["default"].createActions([]),a=["getClient","persist","getFileTree","getFiles","getFile","deleteFile","updateFiles","createDirectories","rename","execute","restoreWorkspace","checkpointWorkspace"],l=0;l<a.length;l++){var c=a[l];o[c]=n["default"].createAction({asyncResult:!0})}t["default"]=o},127:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(5),n=r(i);t["default"]=n["default"].createActions(["resized","resizing","cueSeen"])},129:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,s,r){return s&&e(t.prototype,s),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.BINARY_FILE_EXTENSIONS=t.BASE64_ENCODING=t.PLAINTEXT_ENCODING=void 0;var o=s(20),a=r(o),l=s(27),c=r(l),u=t.PLAINTEXT_ENCODING=1,h=t.BASE64_ENCODING=2,d=t.BINARY_FILE_EXTENSIONS=["jpeg","jpg","gif","png"],f=/[\u00A0-\u2666]/g,p=function(){function e(t){i(this,e),this.name=t.name,this.path=t.path,void 0!==t.encodedContent?this._encodedContent=t.encodedContent:void 0!==t.content&&(this.content=t.content)}return n(e,[{key:"clone",value:function(){return new e({name:this.name,path:this.path,encodedContent:this._encodedContent})}},{key:"asJSON",value:function(){return{name:this.name,path:this.path,encodedContent:this.contentBase64}}},{key:"toJSON",value:function(){return JSON.stringify(this.asJSON())}},{key:"encoding",get:function(){return d.indexOf(this.extension)>-1?h:u}},{key:"type",get:function(){switch(this.extension){case"jpeg":case"jpg":case"png":case"gif":case"svg":return"image";default:return"code"}}},{key:"extension",get:function(){return this.name.split(".").slice(-1)[0].toLowerCase()}},{key:"content",get:function(){try{var e=atob(this._encodedContent);return a["default"].increment("platform.lib.file.base64.decode","success"),e}catch(t){return a["default"].increment("platform.lib.file.base64.decode","error"),c["default"].error("Unable to base64-decode data for file "+this.path),""}},set:function(e){var t=e.replace(f,"");try{this._encodedContent=btoa(t),a["default"].increment("platform.lib.file.base64.encode","success")}catch(s){a["default"].increment("platform.lib.file.base64.encode","error"),c["default"].error("Unable to base64-encode data for file "+this.path)}}},{key:"contentBase64",get:function(){return this._encodedContent}}],[{key:"emptyWithPath",value:function(t){var s=t.split("/").slice(-1)[0];return new e({path:t,name:s,content:""})}}]),e}();t["default"]=p},130:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(5),n=r(i),o=s(16),a=r(o),l=s(17),c=r(l),u=s(306),h=r(u),d=s(125),f=r(d),p=s(38),m=r(p),g=s(20),v=r(g),y=s(3),_=r(y);t["default"]=n["default"].createStore({init:function(){var e=this;this.files=[],this.pendingFiles=[],this.workspaceSlug=null,f["default"].publishFilenames.listen(this.setDefaultFiles),this.listenTo(f["default"].loadFiles,function(){e.getDefaultFiles(c["default"].state)}),this.listenTo(c["default"],this.getDefaultFiles)},setDefaultFiles:function(e){var t=_["default"].pluck(e,"filename");this.files=t},getDefaultFiles:function(e){var t=this,s=e.workspaceObject&&e.workspaceSlug!==this.workspaceSlug,r=!this.fetchedFiles||this.fetchedFiles.join(",")!==this.files.join(","),i=h["default"].tokenize()!==this.lastExerciseFetchedFor;e.workspaceObject&&(i||s||r)&&e.workspaceReady&&(this.workspaceSlug=e.workspaceSlug,this.fetchedFiles=this.files,this.lastExerciseFetchedFor=h["default"].tokenize(),a["default"].getFiles(this.files).then(function(s){var r=s.map(function(e){return e.path}),i=!0,n=!1,o=void 0;try{for(var a,l=t.files[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var c=a.value;-1===r.indexOf(c)?(v["default"].increment("platform.lib.workspace.get-default-file","not-found"),(0,m["default"])("error","Failed to get file '"+c+"' from workspace '"+e.workspaceSlug+"'")):v["default"].increment("platform.lib.workspace.get-default-file","found")}}catch(u){n=!0,o=u}finally{try{!i&&l["return"]&&l["return"]()}finally{if(n)throw o}}t.trigger(s)}))}})},147:function(e,t){function s(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"number"==typeof e}function n(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}e.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._maxListeners=void 0,s.defaultMaxListeners=10,s.prototype.setMaxListeners=function(e){if(!i(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},s.prototype.emit=function(e){var t,s,i,a,l,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||n(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(s=this._events[e],o(s))return!1;if(r(s))switch(arguments.length){case 1:s.call(this);break;case 2:s.call(this,arguments[1]);break;case 3:s.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),s.apply(this,a)}else if(n(s))for(a=Array.prototype.slice.call(arguments,1),c=s.slice(),i=c.length,l=0;i>l;l++)c[l].apply(this,a);return!0},s.prototype.addListener=function(e,t){var i;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?n(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,n(this._events[e])&&!this._events[e].warned&&(i=o(this._maxListeners)?s.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},s.prototype.on=s.prototype.addListener,s.prototype.once=function(e,t){function s(){this.removeListener(e,s),i||(i=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var i=!1;return s.listener=t,this.on(e,s),this},s.prototype.removeListener=function(e,t){var s,i,o,a;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(s=this._events[e],o=s.length,i=-1,s===t||r(s.listener)&&s.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(n(s)){for(a=o;a-- >0;)if(s[a]===t||s[a].listener&&s[a].listener===t){i=a;break}if(0>i)return this;1===s.length?(s.length=0,delete this._events[e]):s.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},s.prototype.removeAllListeners=function(e){var t,s;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(s=this._events[e],r(s))this.removeListener(e,s);else if(s)for(;s.length;)this.removeListener(e,s[s.length-1]);return delete this._events[e],this},s.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},s.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},s.listenerCount=function(e,t){return e.listenerCount(t)}},164:function(e,t,s){(function(e,r){function i(e,s){var r={seen:[],stylize:o};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),m(s)?r.showHidden=s:s&&t._extend(r,s),k(r.showHidden)&&(r.showHidden=!1),k(r.depth)&&(r.depth=2),k(r.colors)&&(r.colors=!1),k(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=n),l(r,e,r.depth)}function n(e,t){var s=i.styles[t];return s?"["+i.colors[s][0]+"m"+e+"["+i.colors[s][1]+"m":e}function o(e,t){return e}function a(e){var t={};return e.forEach(function(e,s){t[e]=!0}),t}function l(e,s,r){if(e.customInspect&&s&&C(s.inspect)&&s.inspect!==t.inspect&&(!s.constructor||s.constructor.prototype!==s)){var i=s.inspect(r,e);return _(i)||(i=l(e,i,r)),i}var n=c(e,s);if(n)return n;var o=Object.keys(s),m=a(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(s)),S(s)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return u(s);if(0===o.length){if(C(s)){var g=s.name?": "+s.name:"";return e.stylize("[Function"+g+"]","special")}if(w(s))return e.stylize(RegExp.prototype.toString.call(s),"regexp");if(T(s))return e.stylize(Date.prototype.toString.call(s),"date");if(S(s))return u(s)}var v="",y=!1,b=["{","}"];if(p(s)&&(y=!0,b=["[","]"]),C(s)){var k=s.name?": "+s.name:"";v=" [Function"+k+"]"}if(w(s)&&(v=" "+RegExp.prototype.toString.call(s)),T(s)&&(v=" "+Date.prototype.toUTCString.call(s)),S(s)&&(v=" "+u(s)),0===o.length&&(!y||0==s.length))return b[0]+v+b[1];if(0>r)return w(s)?e.stylize(RegExp.prototype.toString.call(s),"regexp"):e.stylize("[Object]","special");e.seen.push(s);var x;return x=y?h(e,s,r,m,o):o.map(function(t){return d(e,s,r,m,t,y)}),e.seen.pop(),f(x,v,b)}function c(e,t){if(k(t))return e.stylize("undefined","undefined");if(_(t)){var s="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(s,"string")}return y(t)?e.stylize(""+t,"number"):m(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}function u(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,s,r,i){for(var n=[],o=0,a=t.length;a>o;++o)F(t,String(o))?n.push(d(e,t,s,r,String(o),!0)):n.push("");return i.forEach(function(i){i.match(/^\d+$/)||n.push(d(e,t,s,r,i,!0))}),n}function d(e,t,s,r,i,n){var o,a,c;if(c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},c.get?a=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(a=e.stylize("[Setter]","special")),F(r,i)||(o="["+i+"]"),a||(e.seen.indexOf(c.value)<0?(a=g(s)?l(e,c.value,null):l(e,c.value,s-1),a.indexOf("\n")>-1&&(a=n?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n"))):a=e.stylize("[Circular]","special")),k(o)){if(n&&i.match(/^\d+$/))return a;o=JSON.stringify(""+i),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+a}function f(e,t,s){var r=0,i=e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?s[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+s[1]:s[0]+t+" "+e.join(", ")+" "+s[1]}function p(e){return Array.isArray(e)}function m(e){return"boolean"==typeof e}function g(e){return null===e}function v(e){return null==e}function y(e){return"number"==typeof e}function _(e){return"string"==typeof e}function b(e){return"symbol"==typeof e}function k(e){return void 0===e}function w(e){return x(e)&&"[object RegExp]"===P(e)}function x(e){return"object"==typeof e&&null!==e}function T(e){return x(e)&&"[object Date]"===P(e)}function S(e){return x(e)&&("[object Error]"===P(e)||e instanceof Error)}function C(e){return"function"==typeof e}function E(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function P(e){return Object.prototype.toString.call(e)}function M(e){return 10>e?"0"+e.toString(10):e.toString(10)}function N(){var e=new Date,t=[M(e.getHours()),M(e.getMinutes()),M(e.getSeconds())].join(":");return[e.getDate(),L[e.getMonth()],t].join(" ")}function F(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var O=/%[sdj%]/g;t.format=function(e){if(!_(e)){for(var t=[],s=0;s<arguments.length;s++)t.push(i(arguments[s]));return t.join(" ")}for(var s=1,r=arguments,n=r.length,o=String(e).replace(O,function(e){if("%%"===e)return"%";if(s>=n)return e;switch(e){case"%s":return String(r[s++]);case"%d":return Number(r[s++]);case"%j":try{return JSON.stringify(r[s++])}catch(t){return"[Circular]";
}default:return e}}),a=r[s];n>s;a=r[++s])o+=g(a)||!x(a)?" "+a:" "+i(a);return o},t.deprecate=function(s,i){function n(){if(!o){if(r.throwDeprecation)throw new Error(i);r.traceDeprecation?console.trace(i):console.error(i),o=!0}return s.apply(this,arguments)}if(k(e.process))return function(){return t.deprecate(s,i).apply(this,arguments)};if(r.noDeprecation===!0)return s;var o=!1;return n};var A,I={};t.debuglog=function(e){if(k(A)&&(A=r.env.NODE_DEBUG||""),e=e.toUpperCase(),!I[e])if(new RegExp("\\b"+e+"\\b","i").test(A)){var s=r.pid;I[e]=function(){var r=t.format.apply(t,arguments);console.error("%s %d: %s",e,s,r)}}else I[e]=function(){};return I[e]},t.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=p,t.isBoolean=m,t.isNull=g,t.isNullOrUndefined=v,t.isNumber=y,t.isString=_,t.isSymbol=b,t.isUndefined=k,t.isRegExp=w,t.isObject=x,t.isDate=T,t.isError=S,t.isFunction=C,t.isPrimitive=E,t.isBuffer=s(1194);var L=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.log=function(){console.log("%s - %s",N(),t.format.apply(t,arguments))},t.inherits=s(1037),t._extend=function(e,t){if(!t||!x(t))return e;for(var s=Object.keys(t),r=s.length;r--;)e[s[r]]=t[s[r]];return e}}).call(t,function(){return this}(),s(154))},175:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(5),n=r(i);t["default"]=n["default"].createActions(["adminChange"])},176:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(5),n=r(i);t["default"]=n["default"].createActions(["update"])},177:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(5),n=r(i),o=n["default"].createActions([]);o.setPreviewFilepath=n["default"].createAction(),o.previewFile=n["default"].createAction(),o.clearPreviewFile=n["default"].createAction(),t["default"]=o},178:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(5),n=r(i);t["default"]=n["default"].createActions(["checkAssessment","resetProject"])},184:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e};Object.defineProperty(t,"__esModule",{value:!0});var n=s(3),o=r(n),a=s(1),l=r(a),c=s(2),u=r(c),h=l["default"].createClass({displayName:"Tab",propTypes:{tabId:l["default"].PropTypes.oneOfType([l["default"].PropTypes.string,l["default"].PropTypes.number]),size:l["default"].PropTypes.number,title:l["default"].PropTypes.string,clickHandler:l["default"].PropTypes.func.isRequired,closeHandler:l["default"].PropTypes.func,canClose:l["default"].PropTypes.bool,isActive:l["default"].PropTypes.bool,isDisabled:l["default"].PropTypes.bool,overflow:l["default"].PropTypes.bool,align:l["default"].PropTypes.string,locked:l["default"].PropTypes.bool},getDefaultProps:function(){return{isActive:!1,overflow:!0}},getInitialState:function(){return{canClose:this.props.canClose||!1}},onClick:function(e){this.props.clickHandler(this.props.tabId,e)},onClose:function(e){e.stopPropagation(),this.props.isDisabled||this.props.closeHandler(this.props.tabId,e)},render:function(){var e=o["default"].omit(this.props,"title"),t={maxWidth:"200px"};this.props.size&&(t.width=this.props.size+"%");var s={"fcn-tabs__tab":!0,"fcn-tabs__tab--can-close":this.state.canClose,"fcn-tabs__tab--align-right":"right"===this.props.align,"fcn-tabs__tab--align-left":"left"===this.props.align,"fcn-button":!0,"fcn-button--tab":!0,"fcn-button--tab--active":this.props.isActive,"fcn-button--tab--inactive":!this.props.isActive,"fcn-button--tab--disabled":this.props.isDisabled},r="fcn-control fcn-icon fcn-icon-close "+s,n=this.state.canClose?l["default"].createElement("span",{className:r,onClick:this.onClose,ref:"closeButton"}):!1,a=this.props.locked?l["default"].createElement("span",{className:"new-cc-icon icon-lock"}):null;this.props.className&&(s[this.props.className]=!0),s=(0,u["default"])(s);var c=this.props.overflow?l["default"].createElement("span",{className:"fcn-tab__gradient"}):!1;return l["default"].createElement("span",i({},e,{className:s,onClick:this.onClick,style:t}),this.props.children,n,this.props.title,a,c)}});t["default"]=h},185:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(1),n=r(i),o=s(579),a=r(o),l=s(2),c=r(l),u=s(30),h=r(u),d=n["default"].createClass({displayName:"FriendlyError",mixins:[h["default"]],propTypes:{error:n["default"].PropTypes.string.isRequired},render:function(){return n["default"].createElement("span",null,this.props.error)}}),f=n["default"].createClass({displayName:"ToolError",mixins:[h["default"]],propTypes:{error:n["default"].PropTypes.string.isRequired},render:function(){return n["default"].createElement("div",null,"Oops! The test returned an error. Maybe you have a syntax error, or a typo.",n["default"].createElement(a["default"],{ref:"showTrace",expandText:"See full error.",closeText:"Hide error."},n["default"].createElement("span",{style:{fontStyle:"italic"}},this.props.error)))}});t["default"]=n["default"].createClass({displayName:"component_error_display",mixins:[h["default"]],propTypes:{visible:n["default"].PropTypes.bool.isRequired,timestamp:n["default"].PropTypes.number,friendly:n["default"].PropTypes.string,tool:n["default"].PropTypes.string},getInitialState:function(){return{visible:!1,timestamp:(new Date).valueOf()}},close:function(){this.setState({visible:!1})},componentWillReceiveProps:function(e){e.timestamp>this.state.timestamp&&this.setState({visible:e.visible,timestamp:e.timestamp})},renderError:function(e,t){var s="friendly"===t?n["default"].createElement(d,{error:e}):n["default"].createElement(f,{error:e});return n["default"].createElement("div",{className:"fcn-component__error fcn-component__"+t+"-error"},n["default"].createElement("div",{className:"fcn-component__error__message"},s),n["default"].createElement("span",{className:"fcn-icon fcn-icon-close fcn-component__error-display__close",onClick:this.close}))},render:function(){var e=(0,c["default"])({"fcn-component__error-display":!0,"fcn-component__error-display--hidden":!this.state.visible}),t=null;return this.props.tool?t=this.renderError(this.props.tool,"tool"):this.props.friendly&&(t=this.renderError(this.props.friendly,"friendly")),n["default"].createElement("div",{className:e},t)}})},186:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e){for(var t=new p({slug:e.Files[0].Name,root:{files:[],directories:[]}}),s=[e];s.length>0;){var r=s.shift();if(r.Files){var i=!0,n=!1,o=void 0;try{for(var a,l=r.Files[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var c=a.value;c.IsDir?(t.createDirectory(c.Path),s.push(c)):t.updateFile(new h["default"]({path:c.Path,name:c.Name,content:""}))}}catch(u){n=!0,o=u}finally{try{!i&&l["return"]&&l["return"]()}finally{if(n)throw o}}}}return t}function o(e){void 0!==e.FileName&&(e.fileName=e.FileName),void 0!==e.Content&&(e.content=e.Content);var t=e.fileName.split("/").slice(-1)[0],s=e.fileName;return/(jpe?g|png|gif)$/.test(e.fileName)?new h["default"]({path:s,name:t,encodedContent:e.content}):new h["default"]({path:s,name:t,content:e.content})}function a(e){return{fileName:e.path,content:e.content,isDir:!1}}function l(e){return{fileName:e.path,content:"",isDir:!0}}var c=function(){function e(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,s,r){return s&&e(t.prototype,s),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.GodexFileTreeToWorkspace=n,t.GodexFileToWorkspaceFile=o,t.WorkspaceFileToGodexFile=a,t.WorkspaceDirectoryToGodexDirectory=l;var u=s(129),h=r(u),d=s(300),f=r(d),p=function(){function e(t){i(this,e),this._workspace=t,this.slug=t.slug,this.root=t.root,this.type=t.type,this._index={},this.root=this._indexDirectory(this.root,[])}return c(e,[{key:"getFile",value:function(e){var t=e;"/"===t[0]&&(t=t.substring(1));var s=this._index[t];if(void 0!==s)return s.clone()}},{key:"getFiles",value:function(e){var t=this;return e.map(function(e){return t.getFile(e)})}},{key:"getDirectory",value:function(e){return this._index[e].clone()}},{key:"get",value:function(e){return this._index[e].clone()}},{key:"exists",value:function(e){return void 0!==this._index[e]}},{key:"getDirectories",value:function(e){var t=this;return e.map(function(e){return t.getDirectory(e)})}},{key:"createDirectory",value:function(e){var t=[],s=!0,r=!1,i=void 0;try{for(var n,o=e.split("/")[Symbol.iterator]();!(s=(n=o.next()).done);s=!0){var a=n.value;t.push(a);var l=t.join("/");if(void 0===this._index[l]){var c=new f["default"]({name:a,path:l,files:[],directories:[]});this._getParentOf(c.path).directories.push(c),this._index[l]=c}}}catch(u){r=!0,i=u}finally{try{!s&&o["return"]&&o["return"]()}finally{if(r)throw i}}}},{key:"createDirectories",value:function(e){var t=!0,s=!1,r=void 0;try{for(var i,n=e[Symbol.iterator]();!(t=(i=n.next()).done);t=!0){var o=i.value;this.createDirectory(o)}}catch(a){s=!0,r=a}finally{try{!t&&n["return"]&&n["return"]()}finally{if(s)throw r}}}},{key:"updateFile",value:function(e){if(!e instanceof h["default"])throw new Error("Expecting file to be instance of File class");var t=this._index[e.path];if(t)t.content=e.content;else{var s=this._getParentOf(e.path);s.files.push(e),this._index[e.path]=e}}},{key:"updateFiles",value:function(e){var t=!0,s=!1,r=void 0;try{for(var i,n=e[Symbol.iterator]();!(t=(i=n.next()).done);t=!0){var o=i.value;this.updateFile(o)}}catch(a){s=!0,r=a}finally{try{!t&&n["return"]&&n["return"]()}finally{if(s)throw r}}}},{key:"deleteFile",value:function(e){var t=this._getParentOf(e),s=e.split("/").slice(-1)[0];t.files=t.files.filter(function(e){return e.name!==s}),t.directories=t.directories.filter(function(e){return e.name!==s}),delete this._index[e]}},{key:"rename",value:function(e,t){var s=this._index[e];s.path=t,s.name=t.split("/").slice(-1)[0],delete this._index[e],this._index[t]=s}},{key:"getFileTree",value:function(){return this._workspace.root}},{key:"asJSON",value:function(){return{slug:this.slug,root:this.root.asJSON()}}},{key:"_getParentOf",value:function(e){var t=e.split("/").slice(0,-1).join("/"),s=this._index[t];return s?s:(this.createDirectory(t),s=this._index[t])}},{key:"_indexDirectory",value:function(e,t){var s=new f["default"](e);s.files=s.files.map(function(e){return new h["default"](e)});var r=!0,i=!1,n=void 0;try{for(var o,a=s.files[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var l=o.value,c=""+t.slice(0).concat([l.name]).join("/");this._index[c]=l}}catch(u){i=!0,n=u}finally{try{!r&&a["return"]&&a["return"]()}finally{if(i)throw n}}for(var d=0;d<s.directories.length;d++){var p=s.directories[d],c=t.slice(0).concat([p.name]);s.directories[d]=this._indexDirectory(p,c)}return this._index[""+t.join("/")]=s,s}}]),e}();t["default"]=p},187:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(62),n=r(i),o=s(16),a=r(o),l=s(52),c=r(l),u=s(129),h=r(u),d=/^file\:\/\/.*/,f="file://";t["default"]={getInitialState:function(){return{__listenerAdded:!1}},listenForLinkClicks:function(e){!this.state.__listenerAdded&&$(e).length>0&&($(e).click(function(e){var t=e.target,s=t.getAttribute("target"),r=t.getAttribute("href");if(s){if(d.test(r)){e.preventDefault();var i=r.substring(f.length);a["default"].getFile(i),n["default"].openFile(h["default"].emptyWithPath(i))}}else e.preventDefault(),c["default"].load(r)}),this.state.__listenerAdded=!0,this.setState({__listenerAdded:!0}))}}},188:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(5),n=r(i),o=s(16),a=r(o),l=s(62),c=r(l),u=s(130),h=r(u),d=s(1091),f=(r(d),s(3)),p=r(f);t["default"]=n["default"].createStore({init:function(){this.files=[],this.active=null,this.pendingFiles=[],this.listenTo(a["default"].deleteFile,this.closeFileByName),this.listenTo(c["default"].openFile,this.openFile),this.listenTo(c["default"].updateCurrentFile,this.updateCurrentFile),this.listenTo(c["default"].closeFile,this.closeFile),this.listenTo(c["default"].setCurrentOpenFile,this.setActive),this.listenTo(c["default"].saveFiles,this.saveFiles),this.listenTo(h["default"],this.setCurrentFiles),a["default"].getFile.completed.listen(this.reloadFile.bind(this))},openFile:function(e){this.isOpen(e.name)?this.active=p["default"].pluck(this.files,"name").indexOf(e.name):this.active=this.files.push(e)-1,this._trigger()},closeFile:function(e){this.files.splice(e,1),this.active>=e&&(this.active=Math.max(this.active-1,0)),this._trigger()},closeFileByName:function(e,t){if(this.isOpen(t)){var s=p["default"].pluck(this.files,"fileName").indexOf(t),r=this.active==s;this.closeFile(s,r)}},setCurrentFiles:function(e){this.files=e,this.active=0,this._trigger()},setActive:function(e){this.active=e,this._trigger()},isOpen:function(e){return this.files.some(function(t){return t.name==e})},updateCurrentFile:function(e){this.files[this.active].content=e,this._trigger()},reloadFile:function(e){var t=this.files.findIndex(function(t){return t.name===e.name});t>-1&&(this.files[t].content=e.content,this._trigger())},saveFiles:function(){a["default"].updateFiles(this.files).then(function(){a["default"].persist().then(c["default"].saveFiles.completed,c["default"].saveFiles.failed())},function(){a["default"].persist().then(c["default"].saveFiles.completed,c["default"].saveFiles.failed())})},_trigger:function(){this.trigger({files:this.files,active:this.active})}})},270:function(e,t,s){var r;r=function(e,t,r){"use strict";function i(){this.initialize.apply(this,arguments)}var n=s(317),o=s(3);i.extend=n.View.extend,i.prototype={},o.extend(i.prototype,n.Events),r.exports=i}.call(t,s,t,e),!(void 0!==r&&(e.exports=r))},273:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(5),n=r(i);t["default"]=n["default"].createActions(["apologize"])},274:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});for(var i=s(5),n=r(i),o=n["default"].createActions([]),a=["clear","stdout","stderr"],l=0;l<a.length;l++){var c=a[l];o[c]=n["default"].createAction()}t["default"]=o},275:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(5),n=r(i);t["default"]=n["default"].createActions(["update"])},282:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e};Object.defineProperty(t,"__esModule",{value:!0}),t.FooterSection=t.FooterTab=t.Footer=void 0;var o=s(169);Object.defineProperty(t,"FooterTab",{enumerable:!0,get:function(){return o.FooterTab}}),Object.defineProperty(t,"FooterSection",{enumerable:!0,get:function(){return o.FooterSection}});var a=s(1),l=r(a),c=s(263),u=r(c),h=r(o),d=s(281),f=r(d),p=s(2),m=r(p),g=s(997),v=r(g),y=t.Footer=l["default"].createClass({displayName:"Footer",propTypes:{disabled:l["default"].PropTypes.bool,course:l["default"].PropTypes.object.isRequired,initialUnit:l["default"].PropTypes.string,initialLesson:l["default"].PropTypes.string,initialExercise:l["default"].PropTypes.string,progress:l["default"].PropTypes.object,className:l["default"].PropTypes.string,children:l["default"].PropTypes.node,unlockAll:l["default"].PropTypes.bool},getDefaultProps:function(){return{disabled:!1}},getInitialState:function(){return{showNavigation:!1}},getCourseNavigator:function(){return l["default"].createElement(u["default"],{isOpen:this.state.showNavigation,course:this.props.course,titleRoute:this.props.titleRoute,initialUnit:this.props.initialUnit,initialLesson:this.props.initialLesson,initialExercise:this.props.initialExercise,progress:this.props.progress,onOutsideClick:this.toggleCourseNavigator,onCloseClick:this.toggleCourseNavigator,unlockAll:this.props.unlockAll})},toggleCourseNavigator:function(){this.setState({showNavigation:!this.state.showNavigation})},render:function(){var e,t=(0,m["default"])((e={},i(e,v["default"].disabled,this.props.disabled),i(e,this.props.className,!!this.props.className),e));return l["default"].createElement(h["default"],n({},this.props,{className:t}),l["default"].createElement(o.FooterSection,{position:"left"},l["default"].createElement(o.FooterTab,null,l["default"].createElement(f["default"],{title:this.props.title,onClick:this.toggleCourseNavigator,active:this.state.showNavigation}))),this.props.children,this.getCourseNavigator())}});t["default"]=y},283:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e};Object.defineProperty(t,"__esModule",{value:!0});var n=s(3),o=r(n),a=s(1),l=r(a),c=s(9),u=r(c),h=s(170),d=s(626),f=r(d),p=s(15),m=r(p),g=s(17),v=r(g),y=s(284),_=r(y),b=s(640),k=r(b),w=l["default"].createClass({displayName:"PlatformHeader",mixins:[m["default"].connect(v["default"],"workspaceStatusType"),m["default"].connect(v["default"],"workspaceStatusMessage")],propTypes:{title:l["default"].PropTypes.string.isRequired,exitPaths:l["default"].PropTypes.object.isRequired,logoRoute:l["default"].PropTypes.string.isRequired,"private":l["default"].PropTypes.bool.isRequired,profileImage:l["default"].PropTypes.string.isRequired,godexStatus:l["default"].PropTypes.object.isRequired,uploadInitialSavepoint:l["default"].PropTypes.func.isRequired,setProgressToCurrentExercise:l["default"].PropTypes.func,currentExercise:l["default"].PropTypes.object.isRequired,prerender:l["default"].PropTypes.object,serverUrl:l["default"].PropTypes.string,contentStudioURL:l["default"].PropTypes.string,nolock:l["default"].PropTypes.bool.isRequired,uploadSavepoints:l["default"].PropTypes.bool.isRequired},getDefaultProps:function(){return{logoRoute:"/",theme:"dark"}},render:function(){var e=[],t=[];u["default"].isAnon()||t.push(l["default"].createElement(h.HeaderTab,null,l["default"].createElement(_["default"],null))),u["default"].hasGodMode()&&e.push(l["default"].createElement(h.HeaderTab,{button:!0,key:"godmode_tab"},l["default"].createElement(f["default"],{setProgressToCurrentExercise:this.props.setProgressToCurrentExercise,uploadInitialSavepoint:this.props.uploadInitialSavepoint,prerender:this.props.prerender,currentWorkspace:this.props.currentExercise.workspace,serverUrl:this.props.serverUrl,contentStudioURL:this.props.contentStudioURL,isAdmin:u["default"].isAdmin(),nolock:this.props.nolock,uploadSavepoints:this.props.uploadSavepoints})));var s=l["default"].createElement(k["default"],{type:this.state.workspaceStatusType,message:this.state.workspaceStatusMessage});return l["default"].createElement(h.Header,i({},this.props,{showNav:!1,theme:"dark",titleRoute:o["default"].get(this.props,"exitPaths.back"),tabsRight:e,tabsLeft:t,statusDisplay:s}))}});t["default"]=w},284:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(1),n=r(i),o=s(15),a=r(o),l=s(1002),c=r(l),u=s(628),h=r(u),d=s(308),f=r(d),p=s(309),m=r(p),g=s(72),v=s(9),y=r(v),_=n["default"].createClass({displayName:"Peers",mixins:[a["default"].connect(f["default"],"peers"),a["default"].connect(m["default"])],propTypes:{useForComponent:n["default"].PropTypes.node,callBack:n["default"].PropTypes.func},_isLockedByLocalUser:function(e){return this.state.lock.owner===y["default"].get("username")&&e.Username===this.state.lock.owner},_isLockedBy:function(e){return this.state.lock.locked&&e.Username===this.state.lock.owner},_isPeer:function(e){return e.Username!==y["default"].get("username")},_renderPeer:function(e){if(this.props.useForComponent){if(this._isLockedByLocalUser(e))return n["default"].createElement(h["default"],{userName:e.Username,icon:e.iconUrl,useForSelf:!0,useForComponent:!0,callBack:this.props.callBack,status:"you are making changes"});if(this._isLockedBy(e))return n["default"].createElement(h["default"],{userName:e.Username,icon:e.iconUrl,useForComponent:!0,status:e.Username+" is making changes"})}else if(this._isPeer(e))return n["default"].createElement(h["default"],{userName:e.Username,icon:e.iconUrl})},_renderPeers:function(){var e=[];return this.state.peers.map(function(t){e.push(this._renderPeer(t))}.bind(this)),e},render:function(){var e=this.props.useForComponent?[0,-50]:[0,30],t=this.props.useForComponent?[40,0]:[30,30],s={top:e,height:t},r=this.props.useForComponent?[0,40]:[30,30],i=this.props.useForComponent?[-50,0]:[30,0],o={top:i,height:r};return n["default"].createElement("div",{className:c["default"].peers},n["default"].createElement(g.VelocityTransitionGroup,{enter:{animation:s},leave:{animation:o},runOnMount:!0},this.state.peers?this._renderPeers():null))}});t["default"]=_},285:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(3),n=r(i),o=s(1),a=r(o),l=s(268),c=s(299),u=r(c),h=s(63),d=r(h),f=s(72),p=s(799),m=r(p),g=s(1003),v=r(g),y=m["default"].bind(v["default"]),_={CLICKABLE:0,SUBMITTABLE:1,SUBMITTING:2,THANKING:3},b={enter:{animation:{opacity:[1,0],translateY:[0,"-10px"]},easing:"easeInOutQuad",duration:250},leave:{animation:{opacity:[0,1],translateY:["-10px",0]},easing:"easeInOutQuad",duration:250}},k={OPTIONS:"Required: Please select one of the options above",DESCRIPTION:"Required: Please provide a description of the issue"},w=a["default"].createClass({displayName:"ReportBug",getInitialState:function(){return{type:null,value:"",errors:{options:null,description:null},reportingState:_.CLICKABLE}},_showConfirmation:function(){var e=this;this.setState({reportingState:_.THANKING}),window.setTimeout(function(){e.setState(e.getInitialState())},3e3)},_handleTextChange:function(e){var t=n["default"].clone(this.state.errors);e.target.value&&(t.description=null),this.setState({value:e.target.value,errors:t})},validate:function(){var e={};return this.canSubmit()||(this.state.type||(e.options=k.OPTIONS),this.state.value.length||(e.description=k.DESCRIPTION),this.setState({errors:e})),n["default"].isEmpty(e)},_submit:function(){var e=this;this.validate()&&(this.setState({reportingState:_.SUBMITTING}),u["default"].report({preface:this.state.value,error:{message:""},type:this.state.type}).success(function(){e._showConfirmation()}).error(function(){console.warn("Failed to report problem to bug tracker."),e._showConfirmation()}))},_cancel:function(){this.setState({reportingState:_.CLICKABLE})},_selectType:function(e){var t=n["default"].clone(this.state.errors);t.options=null,this.setState({type:e,errors:t})},canSubmit:function(){return null===this.state.type||0===this.state.value.length||this.state.reportingState!==_.SUBMITTABLE?!1:!0},showForm:function(e){e.preventDefault(),this.setState({reportingState:_.SUBMITTABLE})},render:function(){var e=y({"accordion-section-body__no-bg":!0,"accordion-section-body__padded":!0,reportForm:!0}),t=y({reportFormText:!0}),s=y({formButton:!0,reportFormButton:!0,reportFormDisabled:!this.canSubmit()}),r=null;switch(this.state.reportingState){case _.SUBMITTABLE:r=a["default"].createElement("div",{key:"report",className:y("formInputs")},a["default"].createElement("span",{className:y("optionsTitle")},"Please select one:"),a["default"].createElement(l.RadioGroup,{name:"bugtype",handleChange:this._selectType,selected:this.state.type},a["default"].createElement(l.RadioOption,{id:"errormsg",className:y("radioOption")},"I don't understand this error message"),a["default"].createElement(l.RadioOption,{id:"interface",className:y("radioOption")},"There's a problem with the interface"),a["default"].createElement(l.RadioOption,{id:"instructions",className:y("radioOption")},"There's something wrong with the instructions"),a["default"].createElement(l.RadioOption,{id:"other",className:y("radioOption")},"Other")),a["default"].createElement("span",{className:y("errorMessage")},this.state.errors.options),a["default"].createElement("textarea",{value:this.state.value,className:t,placeholder:"Please describe the issue",onChange:this._handleTextChange}),a["default"].createElement("span",{className:y("errorMessage")},this.state.errors.description),a["default"].createElement("p",{className:y("helpText")},"Please be as descriptive as possible. The more detail you provide the better we can solve the issue."),a["default"].createElement("div",{className:y("formButtonWrapper")},a["default"].createElement(d["default"],{className:y("formButton"),onClick:this._cancel},"Cancel"),a["default"].createElement(d["default"],{className:s,type:"index",onClick:this._submit},"Submit Bug Report")));break;case _.CLICKABLE:r=a["default"].createElement("div",{className:y("reportFormIntroText")},"If you see a bug or any other issue with this page, please report it ",a["default"].createElement("a",{className:y("reportFormIntroLink"),href:"#",onClick:this.showForm},"here"),".");break;case _.THANKING:r=a["default"].createElement("div",{className:y("reportFormIntroText")},"Thank you for letting us know! We will review your report soon.");break;default:r=null}return a["default"].createElement("div",{className:e},a["default"].createElement(f.VelocityTransitionGroup,b,r))}});t["default"]=w},286:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(1),n=r(i);t["default"]=n["default"].createClass({displayName:"container",render:function(){return n["default"].createElement("div",{className:"fcn-tabs"},this.props.children)}})},287:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(7),n=r(i),o=s(3),a=r(o),l=s(1),c=r(l),u=s(14),h=r(u),d=s(2),f=r(d);t["default"]=c["default"].createClass({displayName:"accordion",propTypes:{content:c["default"].PropTypes.array.isRequired},getInitialState:function(){var e=[!0,!0,!0];return{topStickies:e,bottomStickies:e}},componentDidMount:function(){a["default"].defer(function(){this.checkOffsets(),this.hideOrShowStickies()}.bind(this)),(0,n["default"])(window).on("resize",function(e){this.checkOffsets()}.bind(this))},componentDidUpdate:function(e){this.props.content!=e.content&&this.checkOffsets()},checkOffsets:function(){if(this.refs.accordionScroller){var e=[],t=[],s=h["default"].findDOMNode(this.refs.accordionScroller).offsetHeight,r=[!0,!0,!0],i=0,n=39;this.props.content.forEach(function(e,t){var s=h["default"].findDOMNode(this.refs["accordionSection"+t]).offsetHeight;i+=s}.bind(this)),this.props.content.forEach(function(i,o){var a=h["default"].findDOMNode(this.refs["accordionSection"+o]).offsetTop-n*o;e.push(a),t.push(e[o]-(s-120)),e[o]>s&&(r[o]=!1)}.bind(this));var o=this.props.content.length-1,a=h["default"].findDOMNode(this.refs["accordionSection"+o]).offsetHeight;s>a&&(i+=s-a-o*n),h["default"].findDOMNode(this.refs.accordionContent).style.height=i+"px",this.setState({thresholdsTop:e,thresholdsBottom:t,bottomStickies:r}),this.hideOrShowStickies()}},hideOrShowStickies:function(){var e=h["default"].findDOMNode(this.refs.accordionScroller).scrollTop,t=this.state.thresholdsBottom,s=this.state.thresholdsTop,r=[!0,!0,!0],i=[!0,!0,!0];n["default"].each(i,function(s,r){void 0!=t&&e<t[s]&&(i[s]=!1)}.bind(this)),i[0]=!0,n["default"].each(r,function(t){void 0!=s&&e>s[t]&&(r[t]=!1)}),this.setState({topStickies:r,bottomStickies:i})},handleScroll:function(e){a["default"].defer(function(){this.hideOrShowStickies()}.bind(this))},openSection:function(e){for(var t=0;t<this.props.content.length;t++){var s=this.props.content[t].key;if(s===e&&this.refs["accordionSection"+t]){this.handleClick(t);break}}},handleClick:function(e){var t=h["default"].findDOMNode(this.refs.accordionScroller);t.style.overflow="auto",(0,n["default"])(t).animate({scrollTop:this.state.thresholdsTop[e]+3},300),this.hideOrShowStickies()},render:function(){var e=[],t=[],s=[];return this.props.content.forEach(function(r,i){var n=(0,f["default"])({"accordion-section-heading":!0,invisible:this.state.topStickies[i]}),o=(0,f["default"])({"accordion-section-heading":!0,invisible:!this.state.topStickies[i]}),a=(0,f["default"])({"accordion-section-heading":!0,invisible:this.state.bottomStickies[i]}),l=c["default"].createElement("div",{className:n,onClick:this.handleClick.bind(null,i)},r.heading),u=c["default"].createElement("div",{className:a,onClick:this.handleClick.bind(null,i)},r.heading);t.push(l),s.push(u);var h=c["default"].createElement("div",{className:"accordion-section",ref:"accordionSection"+i,key:"accordion"+i},c["default"].createElement("div",{onClick:this.handleClick.bind(null,i),className:o},r.heading),c["default"].createElement("div",{className:"accordion-section-body"},r.content));e.push(h)}.bind(this)),c["default"].createElement("div",null,c["default"].createElement("div",{className:"accordion-container",ref:"accordionScroller",onScroll:this.handleScroll,onWheel:this.handleScroll},c["default"].createElement("div",{className:"accordion",ref:"accordionContent"},e)),c["default"].createElement("div",{className:"sticky-bottom"},s),c["default"].createElement("div",{className:"sticky-top"},t))}})},288:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(663),n=r(i),o=s(723),a=r(o),l=s(715),c=r(l),u=s(7),h=r(u),d=s(656),f=r(d),p=s(647),m=r(p),g=s(298),v=s(704),y=r(v),b=s(1),k=r(b),w=s(14),x=r(w),T=s(2),S=r(T),C=s(710),E=r(C),P=s(706),M=r(P),N={Terminal:"terminal",OutputTerminal:"terminal",PersistentCodeEditor:"editor",NonPersistentCodeEditor:"editor",Image:"image",Narrative:"learn",WebBrowser:"browser"};t["default"]=k["default"].createClass({displayName:"component_grid",mixins:[a["default"],c["default"]],getInitialState:function(){var e={collapsedColumnKeys:[],fullscreenSlot:void 0,oneIsCollapsed:!1,config:new y["default"],cursor:"auto",grid:new g.Grid(3,2),collapsedSlots:[],slotArrangements:{}},t=this.props.components;for(var s in t){var r=e.config.arrangementAmong(t[s],t);e.grid.registerSlot(r.slots)}return void 0!==this.props.gridSetup&&this.props.gridSetup(e.grid),e},componentDidMount:function(){var e=this;this.state.grid.registerDOMNode(x["default"].findDOMNode(this)),(0,M["default"])("toggleGridWireframe",function(){e.setState({showDebugWireframe:!e.state.showDebugWireframe})})},componentWillUpdate:function(e,t){t.grid&&(t.fullscreenSlot=t.grid.fullscreenSlot())},componentDidUpdate:function(){this.state.resizing&&this.props.adapter.trigger("interface:resized"),this.state.resizing=!1},buildComponents:function(){var e=[],t=this.props.components;for(var s in t){var r=m["default"][t[s]._schema],i=this.state.config.arrangementAmong(t[s],t),o=this.props.helpers.componentShouldBeDisabled(s);
this.state.slotArrangements[s]=i.slots;var a=k["default"].createElement(f["default"],{toggleFullscreen:this.toggleFullscreenSlot.bind(this,i.slots),isFullscreen:!!this.state.fullscreenSlot}),l={readonly:this.props.modifiers.readonly,disabled:o,fullscreen:i.slots===this.state.fullscreenSlot,oneIsCollapsed:this.state.oneIsCollapsed,fileNavReady:this.props.modifiers.fileNavReady,isProject:this.props.modifiers.isProject,dragging:this.state.dragging,assessments:this.props.modifiers.assessments,features:this.props.modifiers.features},c={fullscreenButton:a,hasCheckpoints:void 0!==this.props.adapter.checkpoints&&this.props.adapter.checkpoints.length>0};h["default"].extend(c,this.props.presenter),this.props.presenter.errors&&this.props.presenter.errors.component!==s&&(c.errors={visible:!1}),c=h["default"].extend({},t[s],c);var u={arrangement:i,wall:this.props.presenter.wall,geometry:this.state.grid.slots[i.slots]},d={toggleFullscreen:this.toggleFullscreenSlot.bind(this,i.slots)},p={constructor:r,presenter:c,name:s,icon:N[s]};e.push(k["default"].createElement(n["default"],{locations:i.slots,component:p,slot:u,modifiers:l,helpers:d,adapter:this.props.adapter,user:this.props.user,expandSlot:this.expandSlot,fullscreenSlot:this.fullscreenSlot,key:"slot:"+s}))}return e},expandSlot:function(e){this.state.grid.expandSlot(e),this.setState({grid:this.state.grid,resizing:!0})},expandSlotByName:function(e){var t=this.state.slotArrangements[e];if(!t)throw new Error("No arrangement for "+e);this.state.grid.expandSlot(t),this.setState({grid:this.state.grid,resizing:!0})},toggleFullscreenSlot:function(e){this.state.grid.toggleFullscreenSlot(e),this.setState({grid:this.state.grid,resizing:!0})},handleMouseMove:function(e,t){if(this.state.dragging){if(e.preventDefault(),this.props.adapter.trigger("interface:resizing"),t){var s=void 0;switch(this.state.focusedGutter.edge){case"right":var r=this.state.grid.DOMNodeRect().left+this.state.grid.percentageToPx("x",this.state.focusedGutter.slot.right());s=e.pagePosn.x-r,this.state.focusedGutter.slot.push("right",this.state.grid.pxToPercentage("x",s)),this.setState({grid:this.state.grid});break;case"bottom":var i=this.state.grid.DOMNodeRect().top+this.state.grid.percentageToPx("y",this.state.focusedGutter.slot.bottom());s=e.pagePosn.y-i,this.state.focusedGutter.slot.push("bottom",this.state.grid.pxToPercentage("y",s)),this.setState({grid:this.state.grid})}}}else{var n=this.state.grid.gutterUnderPosn(e.pagePosn),o=void 0;o=void 0!==n?{right:"ew-resize",bottom:"ns-resize"}[n.edge]:"auto",E["default"].save(),(this.state.focusedGutter!==n||this.state.cursor!==o)&&this.setState({focusedGutter:n,cursor:o})}},handleMouseDown:function(e){this.state.focusedGutter&&this.setState({dragging:!0})},handleMouseUp:function(e,t){this.state.dragging&&(this.state.grid.snapSlots(this.state.focusedGutter.slot.origin()),e.stopPropagation(),e.preventDefault(),_.defer(E["default"].restore)),this.setState({grid:this.state.grid,dragging:!1,resizing:this.state.dragging})},render:function(){var e=(0,S["default"])({"fcn-grid":!0,"fcn-grid--dragging":!!this.state.dragging}),t={cursor:this.state.cursor};return window.grid=this,k["default"].createElement("div",{className:e,onMouseMove:this.onMouseMove,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,style:t},this.buildComponents(),this.props.presenter.wall,this.renderDebugLayer())}})},289:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(5),n=(r(i),s(39)),o=r(n),a=s(722),l=r(a),c=s(75),u=r(c),h=s(20),d=(r(h),s(100)),f=(r(d),s(1)),p=r(f),m=s(2),g=(r(m),s(648)),v=r(g),y=s(655),_=r(y);t["default"]=p["default"].createClass({displayName:"GlobalModal",mixins:[o["default"],l["default"]],propTypes:{broadcast:p["default"].PropTypes.func.isRequired,environment:p["default"].PropTypes.string.isRequired},getInitialState:function(){return{open:!1,secondaryModal:void 0,secondaryModalContent:void 0,confirmationCB:void 0}},setCurrentFiles:function(e){this.setState({currentFiles:e.files})},onEscapeKey:function(e){this.setState({open:!1}),this.state.secondaryModalContent&&this.cancelAndCloseSecondaryModal()},toggleModal:function(e){var t=!this.state.open;this.setState({open:t,modal:e}),this.state.secondaryModalContent&&this.cancelAndCloseSecondaryModal()},openSecondaryModal:function(e){this.setState({secondaryModalContent:e,open:!0})},closeAddFileTool:function(){this.state.open&&this.refs.fileTool.toggleAddFileState()},confirmAndCloseSecondaryModal:function(){this.state.confirmationCB(),this.setState({secondaryModalContent:void 0})},cancelAndCloseSecondaryModal:function(){this.setState({secondaryModalContent:void 0}),this.refs.fileTool?this.refs.fileTool.setIsDeleting(!1):this.setState({open:!1})},render:function(){return p["default"].createElement(u["default"],{isOpen:this.state.open,onOutsideClick:this.toggleModal,overlayType:"screen",cover:!0},p["default"].createElement("div",{className:"global-modal"},p["default"].createElement(v["default"],{ref:"fileTool",useViewer:"true",broadcast:this.props.broadcast,toggle:this.toggleModal,addFileTool:this.state.addFileToolOpen,environment:this.props.environment,autoAdd:!1})),this.state.secondaryModalContent?p["default"].createElement(_["default"],{confirmAndClose:this.confirmAndCloseSecondaryModal,cancelAndClose:this.cancelAndCloseSecondaryModal,secondaryModalContent:this.state.secondaryModalContent}):null)}})},290:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(1),n=r(i),o=s(30),a=r(o);t["default"]=n["default"].createClass({displayName:"DefaultDialogButtons",propTypes:{cancelAndClose:n["default"].PropTypes.func.isRequired,confirmAndClose:n["default"].PropTypes.func.isRequired},mixins:[a["default"]],render:function(){return n["default"].createElement("div",null,n["default"].createElement("div",{className:"fcn-button fcn-button--blast",onClick:this.props.cancelAndClose},"Cancel"),n["default"].createElement("div",{className:"fcn-button fcn-button--neutral",onClick:this.props.confirmAndClose},"Confirm"))}})},291:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(3),n=r(i),o=s(165),a=Object.keys(o.extensionMapping),l=["min.js","html.erb","db","json","php","txt"],c=n["default"].uniq(a.concat(l));t["default"]=new Set(c)},292:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(1),n=r(i),o=s(78),a=r(o),l=s(32),c=n["default"].createClass({displayName:"IdleWall",refresh:function(){window.location.reload()},render:function(){return n["default"].createElement(a["default"],null,n["default"].createElement("h2",null,(0,l.t)("views.learning_environment.components.idle_wall.are_you_still_there")),n["default"].createElement("button",{onClick:this.refresh,className:"button button--alernative fcn-wall__nav"},(0,l.t)("views.learning_environment.components.idle_wall.get_back_to_coding")))}});t["default"]=c},293:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(3),n=r(i),o=s(1),a=r(o),l=s(178),c=r(l),u=s(103),h=r(u),d=s(287),f=r(d),p=s(669),m=r(p),g=s(294),v=r(g),y=s(285),_=r(y),b=s(187),k=r(b),w=s(32);t["default"]=a["default"].createClass({displayName:"Brief",mixins:[k["default"]],propTypes:{broadcast:a["default"].PropTypes.func.isRequired,user:a["default"].PropTypes.object.isRequired,modifiers:a["default"].PropTypes.object.isRequired,presenter:a["default"].PropTypes.object.isRequired},getInitialState:function(){return{hideReportForm:!0,showReportConfirmation:!1,objective:(0,h["default"])(this.props.presenter.objective)}},componentDidUpdate:function(){this.listenForLinkClicks(".task--markdown a")},setTask:function(e,t,s){var r=this.props.modifiers.assessments,i=r[e].tasks[t];c["default"].checkAssessment(i.key,s)},scrollToSupport:function(){this.refs.accordion&&this.refs.accordion.openSection("support")},_onStart:function(){this.props.broadcast("start")},render:function(){var e=[{heading:a["default"].createElement("span",{className:"learn-header"},a["default"].createElement("span",{className:"fcn-icon fcn-icon-objective"}),(0,w.t)("views.learning_environment.components.narrative.objective")),content:a["default"].createElement("div",{className:"accordion-section-body__padded task--markdown"},a["default"].createElement("div",{dangerouslySetInnerHTML:{__html:this.state.objective}}),this.props.presenter.progress.status<1?a["default"].createElement("center",{className:"accordion-section-control-container"},a["default"].createElement("div",{className:"fcn-button fcn-button--neutral",onClick:this._onStart},"Start")):void 0),key:"objective"}];if(this.props.presenter.progress.status>0){var t=(0,n["default"])(this.props.modifiers.assessments).pluck("tasks").flatten().value();e.push({heading:a["default"].createElement("span",{className:"fcn-task-section__header"},a["default"].createElement("span",{className:"fcn-icon fcn-icon-instructions"}),(0,w.t)("views.learning_environment.components.narrative.tasks"),a["default"].createElement(v["default"],{total:t.length,complete:n["default"].where(t,{done:!0}).length})),content:a["default"].createElement(m["default"],{tasks:this.props.modifiers.assessments,setTask:this.setTask,broadcast:this.props.broadcast}),key:"selfAssessments"}),e.push({heading:a["default"].createElement("span",{className:"support-header"},a["default"].createElement("div",{className:"fcn-icon fcn-icon-support"}),(0,w.t)("views.learning_environment.components.narrative.report_a_bug")),content:a["default"].createElement(_["default"],null),key:"support"})}return a["default"].createElement("div",null,a["default"].createElement(f["default"],{content:e,ref:"accordion"}))}})},294:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(1),n=r(i),o=s(2),a=r(o),l=n["default"].createClass({displayName:"TaskListCounter",propTypes:{total:n["default"].PropTypes.number,complete:n["default"].PropTypes.number,separator:n["default"].PropTypes.string,text:n["default"].PropTypes.string},getDefaultProps:function(){return{separator:"/",text:"Complete"}},isComplete:function(){return this.props.complete===this.props.total},render:function(){var e=(0,a["default"])({"fcn-task-counter":!0,"fcn-task-counter--complete":this.isComplete()});return n["default"].createElement("div",{className:e},n["default"].createElement("span",{className:"fcn-task-counter__count",style:{marginRight:3}},this.props.complete,this.props.separator,this.props.total),this.props.text)}});t["default"]=l},295:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(676),n=r(i),o=s(679),a=r(o),l=s(694),c=r(l),u=s(678),h=r(u),d=s(692),f=r(d),p=s(686),m=r(p),g=s(684),v=r(g),y=s(677),_=r(y),b=s(682),k=r(b),w=s(687),x=r(w),T=s(689),S=r(T),C=s(674),E=r(C),P=s(688),M=r(P),N=s(685),F=r(N),O=s(683),A=r(O),I=s(680),L=r(I),j=s(691),R=r(j),D=s(693),B=r(D),U=s(690),W=r(U),q=s(681),$=r(q),H=s(675),z=r(H),G={FullWebPreview:[n["default"]],PersistentCodeEditor:[a["default"],_["default"]],PresetTemplatedWebPreview:[L["default"]],OutputTerminal:[{}],TemplatedWebPreview:[k["default"]],Terminal:[A["default"]],SQLPreview:[$["default"]],WebBrowser:[v["default"]],NonPersistentCodeEditor:[h["default"]],Brief:[z["default"]]},K={WebBrowser:[x["default"]],PersistentCodeEditor:[F["default"]],Terminal:[m["default"]]},Q={WebBrowser:[S["default"]],PersistentCodeEditor:[M["default"]]},V=["PersistentCodeEditor","Terminal","WebBrowser"],J=["Lifesaver"],Y={Lifesaver:[f["default"],R["default"]]},X={Lifesaver:[f["default"],B["default"]]},Z=[c["default"]];t["default"]={forComponents:function(e){var t=this._getBaseMixins(e).concat(Z).concat(this._getComponentMixins(e,K)).concat(this._getPersistentMixins(e,Y));return(0,E["default"])({mixins:t})()},forProjectsWithComponents:function(e){return(0,E["default"])({mixins:this._getBaseMixins(e).concat(this._getComponentMixins(e,Q)).concat(this._getPersistentMixins(e,X))})()},_hasOneOf:function(e,t){var s=Object.keys(e);return t.some(function(e){return s.indexOf(e)>=0}.bind(this))},_getPersistentMixins:function(e,t){var s=[];return this._hasOneOf(e,V)&&J.forEach(function(e){s=s.concat(t[e])}.bind(this)),s},_getComponentMixins:function(e,t){var s=Object.keys(e),r=[];return s.forEach(function(e){e in t&&(r=r.concat(t[e]))}.bind(this)),r},_getBaseMixins:function(e){return[W["default"]].concat(this._getComponentMixins(e,G))}}},296:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,s,r){return s&&e(t.prototype,s),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.LIBRARY_ROOT=void 0;var o=s(1192),a=r(o),l=s(186),c=r(l),u=void 0;switch(CCDATA.env){case"development":t.LIBRARY_ROOT=u="http://localhost:8012";break;default:t.LIBRARY_ROOT=u="https://library.codecademy.com"}var h=function(){function e(t,s){i(this,e),this._userId=t,this._authToken=s}return n(e,[{key:"initialize",value:function(){this.fetch()}},{key:"fetch",value:function(e){var t=this;return new Promise(function(s,r){return t._call("workspaces/"+e+"/download",{workspace:e}).then(function(e){s(new c["default"](e.body.workspace))},r)})}},{key:"persist",value:function(e){return this._call("workspaces/"+e.slug+"/upload",{workspace:e.asJSON(),slug:e.slug})}},{key:"restore",value:function(e,t){return this._call("workspaces/"+e+"/restore/"+t,{})}},{key:"_call",value:function(e,t){var s=this;return t=$.extend({auth_token:this._authToken},t),new Promise(function(r,i){a["default"].post(u+"/users/"+s._userId+"/"+e).set("Content-Type","application/json").send(JSON.stringify(t)).end(function(e,t){e?i(e):r(t)})})}},{key:"backend",get:function(){return"library"}}]),e}();t["default"]=h,t.LIBRARY_ROOT=u},297:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.LearnMixins=void 0;var i=s(15),n=r(i),o=s(721),a=r(o),l=s(719),c=r(l),u=s(714),h=r(u),d=s(725),f=r(d),p=s(726),m=r(p),g=s(713),v=r(g),y=s(730),_=r(y),b=s(731),k=r(b);t.LearnMixins=[a["default"],n["default"].connect(k["default"]),c["default"],h["default"],f["default"],m["default"],v["default"],_["default"]]},298:function(e,t){"use strict";function s(e){if(Array.isArray(e)){for(var t=0,s=Array(e.length);t<e.length;t++)s[t]=e[t];return s}return Array.from(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,s,r){return s&&e(t.prototype,s),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var n=14,o=.1,a=.17,l=.04,c=.06,u=["x","y"],h={right:"x",bottom:"y",left:"x",top:"y"},d={top:"bottom",right:"left",bottom:"top",left:"right"},f=t.Range=function(){function e(t,s){r(this,e),this.min=t,this.max=s,this.length=s-t+1}return i(e,[{key:"contains",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=t.buffer||0;return this.min-s<=e&&this.max+s>=e}}]),e}(),p=t.Posn=function(){function e(t,s){r(this,e),this.x=t,this.y=s}return i(e,[{key:"clone",value:function(){return new e(this.x,this.y,this.context)}},{key:"gte",value:function(e){return this.x>=e.x&&this.y>=e.y}},{key:"lte",value:function(e){return this.x<=e.x&&this.y<=e.y}}]),e}(),m=function(){function e(t,s,i,n){r(this,e),this.x=t,this.y=s,this.id=i,this.neighbors={},this.grid=n,this._right={value:t/n.width+1/n.width},this._bottom={value:s/n.height+1/n.height}}return i(e,[{key:"left",value:function(){return 0===this.x?0:this.neighbors.left.right()}},{key:"right",value:function(){return this._right.value}},{key:"top",value:function(){return 0===this.y?0:this.neighbors.top.bottom()}},{key:"bottom",value:function(){return this._bottom.value}},{key:"soloEdges",value:function(){return{top:void 0===this.neighbors.top,right:void 0===this.neighbors.right,bottom:void 0===this.neighbors.bottom,left:void 0===this.neighbors.left}}},{key:"set",value:function(e,t){switch(e){case"top":if(0===this.y)throw new Error("Cannot set 'top' on top-most cell");this.neighbors.top._bottom.value=t;break;case"right":if(this.x===this.grid.width-1)throw new Error("Cannot set 'right' on right-most cell");this._right.value=t;break;case"bottom":if(this.y===this.grid.height-1)throw new Error("Cannot set 'bottom' on bottom-most cell");this._bottom.value=t;break;case"left":if(0===this.x)throw new Error("Cannot set 'left' on left-most cell");this.neighbors.left._right.value=t}}}]),e}(),g=function(){function e(t,s){r(this,e),this.id=t,this.grid=s,this.cells={},this.lastEdgeSet={x:void 0,y:void 0}}return i(e,[{key:"registerCells",value:function(e){var t=!0,s=!1,r=void 0;try{for(var i,n=e[Symbol.iterator]();!(t=(i=n.next()).done);t=!0){var o=i.value;if(this.cells[o.id]=o,void 0!==o.slot)throw new Error("Can't register slot "+this.id+"; cell "+o.id+" already belongs to slot "+o.slot.id+"!");o.slot=this}}catch(a){s=!0,r=a}finally{try{!t&&n["return"]&&n["return"]()}finally{if(s)throw r}}this.calculateEdges(),this.mergePointers(),this.cacheNeighbors()}},{key:"calculateEdges",value:function(){this.edgeCells={top:[],right:[],bottom:[],left:[]},this.edges={top:1,right:0,bottom:0,left:1};for(var e=Object.values(this.cells),t=["top","right","bottom","left"],r=0;r<t.length;r++){var i=t[r],n=!0,o=!1,a=void 0;try{for(var l,c=e[Symbol.iterator]();!(n=(l=c.next()).done);n=!0){var u=l.value,h=u[i]();0===this.edgeCells[i].length||h===this.edges[i]?(this.edgeCells[i].push(u),this.edges[i]=h):("left"===i||"top"===i)&&h<this.edges[i]?(this.edgeCells[i]=[u],this.edges[i]=h):("right"===i||"bottom"===i)&&h>this.edges[i]&&(this.edgeCells[i]=[u],this.edges[i]=h)}}catch(d){o=!0,a=d}finally{try{!n&&c["return"]&&c["return"]()}finally{if(o)throw a}}}this.edgeExtents={};var p=this.sharedEdges();for(var m in p)if(p[m]){var g,v,y,_,b=this.edgeCells[m];this.edgeExtents[m]={x:new f((g=Math).min.apply(g,s(b.map(function(e){return e.left()}))),(v=Math).max.apply(v,s(b.map(function(e){return e.right()})))),y:new f((y=Math).min.apply(y,s(b.map(function(e){return e.top()}))),(_=Math).max.apply(_,s(b.map(function(e){return e.bottom()}))))}}}},{key:"mergePointers",value:function(){for(var e in d){var t=d[e],s=this.edgeCells[e][0],r=!0,i=!1,n=void 0;try{for(var o,a=this.edgeCells[e][Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var l=o.value;l["_"+e]=s["_"+e];var c=l.neighbors[t];c&&(c["_"+t]=s.neighbors[t]["_"+t])}}catch(u){i=!0,n=u}finally{try{!r&&a["return"]&&a["return"]()}finally{if(i)throw n}}}}},{key:"cacheNeighbors",value:function(){var e={top:[],right:[],bottom:[],left:[]},t=!0,s=!1,r=void 0;try{for(var i,n=Object.values(this.cells)[Symbol.iterator]();!(t=(i=n.next()).done);t=!0){var o=i.value;o.neighbors.top&&o.top()===this.edges.top&&-1===e.top.indexOf(o.neighbors.top.slot)&&e.top.push(o.neighbors.top.slot),o.neighbors.right&&o.right()===this.edges.right&&-1===e.right.indexOf(o.neighbors.right.slot)&&e.right.push(o.neighbors.right.slot),o.neighbors.bottom&&o.bottom()===this.edges.bottom&&-1===e.bottom.indexOf(o.neighbors.bottom.slot)&&e.bottom.push(o.neighbors.bottom.slot),o.neighbors.left&&o.left()===this.edges.left&&-1===e.left.indexOf(o.neighbors.left.slot)&&e.left.push(o.neighbors.left.slot)}}catch(a){s=!0,r=a}finally{try{!t&&n["return"]&&n["return"]()}finally{if(s)throw r}}this.neighbors=e}},{key:"soloEdges",value:function(){return{top:this.edgeCells.top[0].soloEdges().top,right:this.edgeCells.right[0].soloEdges().right,bottom:this.edgeCells.bottom[0].soloEdges().bottom,left:this.edgeCells.left[0].soloEdges().left}}},{key:"sharedEdges",value:function(){return{top:!this.edgeCells.top[0].soloEdges().top,right:!this.edgeCells.right[0].soloEdges().right,bottom:!this.edgeCells.bottom[0].soloEdges().bottom,left:!this.edgeCells.left[0].soloEdges().left}}},{key:"top",value:function(){return this.edgeCells.top[0].top()}},{key:"right",value:function(){return this.edgeCells.right[0].right()}},{key:"bottom",value:function(){return this.edgeCells.bottom[0].bottom()}},{key:"origin",value:function(){return new p(this.left(),this.top())}},{key:"left",value:function(){return this.edgeCells.left[0].left()}},{key:"width",value:function(){return this.right()-this.left()}},{key:"roundedWidth",value:function(){return Math.round(100*this.width())/100}},{key:"height",value:function(){return this.bottom()-this.top()}},{key:"roundedHeight",value:function(){return Math.round(100*this.height())/100}},{key:"coordExtent",value:function(){return{x:new f(this.edgeCells.left[0].x,this.edgeCells.right[0].x),y:new f(this.edgeCells.top[0].y,this.edgeCells.bottom[0].y)}}},{key:"collapsed",value:function(e){switch(e){case"x":return this.roundedWidth()<=l;case"y":return this.roundedHeight()<=c;case void 0:return this.collapsed("x")||this.collapsed("y")}}},{key:"elgibileToSnap",value:function(e){switch(e){case"x":var t=this.roundedWidth();return t>l&&o>=t;case"y":var s=this.roundedHeight();return s>c&&a>=s}}},{key:"withinCollapseThreshold",value:function(e){switch(e){case"x":return this.roundedWidth()<=o;case"y":return this.roundedHeight()<=a}}},{key:"slack",value:function(e){switch(e){case"x":return this.roundedWidth()-l;case"y":return this.roundedHeight()-c}}},{key:"firstSlotWithSlackInDirection",value:function(e){var t=h[e];return this.slack(t)>0?this:0===this.neighbors[e].length?null:this.neighbors[e][0].firstSlotWithSlackInDirection(e)}},{key:"neighborWithSlackInDirection",value:function(e){switch(e){case"top":case"left":return this.firstSlotWithSlackInDirection(e);case"right":case"bottom":return this.neighbors[e][0].firstSlotWithSlackInDirection(e)}}},{key:"firstDirectionWithSlack",value:function(e){var t=!0,s=!1,r=void 0;try{for(var i,n=e[Symbol.iterator]();!(t=(i=n.next()).done);t=!0){var o=i.value;if(this.neighborWithSlackInDirection(o))return o}}catch(a){s=!0,r=a}finally{try{!t&&n["return"]&&n["return"]()}finally{if(s)throw r}}return null}},{key:"set",value:function(e,t){var s=this,r=(arguments.length<=2||void 0===arguments[2]?!1:arguments[2],!0),i=!1,n=void 0;try{for(var o,a=this.edgeCells[e][Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var l=o.value;l.set(e,t)}}catch(c){i=!0,n=c}finally{try{!r&&a["return"]&&a["return"]()}finally{if(i)throw n}}var u=h[e];this.lastEdgeSet[u]=e;var f=!0,p=!1,m=void 0;try{for(var g,v=this.neighbors[e][Symbol.iterator]();!(f=(g=v.next()).done);f=!0){var y=g.value;y.lastEdgeSet[u]=d[e],y.redistributeCells();var _=y.neighbors[d[e]].filter(function(e){return e!==s}),b=!0,k=!1,w=void 0;try{for(var x,T=_[Symbol.iterator]();!(b=(x=T.next()).done);b=!0){var S=x.value;S.lastEdgeSet[u]=e,S.redistributeCells()}}catch(c){k=!0,w=c}finally{try{!b&&T["return"]&&T["return"]()}finally{if(k)throw w}}}}catch(c){p=!0,m=c}finally{try{!f&&v["return"]&&v["return"]()}finally{if(p)throw m}}this.redistributeCells()}},{key:"push",value:function(e,t){var s=d[e];if(0===this.neighbors[e].length)return!1;if("top"===e){var r=this.neighbors.top[0];return r.push(s,-t)}if("left"===e){var r=this.neighbors.left[0];return r.push(s,-t)}var i=h[e],n=void 0;if(n=t>0?this.neighborWithSlackInDirection(e):this.neighborWithSlackInDirection(s),!n)return!1;var o=0>t;t=Math.min(Math.abs(t),n.slack(i)),o&&(t=-t),this.set(e,this[e]()+t,!0),this.enforceMinimumDimensions(e);var a=this.neighbors[t>0?e:s];if(a){var l=!0,c=!1,u=void 0;try{for(var f,p=a[Symbol.iterator]();!(l=(f=p.next()).done);l=!0){var r=f.value;r.enforceMinimumDimensions(s)}}catch(m){c=!0,u=m}finally{try{!l&&p["return"]&&p["return"]()}finally{if(c)throw u}}}return!0}},{key:"redistributeCells",value:function(){var e=Object.values(this.cells),t=this.coordExtent(),s=!0,r=!1,i=void 0;try{for(var n,o=e[Symbol.iterator]();!(s=(n=o.next()).done);s=!0){var a=n.value;if(t.x.length>1){var l=(a.x-t.x.min)/t.x.length;a.neighbors.right&&a.set("right",this.left()+l*this.width())}if(t.y.length>1){var c=(a.y-t.y.min)/t.y.length;a.neighbors.bottom&&a.set("bottom",this.top()+c*this.height())}}}catch(u){r=!0,i=u}finally{try{!s&&o["return"]&&o["return"]()}finally{if(r)throw i}}}},{key:"fullscreen",value:function(){var e=!1;for(var t in h)for(;this.push(t,1);)e=!0;return e}},{key:"enforceMinimumDimensions",value:function(e){var t=this.width(),s=this.height();switch(e){case"left":l>t&&(this.neighbors.right.length?this.set("right",this.left()+l):this.set("left",this.right()-l));break;case"right":l>t&&(this.neighbors.left.length?this.set("left",this.right()-l):this.set("right",this.left()+l));break;case"top":c>s&&(this.neighbors.bottom.length?this.set("bottom",this.top()+c):this.set("top",this.bottom()-c));break;case"bottom":c>s&&(this.neighbors.top.length?this.set("top",this.bottom()-c):this.set("bottom",this.top()+c))}}}]),e}();t.Grid=function(){function e(t,s){r(this,e),this.width=t,this.height=s,this.cells=[],this.slots={};for(var i=0;s>i;i++)for(var n=this.cells[i]=[],o=0;t>o;o++){var a=new m(o,i,i*t+o,this);n[o]=a}for(var i=0;s>i;i++)for(var o=0;t>o;o++){var a=this.getCellByCoords(o,i);i>0&&(a.neighbors.top=this.getCellByCoords(o,i-1)),t-1>o&&(a.neighbors.right=this.getCellByCoords(o+1,i)),s-1>i&&(a.neighbors.bottom=this.getCellByCoords(o,i+1)),o>0&&(a.neighbors.left=this.getCellByCoords(o-1,i))}}return i(e,[{key:"registerSlot",value:function(e){var t=this,s=new g(e,this);this.slots[e]=s;var r=e.split(""),i=r.map(function(e){return t.getCellById(parseInt(e,10))});s.registerCells(i),this.slotsList=Object.values(this.slots);var n=!0,o=!1,a=void 0;try{for(var l,c=this.slotsList[Symbol.iterator]();!(n=(l=c.next()).done);n=!0){var u=l.value;u.cacheNeighbors()}}catch(h){o=!0,a=h}finally{try{!n&&c["return"]&&c["return"]()}finally{if(o)throw a}}}},{key:"getSlotById",value:function(e){return this.slots[e]}},{key:"getCellByCoords",value:function(e,t){return this.cells[t][e]}},{key:"getCellById",value:function(e){var t=e%this.width,s=Math.floor(e/this.width);return this.cells[s][t]}},{key:"registerDOMNode",value:function(e){this.DOMNode=e}},{key:"DOMNodeRect",value:function(){return this.DOMNode.getBoundingClientRect()}},{key:"percentageToPx",value:function(e,t){if(0===t)return 0;switch(e){case"x":return this.DOMNodeRect().width*t;case"y":return this.DOMNodeRect().height*t}}},{key:"pxToPercentage",value:function(e,t){if(0===t)return 0;switch(e){case"x":return t/this.DOMNodeRect().width;case"y":return t/this.DOMNodeRect().height}}},{key:"gutterUnderPosn",value:function(e){var t=this.DOMNodeRect(),s=new p(e.x-t.left,e.y-t.top),r=!0,i=!1,o=void 0;try{for(var a,l=this.slotsList[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;for(var u in c.edgeExtents)switch(u){case"right":var h=this.percentageToPx("x",c[u]()),d=this.percentageToPx("y",c.edgeExtents[u].y.min),f=this.percentageToPx("y",c.edgeExtents[u].y.max);if(Math.abs(s.x-h)<n/2&&s.y>=d&&s.y<=f)return{edge:u,slot:c};case"bottom":var m=this.percentageToPx("y",c[u]()),g=this.percentageToPx("x",c.edgeExtents[u].x.min),v=this.percentageToPx("x",c.edgeExtents[u].x.max);if(Math.abs(s.y-m)<n/2&&s.x>=g&&s.x<=v)return{edge:u,slot:c}}}}catch(y){i=!0,o=y}finally{try{!r&&l["return"]&&l["return"]()}finally{if(i)throw o}}}},{key:"recalculateEdges",value:function(){var e=!0,t=!1,s=void 0;try{for(var r,i=this.slotsList[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var n=r.value;n.calculateEdges()}}catch(o){t=!0,s=o}finally{try{!e&&i["return"]&&i["return"]()}finally{if(t)throw s}}}},{key:"firstSlotWaitingToCollapse",value:function(e){var t=!0,s=!1,r=void 0;try{for(var i,n=this.slotsList[Symbol.iterator]();!(t=(i=n.next()).done);t=!0){var o=i.value;if(o.elgibileToSnap(e))return o}}catch(a){s=!0,r=a}finally{try{!t&&n["return"]&&n["return"]()}finally{if(s)throw r}}return null}},{key:"expandSlot",value:function(e){var t=this.getSlotById(e),s=t.origin(),r=t.coordExtent(),i=!0,n=!1,o=void 0;try{for(var a,l=u[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var c=a.value,h=t.lastEdgeSet[c],f=t.firstDirectionWithSlack([h,d[h]]);if(f){var p=void 0;if(t.withinCollapseThreshold(c))switch(c){case"x":p=r[c].length/this.width,t.push(f,p-t.width());break;case"y":p=r[c].length/this.height,t.push(f,p-t.height())}}}}catch(m){n=!0,o=m}finally{try{!i&&l["return"]&&l["return"]()}finally{if(n)throw o}}this.snapSlots(s)}},{key:"expandSlotInDirection",value:function(e,t){var s=this.getSlotById(e),r=s.neighbors[t],i=void 0;r.length>0?(i=r[0].slack(h[t]),s.push(t,i)):console.warn("Cannot expand slot "+e+" in direction #{dir}; no neighbors")}},{key:"toggleFullscreenSlot",value:function(e){var t=this.slots[e].fullscreen();if(!t){for(var s=1/this.width,r=1/this.height,i=0;i<this.height;i++)for(var n=0;n<this.width;n++){var o=this.cells[i][n];o._right.value=(n+1)*s,o._bottom.value=(i+1)*r}return!1}return!0}},{key:"fullscreenSlot",value:function(){var e=this.slotsList.filter(function(e){return!(e.withinCollapseThreshold("x")||e.withinCollapseThreshold("y"))});return 1===e.length?e[0]:null}},{key:"snapSlots",value:function(e){this.recalculateEdges();for(var t=[],s={},r=["x","y"],i=0;i<r.length;i++)for(var n=r[i],o=void 0;o=this.firstSlotWaitingToCollapse(n);){var a=void 0,l=-o.slack(n);if(a=s[n]?s[n]:o.origin().lte(e)?{x:"right",y:"bottom"}[n]:{x:"left",y:"top"}[n],(0==o.neighbors[a].length||t.indexOf(o.neighbors[a][0].id)>-1)&&(a=d[a]),0==o.neighbors[a].length||t.indexOf(o.neighbors[a][0].id)>-1)return void console.warn("Cannot snap; infinite loop");s[n]=a,o.push(a,l),t.push(o.id)}}}]),e}()},299:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(7),n=r(i);s(22);var o=s(9),a=r(o),l=s(20),c=r(l),u=s(18),h=r(u),d=s(38),f=r(d);t["default"]={report:function(e){var t=window.location.href.split("/");t=t[t.length-1];var s=e.error;return"checkpoint-eval"===e.type&&n["default"].ajax({type:"POST",url:"/learn/report-eval-error",data:{message:e.preface+": "+s.message,uri:window.location.pathname,stack:s.stack,type:s.name,useragent:navigator.userAgent}}),(0,f["default"])("info","Submitting bug report of type "+e.type),c["default"].increment("francine.bug-report","submit"),h["default"].track("action","click",{target:"reportBug",skill:t,url:window.location.href,type:e.type}),n["default"].ajax({type:"POST",url:"https://bugs.codecademy.com/report",data:{type:e.type,user_id:window.CCDATA.current_user._id,user_name:window.CCDATA.current_user.username,user_email:window.CCDATA.current_user.email,is_admin:a["default"].isAdmin(),desc:e.preface,slug:t,timestamp:(new Date).valueOf(),url:window.location.href,useragent:navigator.userAgent}})}}},300:function(e,t){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,s,r){return s&&e(t.prototype,s),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(t){s(this,e),this.name=t.name,this.path=t.path,this.files=t.files,this.directories=t.directories}return r(e,[{key:"asJSON",value:function(){return{name:this.name,path:this.path,files:this.files.map(function(e){return e.asJSON()}),directories:this.directories.map(function(e){return e.asJSON()})}}},{key:"clone",value:function(){return new e({name:this.name,path:this.path,files:this.files.map(function(e){
return e.clone()}),directories:this.directories.map(function(e){return e.clone()})})}}]),e}();t["default"]=i},301:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(7),n=r(i);s(526),t["default"]={listenForOutsideClick:function(e,t){var s=(0,n["default"])(e);(0,n["default"])(document).on("click.clickListenerMixin",function(e){(0,n["default"])(e.target).insideOf(document.querySelector("body"))&&((0,n["default"])(e.target).insideOf(s[0])||((0,n["default"])(document).off("click"),t(e.target)))})},stopListeningForOutsideClicks:function(){(0,n["default"])(document).off("click.clickListenerMixin")},componentWillUnmount:function(){this.stopListeningForOutsideClicks()}}},302:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={fileExists:function(e){return e=this.props.currentSavePath?this.props.currentSavePath+"/"+e:e,this.state.workspaceObject.exists(e)}}},303:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={isLastProject:function(){var e=this.currentUnit();return 0===e.projects.length?!0:this.currentProjectIndex()===e.projects.length-1?!0:!1},isLastLesson:function(){var e=this.currentUnit();return 0===e.lessons.length?!0:this.currentLessonIndex()===e.lessons.length-1?!0:!1},isLastUnit:function(){return this.currentUnitIndex()===this.props.segment.units.length-1},projectIsNext:function(){var e=this.currentUnit();return this.props.project?!this.isLastProject()&&e.projects.length>0:e.projects.length>0?e.projects[0].should_show?this.isLastLesson():!1:void 0},courseIsComplete:function(){return this.props.project?this.isLastProject()&&this.isLastUnit():this.isLastLesson()&&this.isLastUnit()},currentProject:function(){return this.props.segment.projects[this.currentProjectIndex()]},currentUnit:function(){return this.props.segment.units[this.currentUnitIndex()]},currentLesson:function(){return this.props.segment.lessons[this.currentLessonIndex()]},currentLessonIndex:function s(){var e=this.currentUnit(),s=void 0,t=this.state.currentLesson.title;return e.lessons.forEach(function(e,r){e.title===t&&(s=r)}),s},currentProjectTitle:function(){var e=this.currentProject();return e.title},currentLessonTitle:function(){var e=this.currentLesson();return e.title},currentUnitIndex:function r(){var e=this.props.segment,t=e.units,s=this.props.project?this.props.project.title:this.state.currentLesson.title,r=void 0;return t.forEach(function(e,t){e.projects.forEach(function(e){e.title===s&&(r=t)}),e.lessons.forEach(function(e){e.title===s&&(r=t)})}),r},currentProjectIndex:function i(){var e=this.currentUnit(),i=void 0,t=this.props.project.title;return e.projects.forEach(function(e,s){e.title===t&&(i=s)}),i}}},304:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){return{componentDidMount:function(){var t=this[e];if(void 0===t)throw new Error('onWorkspaceReady: no function named "'+e+'"');n["default"].setWorkspace.completed.listen(function(){t()})}}};var i=s(16),n=r(i)},305:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){if(Array.isArray(e)){for(var t=0,s=Array(e.length);t<e.length;t++)s[t]=e[t];return s}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var n=s(5),o=r(n),a=s(102),l=r(a);t["default"]=o["default"].createStore({init:function(){this._adapter=null,this._broadcast=null,this.listenToMany({onBroadcast:l["default"].broadcast,onNewAdapter:l["default"].newAdapter})},onBroadcast:function(){!this._adapter||!this._broadcast||arguments.length<1||this._broadcast.apply(this,i(Array.prototype.slice.call(arguments,0)))},onNewAdapter:function(e){this._adapter=e,this._broadcast=e.createComponentBroadcastFunction("Reflux"),this.trigger()}})},306:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(5),n=r(i),o=s(15),a=r(o);t["default"]=n["default"].createStore({mixins:[a["default"].store],getInitialState:function(){return{course:null,lesson:null,exercise:null}},setCursor:function(e){this.setState(e)},tokenize:function(){return this.state.course?[this.state.course.slug,this.state.lesson.slug,this.state.exercise.slug].join(":"):""}})},307:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(5),n=r(i),o=s(17),a=(r(o),s(177)),l=r(a),c=s(16),u=r(c);t["default"]=n["default"].createStore({init:function(){this.listenTo(l["default"].setPreviewFilepath,this.setPreviewFilepath),this.listenTo(l["default"].clearPreviewFile,this.clearPreviewFile)},setPreviewFilepath:function(e){var t=arguments.length<=1||void 0===arguments[1]?"utf8":arguments[1];u["default"].getFile(e,t).then(this.setPreviewFile),this.trigger({file:null,loading:!0})},setPreviewFile:function(e){this.trigger({file:e,loading:!1})},clearPreviewFile:function(){this.filepath=null,this.trigger({file:null,loading:!1})}})},308:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(5),n=r(i),o=s(3),a=r(o),l=s(176),c=r(l),u=s(15),h=r(u),d=s(16),f=r(d),p=s(9),m=r(p);t["default"]=n["default"].createStore({mixins:[h["default"].store],init:function(){this.listenToMany({onUpdate:c["default"].update,onPeerLock:f["default"].peerLock,onPeerUnlock:f["default"].peerUnlock})},getInitialState:function(){var e=m["default"].get("username");return{peers:[],hostUserName:e}},onPeerLock:function(e){var t=a["default"].clone(this.state.peers);t.forEach(function(t){e.Username===t.Username&&(t.hasLock=!0)}),this.setState({peers:t})},onPeerUnlock:function(){var e=a["default"].clone(this.state.peers);e.forEach(function(e){e.hasLock=!1}),this.setState({peers:e})},checkForDupes:function(e,t){var s=!1;return t.forEach(function(t){t.Username===e&&(s=!0)}),s},onUpdate:function(e){var t=e,s=[];t.forEach(function(e){this.checkForDupes(e.Username,s)||s.push(e)}.bind(this)),t=s,t.length&&t.forEach(function(e){return e.iconUrl="/users/profile_image/"+e.Username}),this.setState({peers:t})}})},309:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(5),n=r(i),o=s(33),a=r(o),l=s(275),c=r(l),u=s(16),h=r(u),d=s(592),f=r(d),p=s(9),m=r(p),g=s(15),v=r(g);t["default"]=n["default"].createStore({mixins:[v["default"].store],getInitialState:function(){return{lock:{locked:!1,owner:"",timeKeeper:null}}},init:function(){this.listenToMany({onPeerLock:h["default"].peerLock,onPeerUnlock:h["default"].peerUnlock,onLock:h["default"].lock,onUnlock:h["default"].unlock,setWorkspace:h["default"].setWorkspace,onStartLockTimer:f["default"].startLockTimer})},startWarningCountDown:function(e){var t=this,s=e;this._warningCountDown=setTimeout(function(){c["default"].update("Your lock will expire in "+e+" seconds",""),s--,t.startWarningCountDown(s)},1e3)},_setLockTimer:function(){window.addEventListener("keydown",this.onStartLockTimer),this.onStartLockTimer()},_clearIntervals:function(){this._timeKeeper&&(clearTimeout(this._timeKeeper),clearTimeout(this._timeBuffer),clearTimeout(this._warningCountDown))},onStartLockTimer:function(){var e=this;this._clearIntervals(),c["default"].update("You are making changes",""),this._timeBuffer=setTimeout(function(){e.startWarningCountDown(10)},49e3),this._timeKeeper=setTimeout(function(){window.removeEventListener("keydown",e.onStartLockTimer),h["default"].unlock()},6e4)},setWorkspace:function(e,t){this.slug=e.slug,t&&t.Locked&&this.onPeerLock(t.User)},onLock:function(){var e=this;a["default"].state.client.lockWorkspace(this.slug,function(t){t?h["default"].lock.failed(t):(e.setState({lock:{locked:!0,owner:m["default"].get("username")}}),e._setLockTimer(),c["default"].update("You are making changes",""),h["default"].lock.completed())})},onUnlock:function(){var e=this;a["default"].state.client.unlockWorkspace(this.slug,function(t){t?h["default"].unlock.failed(t):(e.setState({lock:{locked:!1,owner:""}}),e._clearIntervals(),h["default"].unlock.completed())})},onPeerLock:function(e){this.setState({lock:{locked:e.Username!==m["default"].get("username"),owner:e.Username}}),e.Username!==m["default"].get("username")&&c["default"].update("is making changes",e.Username)},onPeerUnlock:function(){this.setState({lock:{locked:!1,owner:""}})}})},318:function(e,t){var s={utf8:{stringToBytes:function(e){return s.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(s.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],s=0;s<e.length;s++)t.push(255&e.charCodeAt(s));return t},bytesToString:function(e){for(var t=[],s=0;s<e.length;s++)t.push(String.fromCharCode(e[s]));return t.join("")}}};e.exports=s},362:function(e,t){e.exports={progressElipse:"index__progressElipse___FlY8y",dot:"index__dot___2X2o9",dotActive:"index__dotActive___2T7Hh"}},363:function(e,t){e.exports={button:"index__button___3K1ZK",popover:"index__popover___29Pxs",gistLoader:"index__gistLoader___3g3Sp",gistResult:"index__gistResult___3XzFF",gistOpen:"index__gistOpen___W3pBa",gistInput:"index__gistInput___3M3Fr"}},523:function(e,t,s){var r;r=function(e,t,r){var i=s(3);r.exports={_externalOrigin:function(){return i.contains(["development","test"],CCDATA.env)?"//external-dev.codecademy.com:"+window.location.port:"//external-"+CCDATA.env+".codecademy.com"},secureSandboxIndex:function(){if(i.contains(["development","test"],CCDATA.env))return this._externalOrigin()+CCDATA.secureSandboxIndexPath;var e=CCDATA.secureSandboxIndexPath.replace("cdn","external");return e}}}.call(t,s,t,e),!(void 0!==r&&(e.exports=r))},524:function(e,t,s){var r;r=function(e,t,s){"use strict";s.exports.getSize=function(e){var t=document.createElement("div"),s="NOBODYEXPECTSTHESPANISHINQUISITION";t.appendChild(document.createTextNode(s)),t.style.position="absolute",t.style.visibility="hidden",e.appendChild(t);var r={width:t.offsetWidth/s.length,height:t.offsetHeight};return e.removeChild(t),r}}.call(t,s,t,e),!(void 0!==r&&(e.exports=r))},525:function(e,t,s){var r;r=function(e,t,r){var i=s(529);if(!i)return void console.warn("libs/term failed to initialize");var n;n=window.navigator&&window.navigator.userAgent?!!~window.navigator.userAgent.indexOf("Mac"):!1,i.brokenBold=!0,i.bindKeys=function(e){e.addEventListener("keydown",function(e){if(i.focus&&(!n||!e.metaKey)){var t=e.target||e.srcElement;if(t)return t===i.focus.element||t===i.focus.context||t===i.focus.document||t===i.focus.body||t===i._textarea||t===i.focus.parent?i.focus.keyDown(e):void 0}},!0),e.addEventListener("keypress",function(e){if(i.focus){var t=e.target||e.srcElement;if(t)return t===i.focus.element||t===i.focus.context||t===i.focus.document||t===i.focus.body||t===i._textarea||t===i.focus.parent?i.focus.keyPress(e):void 0}},!0),e.addEventListener("mousedown",function(e){if(i.focus){var t=e.target||e.srcElement;if(t){do if(t===i.focus.element)return;while(t=t.parentNode);i.focus.blur()}}})},i.prototype.handleExtraKeys=function(e){var t;return e.altKey&&e.ctrlKey?55===e.keyCode?t=String.fromCharCode(123):48===e.keyCode?t=String.fromCharCode(125):56===e.keyCode?t=String.fromCharCode(91):57===e.keyCode?t=String.fromCharCode(93):69===e.keyCode?t=String.fromCharCode(8364):81===e.keyCode?t=String.fromCharCode(64):226===e.keyCode?t=String.fromCharCode(124):187===e.keyCode?t=String.fromCharCode(126):219===e.keyCode&&(t=String.fromCharCode(92)):e.altKey&&e.shiftKey?"U+002F"===e.keyIdentifier&&(t=String.fromCharCode(92)):e.altKey&&(this.isMac&&76===e.keyCode?t=String.fromCharCode(64):this.isMac&&69===e.keyCode?t=String.fromCharCode(8364):this.isMac&&"U+0035"===e.keyIdentifier?t=String.fromCharCode(91):this.isMac&&"U+0036"===e.keyIdentifier?t=String.fromCharCode(93):this.isMac&&"U+0037"===e.keyIdentifier?t=String.fromCharCode(124):this.isMac&&"U+0038"===e.keyIdentifier?t=String.fromCharCode(123):this.isMac&&"U+0039"===e.keyIdentifier?t=String.fromCharCode(125):this.isMac&&78===e.keyCode&&(t=String.fromCharCode(126))),t},i.prototype.asText=function(){return this.lines.map(function(e){return e.map(function(e){return e[1]}).join("")}).join("")};var o=i.prototype.open;i.prototype.open=function(e){o.call(this,e),this.options.useFocus||(this.element.addEventListener("focus",function(){this.focus(),this.isMobile&&i._textarea.focus()}.bind(this)),this.element.addEventListener("mousedown",function(){this.focus()}.bind(this)),this.element.addEventListener("mousedown",function(e){var t=null!=e.button?+e.button:null!=e.which?e.which-1:null;self.isMSIE&&(t=1===t?0:4===t?1:t),2===t&&(this.element.contentEditable="true",setTimeout(function(){this.element.contentEditable="inherit"}.bind(this),1))}.bind(this),!0))},r.exports=i}.call(t,s,t,e),!(void 0!==r&&(e.exports=r))},526:function(e,t){!function(e){e.fn.insideOf=function(t){var s=this[0];return s.parentNode?s==t?!0:e(s.parentNode).insideOf(t):!1}}(jQuery)},527:function(e,t,s){var r;r=function(e,t,s){!function(){function e(){return!0}function s(e,t){this._options=t?t:{},void 0==this._options.includeLocation&&(this._options.includeLocation=!1),this.validateHandler(e),this._handler=e,this.reset()}function r(e){r.super_.call(this,e,{ignoreWhitespace:!0,verbose:!1,enforceEmptyTags:!1})}function i(e,t){this.reset(),this._options=t?t:{},void 0==this._options.ignoreWhitespace&&(this._options.ignoreWhitespace=!1),void 0==this._options.verbose&&(this._options.verbose=!0),void 0==this._options.enforceEmptyTags&&(this._options.enforceEmptyTags=!0),"function"==typeof e&&(this._callback=e)}function n(e,t){var s=function(){};s.prototype=t.prototype,e.super_=t,e.prototype=new s,e.prototype.constructor=e}if(!e()){if(this.Tautologistics){if(this.Tautologistics.NodeHtmlParser)return}else this.Tautologistics={};this.Tautologistics.NodeHtmlParser={},t=this.Tautologistics.NodeHtmlParser}var o={Text:"text",Directive:"directive",Comment:"comment",Script:"script",Style:"style",Tag:"tag"};s._reTrim=/(^\s+|\s+$)/g,s._reTrimComment=/(^\!--|--$)/g,s._reWhitespace=/\s/g,s._reTagName=/^\s*(\/?)\s*([^\s\/]+)/,s._reAttrib=/([^=<>\"\'\s]+)\s*=\s*"([^"]*)"|([^=<>\"\'\s]+)\s*=\s*'([^']*)'|([^=<>\"\'\s]+)\s*=\s*([^'"\s]+)|([^=<>\"\'\s\/]+)/g,s._reTags=/[\<\>]/g,s.prototype.parseComplete=function(e){this.reset(),this.parseChunk(e),this.done()},s.prototype.parseChunk=function(e){this._done&&this.handleError(new Error("Attempted to parse chunk after parsing already done")),this._buffer+=e,this.parseTags()},s.prototype.done=function(){if(!this._done){if(this._done=!0,this._buffer.length){var e=this._buffer;this._buffer="";var t={raw:e,data:this._parseState==o.Text?e:e.replace(s._reTrim,""),type:this._parseState};(this._parseState==o.Tag||this._parseState==o.Script||this._parseState==o.Style)&&(t.name=this.parseTagName(t.data)),this.parseAttribs(t),this._elements.push(t)}this.writeHandler(),this._handler.done()}},s.prototype.reset=function(){this._buffer="",this._done=!1,this._elements=[],this._elementsCurrent=0,this._current=0,this._next=0,this._location={row:0,col:0,charOffset:0,inBuffer:0},this._parseState=o.Text,this._prevTagSep="",this._tagStack=[],this._handler.reset()},s.prototype._options=null,s.prototype._handler=null,s.prototype._buffer=null,s.prototype._done=!1,s.prototype._elements=null,s.prototype._elementsCurrent=0,s.prototype._current=0,s.prototype._next=0,s.prototype._location=null,s.prototype._parseState=o.Text,s.prototype._prevTagSep="",s.prototype._tagStack=null,s.prototype.parseTagAttribs=function(e){for(var t=e.length,s=0;t>s;){var r=e[s++];(r.type==o.Tag||r.type==o.Script||r.type==o.style)&&this.parseAttribs(r)}return e},s.prototype.parseAttribs=function(e){if(e.type==o.Script||e.type==o.Style||e.type==o.Tag){var t=e.data.split(s._reWhitespace,1)[0],r=e.data.substring(t.length);if(!(r.length<1)){var i;for(s._reAttrib.lastIndex=0;i=s._reAttrib.exec(r);)void 0==e.attribs&&(e.attribs={}),"string"==typeof i[1]&&i[1].length?e.attribs[i[1]]=i[2]:"string"==typeof i[3]&&i[3].length?e.attribs[i[3].toString()]=i[4].toString():"string"==typeof i[5]&&i[5].length?e.attribs[i[5]]=i[6]:"string"==typeof i[7]&&i[7].length&&(e.attribs[i[7]]=i[7])}}},s.prototype.parseTagName=function(e){if(null==e||""==e)return"";var t=s._reTagName.exec(e);return t?(t[1]?"/":"")+t[2]:""},s.prototype.parseTags=function(){for(var e=this._buffer.length-1;s._reTags.test(this._buffer);){this._next=s._reTags.lastIndex-1;var t=this._buffer.charAt(this._next),r=this._buffer.substring(this._current,this._next),i={raw:r,data:this._parseState==o.Text?r:r.replace(s._reTrim,""),type:this._parseState},n=this.parseTagName(i.data);if(this._tagStack.length)if(this._tagStack[this._tagStack.length-1]==o.Script){if("/script"==n.toLowerCase())this._tagStack.pop();else if(0!=i.raw.indexOf("!--")&&(i.type=o.Text,this._elements.length&&this._elements[this._elements.length-1].type==o.Text)){var a=this._elements[this._elements.length-1];a.raw=a.data=a.raw+this._prevTagSep+i.raw,i.raw=i.data=""}}else if(this._tagStack[this._tagStack.length-1]==o.Style){if("/style"==n.toLowerCase())this._tagStack.pop();else if(0!=i.raw.indexOf("!--"))if(i.type=o.Text,this._elements.length&&this._elements[this._elements.length-1].type==o.Text){var a=this._elements[this._elements.length-1];""!=i.raw?(a.raw=a.data=a.raw+this._prevTagSep+i.raw,i.raw=i.data=""):a.raw=a.data=a.raw+this._prevTagSep}else""!=i.raw&&(i.raw=i.data=i.raw)}else if(this._tagStack[this._tagStack.length-1]==o.Comment){var l=i.raw.length;if("-"==i.raw.charAt(l-2)&&"-"==i.raw.charAt(l-1)&&">"==t)if(this._tagStack.pop(),this._elements.length&&this._elements[this._elements.length-1].type==o.Comment){var a=this._elements[this._elements.length-1];a.raw=a.data=(a.raw+i.raw).replace(s._reTrimComment,""),i.raw=i.data="",i.type=o.Text}else i.type=o.Comment;else if(i.type=o.Comment,this._elements.length&&this._elements[this._elements.length-1].type==o.Comment){var a=this._elements[this._elements.length-1];a.raw=a.data=a.raw+i.raw+t,i.raw=i.data="",i.type=o.Text}else i.raw=i.data=i.raw+t}if(i.type==o.Tag){i.name=n;var c=n.toLowerCase();if(0==i.raw.indexOf("!--")){i.type=o.Comment,delete i.name;var l=i.raw.length;"-"==i.raw.charAt(l-1)&&"-"==i.raw.charAt(l-2)&&">"==t?i.raw=i.data=i.raw.replace(s._reTrimComment,""):(i.raw+=t,this._tagStack.push(o.Comment))}else 0==i.raw.indexOf("!")||0==i.raw.indexOf("?")?i.type=o.Directive:"script"==c?(i.type=o.Script,"/"!=i.data.charAt(i.data.length-1)&&this._tagStack.push(o.Script)):"/script"==c?i.type=o.Script:"style"==c?(i.type=o.Style,"/"!=i.data.charAt(i.data.length-1)&&this._tagStack.push(o.Style)):"/style"==c&&(i.type=o.Style);i.name&&"/"==i.name.charAt(0)&&(i.data=i.name)}(""!=i.raw||i.type!=o.Text)&&(this._options.includeLocation&&!i.location&&(i.location=this.getLocation(i.type==o.Tag)),this.parseAttribs(i),this._elements.push(i),i.type!=o.Text&&i.type!=o.Comment&&i.type!=o.Directive&&"/"==i.data.charAt(i.data.length-1)&&this._elements.push({raw:"/"+i.name,data:"/"+i.name,name:"/"+i.name,type:i.type})),this._parseState="<"==t?o.Tag:o.Text,this._current=this._next+1,this._prevTagSep=t}this._options.includeLocation&&(this.getLocation(),this._location.row+=this._location.inBuffer,this._location.inBuffer=0,this._location.charOffset=0),this._buffer=this._current<=e?this._buffer.substring(this._current):"",this._current=0,this.writeHandler()},s.prototype.getLocation=function(e){for(var t,s=this._location,r=this._current-(e?1:0),i=e&&0==s.charOffset&&0==this._current;s.charOffset<r;s.charOffset++)t=this._buffer.charAt(s.charOffset),"\n"==t?(s.inBuffer++,s.col=0):"\r"!=t&&s.col++;return{line:s.row+s.inBuffer+1,col:s.col+(i?0:1)}},s.prototype.validateHandler=function(e){if("object"!=typeof e)throw new Error("Handler is not an object");if("function"!=typeof e.reset)throw new Error("Handler method 'reset' is invalid");if("function"!=typeof e.done)throw new Error("Handler method 'done' is invalid");if("function"!=typeof e.writeTag)throw new Error("Handler method 'writeTag' is invalid");if("function"!=typeof e.writeText)throw new Error("Handler method 'writeText' is invalid");if("function"!=typeof e.writeComment)throw new Error("Handler method 'writeComment' is invalid");if("function"!=typeof e.writeDirective)throw new Error("Handler method 'writeDirective' is invalid")},s.prototype.writeHandler=function(e){if(e=!!e,!this._tagStack.length||e)for(;this._elements.length;){var t=this._elements.shift();switch(t.type){case o.Comment:this._handler.writeComment(t);break;case o.Directive:this._handler.writeDirective(t);break;case o.Text:this._handler.writeText(t);break;default:this._handler.writeTag(t)}}},s.prototype.handleError=function(e){if("function"!=typeof this._handler.error)throw e;this._handler.error(e)},n(r,i),r.prototype.done=function(){var e,t={},s=a.getElementsByTagName(function(e){return"rss"==e||"feed"==e},this.dom,!1);if(s.length&&(e=s[0]),e){if("rss"==e.name){t.type="rss",e=e.children[0],t.id="";try{t.title=a.getElementsByTagName("title",e.children,!1)[0].children[0].data}catch(i){}try{t.link=a.getElementsByTagName("link",e.children,!1)[0].children[0].data}catch(i){}try{t.description=a.getElementsByTagName("description",e.children,!1)[0].children[0].data}catch(i){}try{t.updated=new Date(a.getElementsByTagName("lastBuildDate",e.children,!1)[0].children[0].data)}catch(i){}try{t.author=a.getElementsByTagName("managingEditor",e.children,!1)[0].children[0].data}catch(i){}t.items=[],a.getElementsByTagName("item",e.children).forEach(function(e,s,r){var i={};try{i.id=a.getElementsByTagName("guid",e.children,!1)[0].children[0].data}catch(n){}try{i.title=a.getElementsByTagName("title",e.children,!1)[0].children[0].data}catch(n){}try{i.link=a.getElementsByTagName("link",e.children,!1)[0].children[0].data}catch(n){}try{i.description=a.getElementsByTagName("description",e.children,!1)[0].children[0].data}catch(n){}try{i.pubDate=new Date(a.getElementsByTagName("pubDate",e.children,!1)[0].children[0].data)}catch(n){}t.items.push(i)})}else{t.type="atom";try{t.id=a.getElementsByTagName("id",e.children,!1)[0].children[0].data}catch(i){}try{t.title=a.getElementsByTagName("title",e.children,!1)[0].children[0].data}catch(i){}try{t.link=a.getElementsByTagName("link",e.children,!1)[0].attribs.href}catch(i){}try{t.description=a.getElementsByTagName("subtitle",e.children,!1)[0].children[0].data}catch(i){}try{t.updated=new Date(a.getElementsByTagName("updated",e.children,!1)[0].children[0].data)}catch(i){}try{t.author=a.getElementsByTagName("email",e.children,!0)[0].children[0].data}catch(i){}t.items=[],a.getElementsByTagName("entry",e.children).forEach(function(e,s,r){var i={};try{i.id=a.getElementsByTagName("id",e.children,!1)[0].children[0].data}catch(n){}try{i.title=a.getElementsByTagName("title",e.children,!1)[0].children[0].data}catch(n){}try{i.link=a.getElementsByTagName("link",e.children,!1)[0].attribs.href}catch(n){}try{i.description=a.getElementsByTagName("summary",e.children,!1)[0].children[0].data}catch(n){}try{i.pubDate=new Date(a.getElementsByTagName("updated",e.children,!1)[0].children[0].data)}catch(n){}t.items.push(i)})}this.dom=t}r.super_.prototype.done.call(this)},i._emptyTags={area:1,base:1,basefont:1,br:1,col:1,frame:1,hr:1,img:1,input:1,isindex:1,link:1,meta:1,param:1,embed:1},i.reWhitespace=/^\s*$/,i.prototype.dom=null,i.prototype.reset=function(){this.dom=[],this._done=!1,this._tagStack=[],this._tagStack.last=function(){return this.length?this[this.length-1]:null}},i.prototype.done=function(){this._done=!0,this.handleCallback(null)},i.prototype.writeTag=function(e){this.handleElement(e)},i.prototype.writeText=function(e){this._options.ignoreWhitespace&&i.reWhitespace.test(e.data)||this.handleElement(e)},i.prototype.writeComment=function(e){this.handleElement(e)},i.prototype.writeDirective=function(e){this.handleElement(e)},i.prototype.error=function(e){this.handleCallback(e)},i.prototype._options=null,i.prototype._callback=null,i.prototype._done=!1,i.prototype._tagStack=null,i.prototype.handleCallback=function(e){if("function"==typeof this._callback)this._callback(e,this.dom);else if(e)throw e},i.prototype.isEmptyTag=function(e){var t=e.name.toLowerCase();return"/"==t.charAt(0)&&(t=t.substring(1)),this._options.enforceEmptyTags&&!!i._emptyTags[t]},i.prototype.handleElement=function(e){if(this._done&&this.handleCallback(new Error("Writing to the handler after done() called is not allowed without a reset()")),this._options.verbose||(delete e.raw,("tag"==e.type||"script"==e.type||"style"==e.type)&&delete e.data),this._tagStack.last())if(e.type!=o.Text&&e.type!=o.Comment&&e.type!=o.Directive)if("/"==e.name.charAt(0)){var t=e.name.substring(1);if(!this.isEmptyTag(e)){for(var s=this._tagStack.length-1;s>-1&&this._tagStack[s--].name!=t;);if(s>-1||this._tagStack[0].name==t)for(;s<this._tagStack.length-1;)this._tagStack.pop()}}else this._tagStack.last().children||(this._tagStack.last().children=[]),this._tagStack.last().children.push(e),this.isEmptyTag(e)||this._tagStack.push(e);else this._tagStack.last().children||(this._tagStack.last().children=[]),this._tagStack.last().children.push(e);else e.type!=o.Text&&e.type!=o.Comment&&e.type!=o.Directive?"/"!=e.name.charAt(0)&&(this.dom.push(e),this.isEmptyTag(e)||this._tagStack.push(e)):this.dom.push(e)};var a={testElement:function(e,t){if(!t)return!1;for(var s in e)if("tag_name"==s){if("tag"!=t.type&&"script"!=t.type&&"style"!=t.type)return!1;if(!e.tag_name(t.name))return!1}else if("tag_type"==s){if(!e.tag_type(t.type))return!1}else if("tag_contains"==s){if("text"!=t.type&&"comment"!=t.type&&"directive"!=t.type)return!1;if(!e.tag_contains(t.data))return!1}else if(!t.attribs||!e[s](t.attribs[s]))return!1;return!0},getElements:function(e,t,s,r){function i(e){return function(t){return t==e}}if(s=void 0===s||null===s||!!s,r=isNaN(parseInt(r))?-1:parseInt(r),!t)return[];var n,o=[];for(var l in e)"function"!=typeof e[l]&&(e[l]=i(e[l]));if(a.testElement(e,t)&&o.push(t),r>=0&&o.length>=r)return o;if(s&&t.children)n=t.children;else{if(!(t instanceof Array))return o;n=t}for(var c=0;c<n.length&&(o=o.concat(a.getElements(e,n[c],s,r)),!(r>=0&&o.length>=r));c++);return o},getElementById:function(e,t,s){var r=a.getElements({id:e},t,s,1);return r.length?r[0]:null},getElementsByTagName:function(e,t,s,r){return a.getElements({tag_name:e},t,s,r)},getElementsByTagType:function(e,t,s,r){return a.getElements({tag_type:e},t,s,r)}};t.Parser=s,t.DefaultHandler=i,t.RssHandler=r,t.ElementType=o,t.DomUtils=a}()}.call(t,s,t,e),!(void 0!==r&&(e.exports=r))},528:function(e,t,s){(function(t){(function(){function t(e){this.tokens=[],this.tokens.links={},this.options=e||u.defaults,this.rules=h.normal,this.options.gfm&&(this.options.tables?this.rules=h.tables:this.rules=h.gfm)}function s(e,t){if(this.options=t||u.defaults,this.links=e,this.rules=d.normal,this.renderer=this.options.renderer||new r,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.options.breaks?this.rules=d.breaks:this.rules=d.gfm:this.options.pedantic&&(this.rules=d.pedantic)}function r(e){this.options=e||{}}function i(e){this.tokens=[],this.token=null,this.options=e||u.defaults,this.options.renderer=this.options.renderer||new r,this.renderer=this.options.renderer,this.renderer.options=this.options}function n(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function o(e){return e.replace(/&([#\w]+);/g,function(e,t){return t=t.toLowerCase(),"colon"===t?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})}function a(e,t){return e=e.source,t=t||"",function s(r,i){return r?(i=i.source||i,i=i.replace(/(^|[^\[])\^/g,"$1"),e=e.replace(r,i),s):new RegExp(e,t)}}function l(){}function c(e){for(var t,s,r=1;r<arguments.length;r++){t=arguments[r];for(s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e}function u(e,s,r){if(r||"function"==typeof s){r||(r=s,s=null),s=c({},u.defaults,s||{});var o,a,l=s.highlight,h=0;try{o=t.lex(e,s)}catch(d){return r(d)}a=o.length;var f=function(e){if(e)return s.highlight=l,r(e);var t;try{t=i.parse(o,s)}catch(n){e=n}return s.highlight=l,e?r(e):r(null,t)};if(!l||l.length<3)return f();if(delete s.highlight,!a)return f();for(;h<o.length;h++)!function(e){return"code"!==e.type?--a||f():l(e.text,e.lang,function(t,s){return t?f(t):null==s||s===e.text?--a||f():(e.text=s,e.escaped=!0,void(--a||f()))})}(o[h])}else try{return s&&(s=c({},u.defaults,s)),i.parse(t.lex(e,s),s)}catch(d){if(d.message+="\nPlease report this to https://github.com/chjj/marked.",(s||u.defaults).silent)return"<p>An error occured:</p><pre>"+n(d.message+"",!0)+"</pre>";throw d}}var h={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:l,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:l,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:l,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};h.bullet=/(?:[*+-]|\d+\.)/,h.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,h.item=a(h.item,"gm")(/bull/g,h.bullet)(),h.list=a(h.list)(/bull/g,h.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+h.def.source+")")(),h.blockquote=a(h.blockquote)("def",h.def)(),h._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",h.html=a(h.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,h._tag)(),h.paragraph=a(h.paragraph)("hr",h.hr)("heading",h.heading)("lheading",h.lheading)("blockquote",h.blockquote)("tag","<"+h._tag)("def",h.def)(),h.normal=c({},h),h.gfm=c({},h.normal,{fences:/^ *(`{3,}|~{3,}) *(\S+)? *\n([\s\S]+?)\s*\1 *(?:\n+|$)/,paragraph:/^/}),h.gfm.paragraph=a(h.paragraph)("(?!","(?!"+h.gfm.fences.source.replace("\\1","\\2")+"|"+h.list.source.replace("\\1","\\3")+"|")(),h.tables=c({},h.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),t.rules=h,t.lex=function(e,s){var r=new t(s);return r.lex(e)},t.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},t.prototype.token=function(e,t,s){for(var r,i,n,o,a,l,c,u,d,e=e.replace(/^ +$/gm,"");e;)if((n=this.rules.newline.exec(e))&&(e=e.substring(n[0].length),n[0].length>1&&this.tokens.push({type:"space"})),n=this.rules.code.exec(e))e=e.substring(n[0].length),n=n[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?n:n.replace(/\n+$/,"")});else if(n=this.rules.fences.exec(e))e=e.substring(n[0].length),this.tokens.push({type:"code",lang:n[2],text:n[3]});else if(n=this.rules.heading.exec(e))e=e.substring(n[0].length),this.tokens.push({type:"heading",depth:n[1].length,text:n[2]});else if(t&&(n=this.rules.nptable.exec(e))){for(e=e.substring(n[0].length),l={type:"table",header:n[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:n[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:n[3].replace(/\n$/,"").split("\n")},u=0;u<l.align.length;u++)/^ *-+: *$/.test(l.align[u])?l.align[u]="right":/^ *:-+: *$/.test(l.align[u])?l.align[u]="center":/^ *:-+ *$/.test(l.align[u])?l.align[u]="left":l.align[u]=null;for(u=0;u<l.cells.length;u++)l.cells[u]=l.cells[u].split(/ *\| */);this.tokens.push(l)}else if(n=this.rules.lheading.exec(e))e=e.substring(n[0].length),
this.tokens.push({type:"heading",depth:"="===n[2]?1:2,text:n[1]});else if(n=this.rules.hr.exec(e))e=e.substring(n[0].length),this.tokens.push({type:"hr"});else if(n=this.rules.blockquote.exec(e))e=e.substring(n[0].length),this.tokens.push({type:"blockquote_start"}),n=n[0].replace(/^ *> ?/gm,""),this.token(n,t,!0),this.tokens.push({type:"blockquote_end"});else if(n=this.rules.list.exec(e)){for(e=e.substring(n[0].length),o=n[2],this.tokens.push({type:"list_start",ordered:o.length>1}),n=n[0].match(this.rules.item),r=!1,d=n.length,u=0;d>u;u++)l=n[u],c=l.length,l=l.replace(/^ *([*+-]|\d+\.) +/,""),~l.indexOf("\n ")&&(c-=l.length,l=this.options.pedantic?l.replace(/^ {1,4}/gm,""):l.replace(new RegExp("^ {1,"+c+"}","gm"),"")),this.options.smartLists&&u!==d-1&&(a=h.bullet.exec(n[u+1])[0],o===a||o.length>1&&a.length>1||(e=n.slice(u+1).join("\n")+e,u=d-1)),i=r||/\n\n(?!\s*$)/.test(l),u!==d-1&&(r="\n"===l.charAt(l.length-1),i||(i=r)),this.tokens.push({type:i?"loose_item_start":"list_item_start"}),this.token(l,!1,s),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(n=this.rules.html.exec(e))e=e.substring(n[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:"pre"===n[1]||"script"===n[1]||"style"===n[1],text:n[0]});else if(!s&&t&&(n=this.rules.def.exec(e)))e=e.substring(n[0].length),this.tokens.links[n[1].toLowerCase()]={href:n[2],title:n[3]};else if(t&&(n=this.rules.table.exec(e))){for(e=e.substring(n[0].length),l={type:"table",header:n[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:n[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:n[3].replace(/(?: *\| *)?\n$/,"").split("\n")},u=0;u<l.align.length;u++)/^ *-+: *$/.test(l.align[u])?l.align[u]="right":/^ *:-+: *$/.test(l.align[u])?l.align[u]="center":/^ *:-+ *$/.test(l.align[u])?l.align[u]="left":l.align[u]=null;for(u=0;u<l.cells.length;u++)l.cells[u]=l.cells[u].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(l)}else if(t&&(n=this.rules.paragraph.exec(e)))e=e.substring(n[0].length),this.tokens.push({type:"paragraph",text:"\n"===n[1].charAt(n[1].length-1)?n[1].slice(0,-1):n[1]});else if(n=this.rules.text.exec(e))e=e.substring(n[0].length),this.tokens.push({type:"text",text:n[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var d={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:l,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:__|[\s\S])+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:l,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};d._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,d._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,d.link=a(d.link)("inside",d._inside)("href",d._href)(),d.reflink=a(d.reflink)("inside",d._inside)(),d.normal=c({},d),d.pedantic=c({},d.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),d.gfm=c({},d.normal,{escape:a(d.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:a(d.text)("]|","~]|")("|","|https?://|")()}),d.breaks=c({},d.gfm,{br:a(d.br)("{2,}","*")(),text:a(d.gfm.text)("{2,}","*")()}),s.rules=d,s.output=function(e,t,r){var i=new s(t,r);return i.output(e)},s.prototype.output=function(e){for(var t,s,r,i,o="";e;)if(i=this.rules.escape.exec(e))e=e.substring(i[0].length),o+=i[1];else if(i=this.rules.autolink.exec(e))e=e.substring(i[0].length),"@"===i[2]?(s=":"===i[1].charAt(6)?this.mangle(i[1].substring(7)):this.mangle(i[1]),r=this.mangle("mailto:")+s):(s=n(i[1]),r=s),o+=this.renderer.link(r,null,s);else if(this.inLink||!(i=this.rules.url.exec(e))){if(i=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(i[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(i[0])&&(this.inLink=!1),e=e.substring(i[0].length),o+=this.options.sanitize?n(i[0]):i[0];else if(i=this.rules.link.exec(e))e=e.substring(i[0].length),this.inLink=!0,o+=this.outputLink(i,{href:i[2],title:i[3]}),this.inLink=!1;else if((i=this.rules.reflink.exec(e))||(i=this.rules.nolink.exec(e))){if(e=e.substring(i[0].length),t=(i[2]||i[1]).replace(/\s+/g," "),t=this.links[t.toLowerCase()],!t||!t.href){o+=i[0].charAt(0),e=i[0].substring(1)+e;continue}this.inLink=!0,o+=this.outputLink(i,t),this.inLink=!1}else if(i=this.rules.strong.exec(e))e=e.substring(i[0].length),o+=this.renderer.strong(this.output(i[2]||i[1]));else if(i=this.rules.em.exec(e))e=e.substring(i[0].length),o+=this.renderer.em(this.output(i[2]||i[1]));else if(i=this.rules.code.exec(e))e=e.substring(i[0].length),o+=this.renderer.codespan(n(i[2],!0));else if(i=this.rules.br.exec(e))e=e.substring(i[0].length),o+=this.renderer.br();else if(i=this.rules.del.exec(e))e=e.substring(i[0].length),o+=this.renderer.del(this.output(i[1]));else if(i=this.rules.text.exec(e))e=e.substring(i[0].length),o+=n(this.smartypants(i[0]));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else e=e.substring(i[0].length),s=n(i[1]),r=s,o+=this.renderer.link(r,null,s);return o},s.prototype.outputLink=function(e,t){var s=n(t.href),r=t.title?n(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(s,r,this.output(e[1])):this.renderer.image(s,r,n(e[1]))},s.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/--/g,"—").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):e},s.prototype.mangle=function(e){for(var t,s="",r=e.length,i=0;r>i;i++)t=e.charCodeAt(i),Math.random()>.5&&(t="x"+t.toString(16)),s+="&#"+t+";";return s},r.prototype.code=function(e,t,s){if(this.options.highlight){var r=this.options.highlight(e,t);null!=r&&r!==e&&(s=!0,e=r)}return t?'<pre><code class="'+this.options.langPrefix+n(t,!0)+'">'+(s?e:n(e,!0))+"\n</code></pre>\n":"<pre><code>"+(s?e:n(e,!0))+"\n</code></pre>"},r.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},r.prototype.html=function(e){return e},r.prototype.heading=function(e,t,s){return"<h"+t+' id="'+this.options.headerPrefix+s.toLowerCase().replace(/[^\w]+/g,"-")+'">'+e+"</h"+t+">\n"},r.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},r.prototype.list=function(e,t){var s=t?"ol":"ul";return"<"+s+">\n"+e+"</"+s+">\n"},r.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},r.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},r.prototype.table=function(e,t){return"<table>\n<thead>\n"+e+"</thead>\n<tbody>\n"+t+"</tbody>\n</table>\n"},r.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},r.prototype.tablecell=function(e,t){var s=t.header?"th":"td",r=t.align?"<"+s+' style="text-align:'+t.align+'">':"<"+s+">";return r+e+"</"+s+">\n"},r.prototype.strong=function(e){return"<strong>"+e+"</strong>"},r.prototype.em=function(e){return"<em>"+e+"</em>"},r.prototype.codespan=function(e){return"<code>"+e+"</code>"},r.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},r.prototype.del=function(e){return"<del>"+e+"</del>"},r.prototype.link=function(e,t,s){if(this.options.sanitize){try{var r=decodeURIComponent(o(e)).replace(/[^\w:]/g,"").toLowerCase()}catch(i){return""}if(0===r.indexOf("javascript:"))return""}var n='<a href="'+e+'"';return t&&(n+=' title="'+t+'"'),n+=">"+s+"</a>"},r.prototype.image=function(e,t,s){var r='<img src="'+e+'" alt="'+s+'"';return t&&(r+=' title="'+t+'"'),r+=this.options.xhtml?"/>":">"},i.parse=function(e,t,s){var r=new i(t,s);return r.parse(e)},i.prototype.parse=function(e){this.inline=new s(e.links,this.options,this.renderer),this.tokens=e.reverse();for(var t="";this.next();)t+=this.tok();return t},i.prototype.next=function(){return this.token=this.tokens.pop()},i.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},i.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},i.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var e,t,s,r,i,n="",o="";for(s="",e=0;e<this.token.header.length;e++)r={header:!0,align:this.token.align[e]},s+=this.renderer.tablecell(this.inline.output(this.token.header[e]),{header:!0,align:this.token.align[e]});for(n+=this.renderer.tablerow(s),e=0;e<this.token.cells.length;e++){for(t=this.token.cells[e],s="",i=0;i<t.length;i++)s+=this.renderer.tablecell(this.inline.output(t[i]),{header:!1,align:this.token.align[i]});o+=this.renderer.tablerow(s)}return this.renderer.table(n,o);case"blockquote_start":for(var o="";"blockquote_end"!==this.next().type;)o+=this.tok();return this.renderer.blockquote(o);case"list_start":for(var o="",a=this.token.ordered;"list_end"!==this.next().type;)o+=this.tok();return this.renderer.list(o,a);case"list_item_start":for(var o="";"list_item_end"!==this.next().type;)o+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(o);case"loose_item_start":for(var o="";"list_item_end"!==this.next().type;)o+=this.tok();return this.renderer.listitem(o);case"html":var l=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(l);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}},l.exec=l,u.options=u.setOptions=function(e){return c(u.defaults,e),u},u.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new r,xhtml:!1},u.Parser=i,u.parser=i.parse,u.Renderer=r,u.Lexer=t,u.lexer=t.lex,u.InlineLexer=s,u.inlineLexer=s.output,u.parse=u,e.exports=u}).call(function(){return this||("undefined"!=typeof window?window:t)}())}).call(t,function(){return this}())},529:function(e,t,s){(function(t){(function(){"use strict";function t(){this._events=this._events||{}}function s(e){var r=this;if(!(this instanceof s))return new s(arguments[0],arguments[1],arguments[2]);t.call(this),"number"==typeof e&&(e={cols:arguments[0],rows:arguments[1],handler:arguments[2]}),e=e||{},h(d(s.defaults),function(t){null==e[t]&&(e[t]=s.options[t],s[t]!==s.defaults[t]&&(e[t]=s[t])),r[t]=e[t]}),8===e.colors.length?e.colors=e.colors.concat(s._colors.slice(8)):16===e.colors.length?e.colors=e.colors.concat(s._colors.slice(16)):10===e.colors.length?e.colors=e.colors.slice(0,-2).concat(s._colors.slice(8,-2),e.colors.slice(-2)):18===e.colors.length&&(e.colors=e.colors.slice(0,-2).concat(s._colors.slice(16,-2),e.colors.slice(-2))),this.colors=e.colors,this.options=e,this.parent=e.body||e.parent||(f?f.getElementsByTagName("body")[0]:null),this.cols=e.cols||e.geometry[0],this.rows=e.rows||e.geometry[1],e.handler&&this.on("data",e.handler),this.ybase=0,this.ydisp=0,this.x=0,this.y=0,this.cursorState=0,this.cursorHidden=!1,this.convertEol,this.state=0,this.queue="",this.scrollTop=0,this.scrollBottom=this.rows-1,this.applicationKeypad=!1,this.applicationCursor=!1,this.originMode=!1,this.insertMode=!1,this.wraparoundMode=!1,this.normal=null,this.prefixMode=!1,this.selectMode=!1,this.visualMode=!1,this.searchMode=!1,this.searchDown,this.entry="",this.entryPrefix="Search: ",this._real,this._selected,this._textarea,this.charset=null,this.gcharset=null,this.glevel=0,this.charsets=[null],this.decLocator,this.x10Mouse,this.vt200Mouse,this.vt300Mouse,this.normalMouse,this.mouseEvents,this.sendFocus,this.utfMouse,this.sgrMouse,this.urxvtMouse,this.element,this.children,this.refreshStart,this.refreshEnd,this.savedX,this.savedY,this.savedCols,this.readable=!0,this.writable=!0,this.defAttr=131840,this.curAttr=this.defAttr,this.params=[],this.currentParam=0,this.prefix="",this.postfix="",this.lines=[];for(var i=this.rows;i--;)this.lines.push(this.blankLine());this.tabs,this.setupStops()}function r(e,t,s,r){e.addEventListener(t,s,r||!1)}function i(e,t,s,r){e.removeEventListener(t,s,r||!1)}function n(e){return e.preventDefault&&e.preventDefault(),e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,!1}function o(e,t){function s(){this.constructor=e}s.prototype=t.prototype,e.prototype=new s}function a(e){var t=e.getElementsByTagName("body")[0],s=e.createElement("span");s.innerHTML="hello world",t.appendChild(s);var r=s.scrollWidth;s.style.fontWeight="bold";var i=s.scrollWidth;return t.removeChild(s),r!==i}function l(e,t){for(var s=e.length;s--;)if(e[s]===t)return s;return-1}function c(e){return"＀">=e?!1:e>="！"&&"ﾾ">=e||e>="ￂ"&&"ￇ">=e||e>="ￊ"&&"ￏ">=e||e>="ￒ"&&"ￗ">=e||e>="ￚ"&&"ￜ">=e||e>="￠"&&"￦">=e||e>="￨"&&"￮">=e}function u(e,t,r){var i=e<<16|t<<8|r;if(null!=u._cache[i])return u._cache[i];for(var n,o,a,l,c,h=1/0,d=-1,f=0;f<s.vcolors.length;f++){if(n=s.vcolors[f],o=n[0],a=n[1],l=n[2],c=u.distance(e,t,r,o,a,l),0===c){d=f;break}h>c&&(h=c,d=f)}return u._cache[i]=d}function h(e,t,s){if(e.forEach)return e.forEach(t,s);for(var r=0;r<e.length;r++)t.call(s,e[r],r,e)}function d(e){if(Object.keys)return Object.keys(e);var t,s=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&s.push(t);return s}var f=this.document;t.prototype.addListener=function(e,t){this._events[e]=this._events[e]||[],this._events[e].push(t)},t.prototype.on=t.prototype.addListener,t.prototype.removeListener=function(e,t){if(this._events[e])for(var s=this._events[e],r=s.length;r--;)if(s[r]===t||s[r].listener===t)return void s.splice(r,1)},t.prototype.off=t.prototype.removeListener,t.prototype.removeAllListeners=function(e){this._events[e]&&delete this._events[e]},t.prototype.once=function(e,t){function s(){var r=Array.prototype.slice.call(arguments);return this.removeListener(e,s),t.apply(this,r)}return s.listener=t,this.on(e,s)},t.prototype.emit=function(e){if(this._events[e])for(var t=Array.prototype.slice.call(arguments,1),s=this._events[e],r=s.length,i=0;r>i;i++)s[i].apply(this,t)},t.prototype.listeners=function(e){return this._events[e]=this._events[e]||[]};var p=0,m=1,g=2,v=3,y=4,_=5,b=6;o(s,t),s.prototype.eraseAttr=function(){return-512&this.defAttr|511&this.curAttr},s.tangoColors=["#2e3436","#cc0000","#4e9a06","#c4a000","#3465a4","#75507b","#06989a","#d3d7cf","#555753","#ef2929","#8ae234","#fce94f","#729fcf","#ad7fa8","#34e2e2","#eeeeec"],s.xtermColors=["#000000","#cd0000","#00cd00","#cdcd00","#0000ee","#cd00cd","#00cdcd","#e5e5e5","#7f7f7f","#ff0000","#00ff00","#ffff00","#5c5cff","#ff00ff","#00ffff","#ffffff"],s.colors=function(){function e(e,s,r){i.push("#"+t(e)+t(s)+t(r))}function t(e){return e=e.toString(16),e.length<2?"0"+e:e}var r,i=s.tangoColors.slice(),n=[0,95,135,175,215,255];for(r=0;216>r;r++)e(n[r/36%6|0],n[r/6%6|0],n[r%6]);for(r=0;24>r;r++)n=8+10*r,e(n,n,n);return i}(),s.colors[256]="#000000",s.colors[257]="#f0f0f0",s._colors=s.colors.slice(),s.vcolors=function(){for(var e,t=[],r=s.colors,i=0;256>i;i++)e=parseInt(r[i].substring(1),16),t.push([e>>16&255,e>>8&255,255&e]);return t}(),s.defaults={colors:s.colors,convertEol:!1,termName:"xterm",geometry:[80,24],cursorBlink:!0,visualBell:!1,popOnBell:!1,scrollback:1e3,screenKeys:!1,debug:!1,useStyle:!1},s.options={},h(d(s.defaults),function(e){s[e]=s.defaults[e],s.options[e]=s.defaults[e]}),s.focus=null,s.prototype.focus=function(){s.focus!==this&&(s.focus&&s.focus.blur(),this.sendFocus&&this.send("[I"),this.showCursor(),s.focus=this)},s.prototype.blur=function(){s.focus===this&&(this.cursorState=0,this.refresh(this.y,this.y),this.sendFocus&&this.send("[O"),s.focus=null)},s.prototype.initGlobal=function(){var e=this.document;s._boundDocs=s._boundDocs||[],~l(s._boundDocs,e)||(s._boundDocs.push(e),s.bindPaste(e),s.bindKeys(e),s.bindCopy(e),this.isMobile&&this.fixMobile(e),this.useStyle&&s.insertStyle(e,this.colors[256],this.colors[257]))},s.bindPaste=function(e){var t=e.defaultView;r(t,"paste",function(e){var t=s.focus;if(t)return e.clipboardData?t.send(e.clipboardData.getData("text/plain")):t.context.clipboardData&&t.send(t.context.clipboardData.getData("Text")),t.element.contentEditable="inherit",n(e)})},s.bindKeys=function(e){r(e,"keydown",function(e){if(s.focus){var t=e.target||e.srcElement;if(t)return t===s.focus.element||t===s.focus.context||t===s.focus.document||t===s.focus.body||t===s._textarea||t===s.focus.parent?s.focus.keyDown(e):void 0}},!0),r(e,"keypress",function(e){if(s.focus){var t=e.target||e.srcElement;if(t)return t===s.focus.element||t===s.focus.context||t===s.focus.document||t===s.focus.body||t===s._textarea||t===s.focus.parent?s.focus.keyPress(e):void 0}},!0),r(e,"mousedown",function(e){if(s.focus){var t=e.target||e.srcElement;if(t){do if(t===s.focus.element)return;while(t=t.parentNode);s.focus.blur()}}})},s.bindCopy=function(e){var t=e.defaultView;r(t,"copy",function(e){var t=s.focus;if(t&&t._selected){var r=t.getCopyTextarea(),i=t.grabText(t._selected.x1,t._selected.x2,t._selected.y1,t._selected.y2);t.emit("copy",i),r.focus(),r.textContent=i,r.value=i,r.setSelectionRange(0,i.length),w(function(){t.element.focus(),t.focus()},1)}})},s.prototype.fixMobile=function(e){var t=this,i=e.createElement("textarea");i.style.position="absolute",i.style.left="-32000px",i.style.top="-32000px",i.style.width="0px",i.style.height="0px",i.style.opacity="0",i.style.backgroundColor="transparent",i.style.borderStyle="none",i.style.outlineStyle="none",i.autocapitalize="none",i.autocorrect="off",e.getElementsByTagName("body")[0].appendChild(i),s._textarea=i,w(function(){i.focus()},1e3),this.isAndroid&&r(i,"change",function(){var e=i.textContent||i.value;i.value="",i.textContent="",t.send(e+"\r")})},s.insertStyle=function(e,t,s){var r=e.getElementById("term-style");if(!r){var i=e.getElementsByTagName("head")[0];if(i){var r=e.createElement("style");r.id="term-style",r.innerHTML=".terminal {\n  float: left;\n  border: "+t+' solid 5px;\n  font-family: "DejaVu Sans Mono", "Liberation Mono", monospace;\n  font-size: 11px;\n  color: '+s+";\n  background: "+t+";\n}\n\n.terminal-cursor {\n  color: "+t+";\n  background: "+s+";\n}\n",i.insertBefore(r,i.firstChild)}}},s.prototype.open=function(e){var t,i=this,n=0;if(this.parent=e||this.parent,!this.parent)throw new Error("Terminal requires a parent element.");for(this.context=this.parent.ownerDocument.defaultView,this.document=this.parent.ownerDocument,this.body=this.document.getElementsByTagName("body")[0],this.context.navigator&&this.context.navigator.userAgent&&(this.isMac=!!~this.context.navigator.userAgent.indexOf("Mac"),this.isIpad=!!~this.context.navigator.userAgent.indexOf("iPad"),this.isIphone=!!~this.context.navigator.userAgent.indexOf("iPhone"),this.isAndroid=!!~this.context.navigator.userAgent.indexOf("Android"),this.isMobile=this.isIpad||this.isIphone||this.isAndroid,this.isMSIE=!!~this.context.navigator.userAgent.indexOf("MSIE")),this.element=this.document.createElement("div"),this.element.className="terminal",this.element.style.outline="none",this.element.setAttribute("tabindex",0),this.element.setAttribute("spellcheck","false"),this.element.style.backgroundColor=this.colors[256],this.element.style.color=this.colors[257],this.children=[];n<this.rows;n++)t=this.document.createElement("div"),this.element.appendChild(t),this.children.push(t);this.parent.appendChild(this.element),this.refresh(0,this.rows-1),"useEvents"in this.options&&!this.options.useEvents||this.initGlobal(),"useFocus"in this.options&&!this.options.useFocus||(this.focus(),this.startBlink(),r(this.element,"focus",function(){i.focus(),i.isMobile&&s._textarea.focus()}),r(this.element,"mousedown",function(){i.focus()}),r(this.element,"mousedown",function(e){var t=null!=e.button?+e.button:null!=e.which?e.which-1:null;i.isMSIE&&(t=1===t?0:4===t?1:t),2===t&&(i.element.contentEditable="true",w(function(){i.element.contentEditable="inherit"},1))},!0)),"useMouse"in this.options&&!this.options.useMouse||this.bindMouse(),"useFocus"in this.options&&!this.options.useFocus||w(function(){i.element.focus()},100),null==s.brokenBold&&(s.brokenBold=a(this.document))},s.prototype.bindMouse=function(){function e(e){var t,s;if(t=a(e),s=l(e))switch(o(t,s),e.type){case"mousedown":h=t;break;case"mouseup":h=32;break;case d:}}function t(e){var t,s=h;t=l(e),t&&(s+=32,o(s,t))}function s(e,t){if(u.utfMouse){if(2047===t)return e.push(0);127>t?e.push(t):(t>2047&&(t=2047),e.push(192|t>>6),e.push(128|63&t))}else{if(255===t)return e.push(0);t>127&&(t=127),e.push(t)}}function o(e,t){if(u.vt300Mouse){e&=3,t.x-=32,t.y-=32;var r="[24";if(0===e)r+="1";else if(1===e)r+="3";else if(2===e)r+="5";else{if(3===e)return;r+="0"}return r+="~["+t.x+","+t.y+"]\r",void u.send(r)}if(u.decLocator)return e&=3,t.x-=32,t.y-=32,0===e?e=2:1===e?e=4:2===e?e=6:3===e&&(e=3),void u.send("["+e+";"+(3===e?4:0)+";"+t.y+";"+t.x+";"+(t.page||0)+"&w");if(u.urxvtMouse)return t.x-=32,t.y-=32,t.x++,t.y++,void u.send("["+e+";"+t.x+";"+t.y+"M");if(u.sgrMouse)return t.x-=32,t.y-=32,void u.send("[<"+(3===(3&e)?-4&e:e)+";"+t.x+";"+t.y+(3===(3&e)?"m":"M"));var r=[];s(r,e),s(r,t.x),s(r,t.y),u.send("[M"+k.fromCharCode.apply(k,r))}function a(e){var t,s,r,i,n;switch(e.type){case"mousedown":t=null!=e.button?+e.button:null!=e.which?e.which-1:null,u.isMSIE&&(t=1===t?0:4===t?1:t);break;case"mouseup":t=3;break;case"DOMMouseScroll":t=e.detail<0?64:65;break;case"mousewheel":t=e.wheelDeltaY>0?64:65}return s=e.shiftKey?4:0,r=e.metaKey?8:0,i=e.ctrlKey?16:0,n=s|r|i,u.vt200Mouse?n&=i:u.normalMouse||(n=0),t=32+(n<<2)+t}function l(e){var t,s,r,i,n;if(null!=e.pageX){for(t=e.pageX,s=e.pageY,n=u.element;n&&n!==u.document.documentElement;)t-=n.offsetLeft,s-=n.offsetTop,n="offsetParent"in n?n.offsetParent:n.parentNode;return r=u.element.clientWidth,i=u.element.clientHeight,t=Math.round(t/r*u.cols),s=Math.round(s/i*u.rows),0>t&&(t=0),t>u.cols&&(t=u.cols),0>s&&(s=0),s>u.rows&&(s=u.rows),t+=32,s+=32,{x:t,y:s,type:e.type===d?"mousewheel":e.type}}}var c=this.element,u=this,h=32,d="onmousewheel"in this.context?"mousewheel":"DOMMouseScroll";r(c,"mousedown",function(s){return u.mouseEvents?(e(s),u.focus(),u.vt200Mouse?(e({__proto__:s,type:"mouseup"}),n(s)):(u.normalMouse&&r(u.document,"mousemove",t),u.x10Mouse||r(u.document,"mouseup",function o(s){return e(s),u.normalMouse&&i(u.document,"mousemove",t),i(u.document,"mouseup",o),n(s)}),n(s))):void 0}),r(c,d,function(t){return u.mouseEvents&&!(u.x10Mouse||u.vt300Mouse||u.decLocator)?(e(t),n(t)):void 0}),r(c,d,function(e){return u.mouseEvents||u.applicationKeypad?void 0:("DOMMouseScroll"===e.type?u.scrollDisp(e.detail<0?-5:5):u.scrollDisp(e.wheelDeltaY>0?-5:5),n(e))})},s.prototype.destroy=function(){this.readable=!1,this.writable=!1,this._events={},this.handler=function(){},this.write=function(){},this.element.parentNode&&this.element.parentNode.removeChild(this.element)},s.prototype.refresh=function(e,t){var r,i,n,o,a,l,u,h,d,f,p,m,g,v;for(t-e>=this.rows/2&&(v=this.element.parentNode,v&&v.removeChild(this.element)),u=this.cols,i=e,t>=this.lines.length&&(this.log("`end` is too large. Most likely a bad CSR."),t=this.lines.length-1);t>=i;i++){for(g=i+this.ydisp,o=this.lines[g],a="",r=i!==this.y||!this.cursorState||this.ydisp!==this.ybase&&!this.selectMode||this.cursorHidden?-1:this.x,d=this.defAttr,n=0;u>n;n++){switch(h=o[n][0],l=o[n][1],n===r&&(h=-1),h!==d&&(d!==this.defAttr&&(a+="</span>"),h!==this.defAttr&&(-1===h?a+='<span class="reverse-video terminal-cursor">':(a+='<span style="',f=511&h,p=h>>9&511,m=h>>18,1&m&&(s.brokenBold||(a+="font-weight:bold;"),8>p&&(p+=8)),2&m&&(a+="text-decoration:underline;"),4&m&&(2&m?(a=a.slice(0,-1),a+=" blink;"):a+="text-decoration:blink;"),8&m&&(f=h>>9&511,p=511&h,1&m&&8>p&&(p+=8)),16&m&&(a+="visibility:hidden;"),256!==f&&(a+="background-color:"+this.colors[f]+";"),257!==p&&(a+="color:"+this.colors[p]+";"),a+='">'))),l){case"&":a+="&amp;";break;case"<":a+="&lt;";break;case">":a+="&gt;";break;default:" ">=l?a+="&nbsp;":(c(l)&&n++,a+=l)}d=h}d!==this.defAttr&&(a+="</span>"),this.children[i].innerHTML=a}v&&v.appendChild(this.element)},s.prototype._cursorBlink=function(){s.focus===this&&(this.cursorState^=1,this.refresh(this.y,this.y))},s.prototype.showCursor=function(){this.cursorState||(this.cursorState=1,this.refresh(this.y,this.y))},s.prototype.startBlink=function(){if(this.cursorBlink){var e=this;this._blinker=function(){e._cursorBlink()},this._blink=x(this._blinker,500)}},s.prototype.refreshBlink=function(){this.cursorBlink&&(clearInterval(this._blink),this._blink=x(this._blinker,500))},s.prototype.scroll=function(){var e;++this.ybase===this.scrollback&&(this.ybase=this.ybase/2|0,this.lines=this.lines.slice(-(this.ybase+this.rows)+1)),this.ydisp=this.ybase,e=this.ybase+this.rows-1,e-=this.rows-1-this.scrollBottom,e===this.lines.length?this.lines.push(this.blankLine()):this.lines.splice(e,0,this.blankLine()),0!==this.scrollTop&&(0!==this.ybase&&(this.ybase--,this.ydisp=this.ybase),this.lines.splice(this.ybase+this.scrollTop,1)),this.updateRange(this.scrollTop),this.updateRange(this.scrollBottom)},s.prototype.scrollDisp=function(e){this.ydisp+=e,this.ydisp>this.ybase?this.ydisp=this.ybase:this.ydisp<0&&(this.ydisp=0),this.refresh(0,this.rows-1)},s.prototype.write=function(e){var t,r,i,n=e.length,o=0;for(this.refreshStart=this.y,this.refreshEnd=this.y,this.ybase!==this.ydisp&&(this.ydisp=this.ybase,this.maxRange());n>o;o++)switch(i=e[o],this.state){case p:switch(i){case"":this.bell();break;case"\n":case"\x0B":case"\f":this.convertEol&&(this.x=0),this.y++,this.y>this.scrollBottom&&(this.y--,this.scroll());break;case"\r":this.x=0;break;case"\b":this.x>0&&this.x--;break;case"	":this.x=this.nextStop();break;case"":this.setgLevel(1);break;case"":this.setgLevel(0);break;case"":this.state=m;break;default:if(i>=" "&&(this.charset&&this.charset[i]&&(i=this.charset[i]),this.x>=this.cols&&(this.x=0,this.y++,this.y>this.scrollBottom&&(this.y--,this.scroll())),this.lines[this.y+this.ybase][this.x]=[this.curAttr,i],this.x++,this.updateRange(this.y),c(i))){if(t=this.y+this.ybase,this.cols<2||this.x>=this.cols){this.lines[t][this.x-1]=[this.curAttr," "];break}this.lines[t][this.x]=[this.curAttr," "],this.x++}}break;case m:switch(i){case"[":this.params=[],this.currentParam=0,this.state=g;break;case"]":this.params=[],this.currentParam=0,this.state=v;break;case"P":this.params=[],this.currentParam=0,this.state=_;break;case"_":this.state=b;break;case"^":this.state=b;break;case"c":this.reset();break;case"E":this.x=0;case"D":this.index();break;case"M":this.reverseIndex();break;case"%":this.setgLevel(0),this.setgCharset(0,s.charsets.US),this.state=p,o++;break;case"(":case")":case"*":case"+":case"-":case".":switch(i){case"(":this.gcharset=0;break;case")":this.gcharset=1;break;case"*":this.gcharset=2;break;case"+":this.gcharset=3;break;case"-":this.gcharset=1;break;case".":this.gcharset=2}this.state=y;break;case"/":this.gcharset=3,this.state=y,o--;break;case"N":break;case"O":break;case"n":this.setgLevel(2);break;case"o":this.setgLevel(3);break;case"|":this.setgLevel(3);break;case"}":this.setgLevel(2);break;case"~":this.setgLevel(1);break;case"7":this.saveCursor(),this.state=p;break;case"8":this.restoreCursor(),this.state=p;break;case"#":this.state=p,o++;break;case"H":this.tabSet();break;case"=":this.log("Serial port requested application keypad."),this.applicationKeypad=!0,this.state=p;break;case">":this.log("Switching back to normal keypad."),this.applicationKeypad=!1,this.state=p;break;default:this.state=p,this.error("Unknown ESC control: %s.",i)}break;case y:switch(i){case"0":r=s.charsets.SCLD;break;case"A":r=s.charsets.UK;break;case"B":r=s.charsets.US;break;case"4":r=s.charsets.Dutch;break;case"C":case"5":r=s.charsets.Finnish;break;case"R":r=s.charsets.French;break;case"Q":r=s.charsets.FrenchCanadian;break;case"K":r=s.charsets.German;break;case"Y":r=s.charsets.Italian;break;case"E":case"6":r=s.charsets.NorwegianDanish;break;case"Z":r=s.charsets.Spanish;break;case"H":case"7":r=s.charsets.Swedish;break;case"=":r=s.charsets.Swiss;break;case"/":r=s.charsets.ISOLatin,o++;break;default:r=s.charsets.US}this.setgCharset(this.gcharset,r),this.gcharset=null,this.state=p;break;case v:if(""===i||""===i){switch(""===i&&o++,this.params.push(this.currentParam),this.params[0]){case 0:case 1:case 2:this.params[1]&&(this.title=this.params[1],this.handleTitle(this.title));break;case 3:break;case 4:case 5:break;case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:break;case 46:break;case 50:break;case 51:break;case 52:break;case 104:case 105:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:}this.params=[],this.currentParam=0,this.state=p}else this.params.length?this.currentParam+=i:i>="0"&&"9">=i?this.currentParam=10*this.currentParam+i.charCodeAt(0)-48:";"===i&&(this.params.push(this.currentParam),this.currentParam="");break;case g:if("?"===i||">"===i||"!"===i){this.prefix=i;break}if(i>="0"&&"9">=i){this.currentParam=10*this.currentParam+i.charCodeAt(0)-48;break}if("$"===i||'"'===i||" "===i||"'"===i){this.postfix=i;break}if(this.params.push(this.currentParam),this.currentParam=0,";"===i)break;switch(this.state=p,i){case"A":this.cursorUp(this.params);break;case"B":this.cursorDown(this.params);break;case"C":this.cursorForward(this.params);break;case"D":this.cursorBackward(this.params);break;case"H":this.cursorPos(this.params);break;case"J":this.eraseInDisplay(this.params);break;case"K":this.eraseInLine(this.params);break;case"m":this.prefix||this.charAttributes(this.params);break;case"n":this.prefix||this.deviceStatus(this.params);break;case"@":this.insertChars(this.params);break;case"E":this.cursorNextLine(this.params);break;case"F":this.cursorPrecedingLine(this.params);break;case"G":this.cursorCharAbsolute(this.params);break;case"L":this.insertLines(this.params);break;case"M":this.deleteLines(this.params);break;case"P":this.deleteChars(this.params);break;case"X":this.eraseChars(this.params);break;case"`":this.charPosAbsolute(this.params);break;case"a":this.HPositionRelative(this.params);break;case"c":this.sendDeviceAttributes(this.params);break;case"d":this.linePosAbsolute(this.params);break;case"e":this.VPositionRelative(this.params);break;case"f":this.HVPosition(this.params);break;case"h":this.setMode(this.params);break;case"l":this.resetMode(this.params);break;case"r":this.setScrollRegion(this.params);break;case"s":this.saveCursor(this.params);break;case"u":this.restoreCursor(this.params);break;case"I":this.cursorForwardTab(this.params);break;case"S":this.scrollUp(this.params);break;case"T":this.params.length<2&&!this.prefix&&this.scrollDown(this.params);break;case"Z":this.cursorBackwardTab(this.params);break;case"b":this.repeatPrecedingCharacter(this.params);break;case"g":this.tabClear(this.params);break;case"p":switch(this.prefix){case"!":this.softReset(this.params)}break;default:this.error("Unknown CSI code: %s.",i)}this.prefix="",this.postfix="";break;case _:if(""===i||""===i){switch(""===i&&o++,this.prefix){case"":break;case"$q":var a=this.currentParam,l=!1;switch(a){case'"q':a='0"q';break;case'"p':a='61"p';break;case"r":a=""+(this.scrollTop+1)+";"+(this.scrollBottom+1)+"r";break;case"m":a="0m";break;default:this.error("Unknown DCS Pt: %s.",a),a=""}this.send("P"+ +l+"$r"+a+"\\");break;case"+p":break;case"+q":var a=this.currentParam,l=!1;this.send("P"+ +l+"+r"+a+"\\");break;default:this.error("Unknown DCS prefix: %s.",this.prefix)}this.currentParam=0,this.prefix="",this.state=p}else this.currentParam?this.currentParam+=i:this.prefix||"$"===i||"+"===i?2===this.prefix.length?this.currentParam=i:this.prefix+=i:this.currentParam=i;break;case b:(""===i||""===i)&&(""===i&&o++,this.state=p)}this.updateRange(this.y),this.refresh(this.refreshStart,this.refreshEnd);
},s.prototype.writeln=function(e){this.write(e+"\r\n")},s.prototype.handleExtraKeys=function(e){return!1},s.prototype.keyDown=function(e){var t,s=this;switch(e.keyCode){case 8:if(e.shiftKey){t="\b";break}t="";break;case 9:if(e.shiftKey){t="[Z";break}t="	";break;case 13:t="\r";break;case 27:t="";break;case 37:if(this.applicationCursor){t="OD";break}t="[D";break;case 39:if(this.applicationCursor){t="OC";break}t="[C";break;case 38:if(this.applicationCursor){t="OA";break}if(e.ctrlKey)return this.scrollDisp(-1),n(e);t="[A";break;case 40:if(this.applicationCursor){t="OB";break}if(e.ctrlKey)return this.scrollDisp(1),n(e);t="[B";break;case 46:t="[3~";break;case 45:t="[2~";break;case 36:if(this.applicationKeypad){t="OH";break}t="OH";break;case 35:if(this.applicationKeypad){t="OF";break}t="OF";break;case 33:if(e.shiftKey)return this.scrollDisp(-(this.rows-1)),n(e);t="[5~";break;case 34:if(e.shiftKey)return this.scrollDisp(this.rows-1),n(e);t="[6~";break;case 112:t="OP";break;case 113:t="OQ";break;case 114:t="OR";break;case 115:t="OS";break;case 116:t="[15~";break;case 117:t="[17~";break;case 118:t="[18~";break;case 119:t="[19~";break;case 120:t="[20~";break;case 121:t="[21~";break;case 122:t="[23~";break;case 123:t="[24~";break;default:if(e.ctrlKey)if(e.keyCode>=65&&e.keyCode<=90){if(this.screenKeys&&!this.prefixMode&&!this.selectMode&&65===e.keyCode)return this.enterPrefix(),n(e);if(this.prefixMode&&86===e.keyCode)return void this.leavePrefix();if((this.prefixMode||this.selectMode)&&67===e.keyCode)return void(this.visualMode&&w(function(){s.leaveVisual()},1));t=k.fromCharCode(e.keyCode-64)}else 32===e.keyCode?t=k.fromCharCode(0):e.keyCode>=51&&e.keyCode<=55?t=k.fromCharCode(e.keyCode-51+27):56===e.keyCode?t=k.fromCharCode(127):219===e.keyCode?t=k.fromCharCode(27):221===e.keyCode&&(t=k.fromCharCode(29));else(!this.isMac&&e.altKey||this.isMac&&e.metaKey)&&(e.keyCode>=65&&e.keyCode<=90?t=""+k.fromCharCode(e.keyCode+32):192===e.keyCode?t="`":e.keyCode>=48&&e.keyCode<=57&&(t=""+(e.keyCode-48)))}return t||(t=this.handleExtraKeys(e)),t?this.prefixMode?(this.leavePrefix(),n(e)):this.selectMode?(this.keySelect(e,t),n(e)):(this.emit("keydown",e),this.emit("key",t,e),this.showCursor(),this.handler(t),n(e)):!0},s.prototype.setgLevel=function(e){this.glevel=e,this.charset=this.charsets[e]},s.prototype.setgCharset=function(e,t){this.charsets[e]=t,this.glevel===e&&(this.charset=t)},s.prototype.keyPress=function(e){var t;if(n(e),e.charCode)t=e.charCode;else if(null==e.which)t=e.keyCode;else{if(0===e.which||0===e.charCode)return!1;t=e.which}return!t||e.ctrlKey||e.altKey||e.metaKey?!1:(t=k.fromCharCode(t),this.prefixMode?(this.leavePrefix(),this.keyPrefix(e,t),!1):this.selectMode?(this.keySelect(e,t),!1):(this.emit("keypress",t,e),this.emit("key",t,e),this.showCursor(),this.handler(t),!1))},s.prototype.send=function(e){var t=this;this.queue||w(function(){t.handler(t.queue),t.queue=""},1),this.queue+=e},s.prototype.bell=function(){if(this.emit("bell"),this.visualBell){var e=this;this.element.style.borderColor="white",w(function(){e.element.style.borderColor=""},10),this.popOnBell&&this.focus()}},s.prototype.log=function(){if(this.debug&&this.context.console&&this.context.console.log){var e=Array.prototype.slice.call(arguments);this.context.console.log.apply(this.context.console,e)}},s.prototype.error=function(){if(this.debug&&this.context.console&&this.context.console.error){var e=Array.prototype.slice.call(arguments);this.context.console.error.apply(this.context.console,e)}},s.prototype.resize=function(e,t){var s,r,i,n,o;if(1>e&&(e=1),1>t&&(t=1),n=this.cols,e>n)for(o=[this.defAttr," "],i=this.lines.length;i--;)for(;this.lines[i].length<e;)this.lines[i].push(o);else if(n>e)for(i=this.lines.length;i--;)for(;this.lines[i].length>e;)this.lines[i].pop();if(this.setupStops(n),this.cols=e,n=this.rows,t>n)for(r=this.element;n++<t;)this.lines.length<t+this.ybase&&this.lines.push(this.blankLine()),this.children.length<t&&(s=this.document.createElement("div"),r.appendChild(s),this.children.push(s));else if(n>t)for(;n-- >t;)if(this.lines.length>t+this.ybase&&this.lines.pop(),this.children.length>t){if(r=this.children.pop(),!r)continue;r.parentNode.removeChild(r)}this.rows=t,this.y>=t&&(this.y=t-1),this.x>=e&&(this.x=e-1),this.scrollTop=0,this.scrollBottom=t-1,this.refresh(0,this.rows-1),this.normal=null},s.prototype.updateRange=function(e){e<this.refreshStart&&(this.refreshStart=e),e>this.refreshEnd&&(this.refreshEnd=e)},s.prototype.maxRange=function(){this.refreshStart=0,this.refreshEnd=this.rows-1},s.prototype.setupStops=function(e){for(null!=e?this.tabs[e]||(e=this.prevStop(e)):(this.tabs={},e=0);e<this.cols;e+=8)this.tabs[e]=!0},s.prototype.prevStop=function(e){for(null==e&&(e=this.x);!this.tabs[--e]&&e>0;);return e>=this.cols?this.cols-1:0>e?0:e},s.prototype.nextStop=function(e){for(null==e&&(e=this.x);!this.tabs[++e]&&e<this.cols;);return e>=this.cols?this.cols-1:0>e?0:e},s.prototype.eraseRight=function(e,t){for(var s=this.lines[this.ybase+t],r=[this.eraseAttr()," "];e<this.cols;e++)s[e]=r;this.updateRange(t)},s.prototype.eraseLeft=function(e,t){var s=this.lines[this.ybase+t],r=[this.eraseAttr()," "];for(e++;e--;)s[e]=r;this.updateRange(t)},s.prototype.eraseLine=function(e){this.eraseRight(0,e)},s.prototype.blankLine=function(e){for(var t=e?this.eraseAttr():this.defAttr,s=[t," "],r=[],i=0;i<this.cols;i++)r[i]=s;return r},s.prototype.ch=function(e){return e?[this.eraseAttr()," "]:[this.defAttr," "]},s.prototype.is=function(e){var t=this.termName;return 0===(t+"").indexOf(e)},s.prototype.handler=function(e){this.emit("data",e)},s.prototype.handleTitle=function(e){this.emit("title",e)},s.prototype.index=function(){this.y++,this.y>this.scrollBottom&&(this.y--,this.scroll()),this.state=p},s.prototype.reverseIndex=function(){var e;this.y--,this.y<this.scrollTop&&(this.y++,this.lines.splice(this.y+this.ybase,0,this.blankLine(!0)),e=this.rows-1-this.scrollBottom,this.lines.splice(this.rows-1+this.ybase-e+1,1),this.updateRange(this.scrollTop),this.updateRange(this.scrollBottom)),this.state=p},s.prototype.reset=function(){this.options.rows=this.rows,this.options.cols=this.cols,s.call(this,this.options),this.refresh(0,this.rows-1)},s.prototype.tabSet=function(){this.tabs[this.x]=!0,this.state=p},s.prototype.cursorUp=function(e){var t=e[0];1>t&&(t=1),this.y-=t,this.y<0&&(this.y=0)},s.prototype.cursorDown=function(e){var t=e[0];1>t&&(t=1),this.y+=t,this.y>=this.rows&&(this.y=this.rows-1)},s.prototype.cursorForward=function(e){var t=e[0];1>t&&(t=1),this.x+=t,this.x>=this.cols&&(this.x=this.cols-1)},s.prototype.cursorBackward=function(e){var t=e[0];1>t&&(t=1),this.x-=t,this.x<0&&(this.x=0)},s.prototype.cursorPos=function(e){var t,s;t=e[0]-1,s=e.length>=2?e[1]-1:0,0>t?t=0:t>=this.rows&&(t=this.rows-1),0>s?s=0:s>=this.cols&&(s=this.cols-1),this.x=s,this.y=t},s.prototype.eraseInDisplay=function(e){var t;switch(e[0]){case 0:for(this.eraseRight(this.x,this.y),t=this.y+1;t<this.rows;t++)this.eraseLine(t);break;case 1:for(this.eraseLeft(this.x,this.y),t=this.y;t--;)this.eraseLine(t);break;case 2:for(t=this.rows;t--;)this.eraseLine(t);break;case 3:}},s.prototype.eraseInLine=function(e){switch(e[0]){case 0:this.eraseRight(this.x,this.y);break;case 1:this.eraseLeft(this.x,this.y);break;case 2:this.eraseLine(this.y)}},s.prototype.charAttributes=function(e){if(1===e.length&&0===e[0])return void(this.curAttr=this.defAttr);for(var t,s=e.length,r=0,i=this.curAttr>>18,n=this.curAttr>>9&511,o=511&this.curAttr;s>r;r++)t=e[r],t>=30&&37>=t?n=t-30:t>=40&&47>=t?o=t-40:t>=90&&97>=t?(t+=8,n=t-90):t>=100&&107>=t?(t+=8,o=t-100):0===t?(i=this.defAttr>>18,n=this.defAttr>>9&511,o=511&this.defAttr):1===t?i|=1:4===t?i|=2:5===t?i|=4:7===t?i|=8:8===t?i|=16:22===t?i&=-2:24===t?i&=-3:25===t?i&=-5:27===t?i&=-9:28===t?i&=-17:39===t?n=this.defAttr>>9&511:49===t?o=511&this.defAttr:38===t?2===e[r+1]?(r+=2,n=u(255&e[r],255&e[r+1],255&e[r+2]),-1===n&&(n=511),r+=2):5===e[r+1]&&(r+=2,t=255&e[r],n=t):48===t?2===e[r+1]?(r+=2,o=u(255&e[r],255&e[r+1],255&e[r+2]),-1===o&&(o=511),r+=2):5===e[r+1]&&(r+=2,t=255&e[r],o=t):100===t?(n=this.defAttr>>9&511,o=511&this.defAttr):this.error("Unknown SGR attribute: %d.",t);this.curAttr=i<<18|n<<9|o},s.prototype.deviceStatus=function(e){if(this.prefix){if("?"===this.prefix)switch(e[0]){case 6:this.send("[?"+(this.y+1)+";"+(this.x+1)+"R");break;case 15:break;case 25:break;case 26:break;case 53:}}else switch(e[0]){case 5:this.send("[0n");break;case 6:this.send("["+(this.y+1)+";"+(this.x+1)+"R")}},s.prototype.insertChars=function(e){var t,s,r,i;for(t=e[0],1>t&&(t=1),s=this.y+this.ybase,r=this.x,i=[this.eraseAttr()," "];t--&&r<this.cols;)this.lines[s].splice(r++,0,i),this.lines[s].pop()},s.prototype.cursorNextLine=function(e){var t=e[0];1>t&&(t=1),this.y+=t,this.y>=this.rows&&(this.y=this.rows-1),this.x=0},s.prototype.cursorPrecedingLine=function(e){var t=e[0];1>t&&(t=1),this.y-=t,this.y<0&&(this.y=0),this.x=0},s.prototype.cursorCharAbsolute=function(e){var t=e[0];1>t&&(t=1),this.x=t-1},s.prototype.insertLines=function(e){var t,s,r;for(t=e[0],1>t&&(t=1),s=this.y+this.ybase,r=this.rows-1-this.scrollBottom,r=this.rows-1+this.ybase-r+1;t--;)this.lines.splice(s,0,this.blankLine(!0)),this.lines.splice(r,1);this.updateRange(this.y),this.updateRange(this.scrollBottom)},s.prototype.deleteLines=function(e){var t,s,r;for(t=e[0],1>t&&(t=1),s=this.y+this.ybase,r=this.rows-1-this.scrollBottom,r=this.rows-1+this.ybase-r;t--;)this.lines.splice(r+1,0,this.blankLine(!0)),this.lines.splice(s,1);this.updateRange(this.y),this.updateRange(this.scrollBottom)},s.prototype.deleteChars=function(e){var t,s,r;for(t=e[0],1>t&&(t=1),s=this.y+this.ybase,r=[this.eraseAttr()," "];t--;)this.lines[s].splice(this.x,1),this.lines[s].push(r)},s.prototype.eraseChars=function(e){var t,s,r,i;for(t=e[0],1>t&&(t=1),s=this.y+this.ybase,r=this.x,i=[this.eraseAttr()," "];t--&&r<this.cols;)this.lines[s][r++]=i},s.prototype.charPosAbsolute=function(e){var t=e[0];1>t&&(t=1),this.x=t-1,this.x>=this.cols&&(this.x=this.cols-1)},s.prototype.HPositionRelative=function(e){var t=e[0];1>t&&(t=1),this.x+=t,this.x>=this.cols&&(this.x=this.cols-1)},s.prototype.sendDeviceAttributes=function(e){e[0]>0||(this.prefix?">"===this.prefix&&(this.is("xterm")?this.send("[>0;276;0c"):this.is("rxvt-unicode")?this.send("[>85;95;0c"):this.is("linux")?this.send(e[0]+"c"):this.is("screen")&&this.send("[>83;40003;0c")):this.is("xterm")||this.is("rxvt-unicode")||this.is("screen")?this.send("[?1;2c"):this.is("linux")&&this.send("[?6c"))},s.prototype.linePosAbsolute=function(e){var t=e[0];1>t&&(t=1),this.y=t-1,this.y>=this.rows&&(this.y=this.rows-1)},s.prototype.VPositionRelative=function(e){var t=e[0];1>t&&(t=1),this.y+=t,this.y>=this.rows&&(this.y=this.rows-1)},s.prototype.HVPosition=function(e){e[0]<1&&(e[0]=1),e[1]<1&&(e[1]=1),this.y=e[0]-1,this.y>=this.rows&&(this.y=this.rows-1),this.x=e[1]-1,this.x>=this.cols&&(this.x=this.cols-1)},s.prototype.setMode=function(e){if("object"!=typeof e)if(this.prefix){if("?"===this.prefix)switch(e){case 1:this.applicationCursor=!0;break;case 2:this.setgCharset(0,s.charsets.US),this.setgCharset(1,s.charsets.US),this.setgCharset(2,s.charsets.US),this.setgCharset(3,s.charsets.US);break;case 3:this.savedCols=this.cols,this.resize(132,this.rows);break;case 6:this.originMode=!0;break;case 7:this.wraparoundMode=!0;break;case 12:break;case 66:this.log("Serial port requested application keypad."),this.applicationKeypad=!0;break;case 9:case 1e3:case 1002:case 1003:this.x10Mouse=9===e,this.vt200Mouse=1e3===e,this.normalMouse=e>1e3,this.mouseEvents=!0,this.element.style.cursor="default",this.log("Binding to mouse events.");break;case 1004:this.sendFocus=!0;break;case 1005:this.utfMouse=!0;break;case 1006:this.sgrMouse=!0;break;case 1015:this.urxvtMouse=!0;break;case 25:this.cursorHidden=!1;break;case 1049:case 47:case 1047:if(!this.normal){var t={lines:this.lines,ybase:this.ybase,ydisp:this.ydisp,x:this.x,y:this.y,scrollTop:this.scrollTop,scrollBottom:this.scrollBottom,tabs:this.tabs};this.reset(),this.normal=t,this.showCursor()}}}else switch(e){case 4:this.insertMode=!0;break;case 20:}else for(var r=e.length,i=0;r>i;i++)this.setMode(e[i])},s.prototype.resetMode=function(e){if("object"!=typeof e)if(this.prefix){if("?"===this.prefix)switch(e){case 1:this.applicationCursor=!1;break;case 3:132===this.cols&&this.savedCols&&this.resize(this.savedCols,this.rows),delete this.savedCols;break;case 6:this.originMode=!1;break;case 7:this.wraparoundMode=!1;break;case 12:break;case 66:this.log("Switching back to normal keypad."),this.applicationKeypad=!1;break;case 9:case 1e3:case 1002:case 1003:this.x10Mouse=!1,this.vt200Mouse=!1,this.normalMouse=!1,this.mouseEvents=!1,this.element.style.cursor="";break;case 1004:this.sendFocus=!1;break;case 1005:this.utfMouse=!1;break;case 1006:this.sgrMouse=!1;break;case 1015:this.urxvtMouse=!1;break;case 25:this.cursorHidden=!0;break;case 1049:case 47:case 1047:this.normal&&(this.lines=this.normal.lines,this.ybase=this.normal.ybase,this.ydisp=this.normal.ydisp,this.x=this.normal.x,this.y=this.normal.y,this.scrollTop=this.normal.scrollTop,this.scrollBottom=this.normal.scrollBottom,this.tabs=this.normal.tabs,this.normal=null,this.refresh(0,this.rows-1),this.showCursor())}}else switch(e){case 4:this.insertMode=!1;break;case 20:}else for(var t=e.length,s=0;t>s;s++)this.resetMode(e[s])},s.prototype.setScrollRegion=function(e){this.prefix||(this.scrollTop=(e[0]||1)-1,this.scrollBottom=(e[1]||this.rows)-1,this.x=0,this.y=0)},s.prototype.saveCursor=function(e){this.savedX=this.x,this.savedY=this.y},s.prototype.restoreCursor=function(e){this.x=this.savedX||0,this.y=this.savedY||0},s.prototype.cursorForwardTab=function(e){for(var t=e[0]||1;t--;)this.x=this.nextStop()},s.prototype.scrollUp=function(e){for(var t=e[0]||1;t--;)this.lines.splice(this.ybase+this.scrollTop,1),this.lines.splice(this.ybase+this.scrollBottom,0,this.blankLine());this.updateRange(this.scrollTop),this.updateRange(this.scrollBottom)},s.prototype.scrollDown=function(e){for(var t=e[0]||1;t--;)this.lines.splice(this.ybase+this.scrollBottom,1),this.lines.splice(this.ybase+this.scrollTop,0,this.blankLine());this.updateRange(this.scrollTop),this.updateRange(this.scrollBottom)},s.prototype.initMouseTracking=function(e){},s.prototype.resetTitleModes=function(e){},s.prototype.cursorBackwardTab=function(e){for(var t=e[0]||1;t--;)this.x=this.prevStop()},s.prototype.repeatPrecedingCharacter=function(e){for(var t=e[0]||1,s=this.lines[this.ybase+this.y],r=s[this.x-1]||[this.defAttr," "];t--;)s[this.x++]=r},s.prototype.tabClear=function(e){var t=e[0];0>=t?delete this.tabs[this.x]:3===t&&(this.tabs={})},s.prototype.mediaCopy=function(e){},s.prototype.setResources=function(e){},s.prototype.disableModifiers=function(e){},s.prototype.setPointerMode=function(e){},s.prototype.softReset=function(e){this.cursorHidden=!1,this.insertMode=!1,this.originMode=!1,this.wraparoundMode=!1,this.applicationKeypad=!1,this.applicationCursor=!1,this.scrollTop=0,this.scrollBottom=this.rows-1,this.curAttr=this.defAttr,this.x=this.y=0,this.charset=null,this.glevel=0,this.charsets=[null]},s.prototype.requestAnsiMode=function(e){},s.prototype.requestPrivateMode=function(e){},s.prototype.setConformanceLevel=function(e){},s.prototype.loadLEDs=function(e){},s.prototype.setCursorStyle=function(e){},s.prototype.setCharProtectionAttr=function(e){},s.prototype.restorePrivateValues=function(e){},s.prototype.setAttrInRectangle=function(e){for(var t,s,r=e[0],i=e[1],n=e[2],o=e[3],a=e[4];n+1>r;r++)for(t=this.lines[this.ybase+r],s=i;o>s;s++)t[s]=[a,t[s][1]];this.updateRange(e[0]),this.updateRange(e[2])},s.prototype.savePrivateValues=function(e){},s.prototype.manipulateWindow=function(e){},s.prototype.reverseAttrInRectangle=function(e){},s.prototype.setTitleModeFeature=function(e){},s.prototype.setWarningBellVolume=function(e){},s.prototype.setMarginBellVolume=function(e){},s.prototype.copyRectangle=function(e){},s.prototype.enableFilterRectangle=function(e){},s.prototype.requestParameters=function(e){},s.prototype.selectChangeExtent=function(e){},s.prototype.fillRectangle=function(e){for(var t,s,r=e[0],i=e[1],n=e[2],o=e[3],a=e[4];o+1>i;i++)for(t=this.lines[this.ybase+i],s=n;a>s;s++)t[s]=[t[s][0],k.fromCharCode(r)];this.updateRange(e[1]),this.updateRange(e[3])},s.prototype.enableLocatorReporting=function(e){e[0]>0},s.prototype.eraseRectangle=function(e){var t,s,r,i=e[0],n=e[1],o=e[2],a=e[3];for(r=[this.eraseAttr()," "];o+1>i;i++)for(t=this.lines[this.ybase+i],s=n;a>s;s++)t[s]=r;this.updateRange(e[0]),this.updateRange(e[2])},s.prototype.setLocatorEvents=function(e){},s.prototype.selectiveEraseRectangle=function(e){},s.prototype.requestLocatorPosition=function(e){},s.prototype.insertColumns=function(){for(var e,t=params[0],s=this.ybase+this.rows,r=[this.eraseAttr()," "];t--;)for(e=this.ybase;s>e;e++)this.lines[e].splice(this.x+1,0,r),this.lines[e].pop();this.maxRange()},s.prototype.deleteColumns=function(){for(var e,t=params[0],s=this.ybase+this.rows,r=[this.eraseAttr()," "];t--;)for(e=this.ybase;s>e;e++)this.lines[e].splice(this.x,1),this.lines[e].push(r);this.maxRange()},s.prototype.enterPrefix=function(){this.prefixMode=!0},s.prototype.leavePrefix=function(){this.prefixMode=!1},s.prototype.enterSelect=function(){this._real={x:this.x,y:this.y,ydisp:this.ydisp,ybase:this.ybase,cursorHidden:this.cursorHidden,lines:this.copyBuffer(this.lines),write:this.write},this.write=function(){},this.selectMode=!0,this.visualMode=!1,this.cursorHidden=!1,this.refresh(this.y,this.y)},s.prototype.leaveSelect=function(){this.x=this._real.x,this.y=this._real.y,this.ydisp=this._real.ydisp,this.ybase=this._real.ybase,this.cursorHidden=this._real.cursorHidden,this.lines=this._real.lines,this.write=this._real.write,delete this._real,this.selectMode=!1,this.visualMode=!1,this.refresh(0,this.rows-1)},s.prototype.enterVisual=function(){this._real.preVisual=this.copyBuffer(this.lines),this.selectText(this.x,this.x,this.ydisp+this.y,this.ydisp+this.y),this.visualMode=!0},s.prototype.leaveVisual=function(){this.lines=this._real.preVisual,delete this._real.preVisual,delete this._selected,this.visualMode=!1,this.refresh(0,this.rows-1)},s.prototype.enterSearch=function(e){this.entry="",this.searchMode=!0,this.searchDown=e,this._real.preSearch=this.copyBuffer(this.lines),this._real.preSearchX=this.x,this._real.preSearchY=this.y;for(var t=this.ydisp+this.rows-1,s=0;s<this.entryPrefix.length;s++)this.lines[t][s]=[-512&this.defAttr|4,this.entryPrefix[s]];this.y=this.rows-1,this.x=this.entryPrefix.length,this.refresh(this.rows-1,this.rows-1)},s.prototype.leaveSearch=function(){this.searchMode=!1,this._real.preSearch&&(this.lines=this._real.preSearch,this.x=this._real.preSearchX,this.y=this._real.preSearchY,delete this._real.preSearch,delete this._real.preSearchX,delete this._real.preSearchY),this.refresh(this.rows-1,this.rows-1)},s.prototype.copyBuffer=function(e){for(var e=e||this.lines,t=[],s=0;s<e.length;s++){t[s]=[];for(var r=0;r<e[s].length;r++)t[s][r]=[e[s][r][0],e[s][r][1]]}return t},s.prototype.getCopyTextarea=function(e){var t=this._copyTextarea,s=this.document;return t||(t=s.createElement("textarea"),t.style.position="absolute",t.style.left="-32000px",t.style.top="-32000px",t.style.width="0px",t.style.height="0px",t.style.opacity="0",t.style.backgroundColor="transparent",t.style.borderStyle="none",t.style.outlineStyle="none",s.getElementsByTagName("body")[0].appendChild(t),this._copyTextarea=t),t},s.prototype.copyText=function(e){var t=this,s=this.getCopyTextarea();this.emit("copy",e),s.focus(),s.textContent=e,s.value=e,s.setSelectionRange(0,e.length),w(function(){t.element.focus(),t.focus()},1)},s.prototype.selectText=function(e,t,s,r){var i,n,o,a,l,c,u,h,d;if(this._selected){for(i=this._selected.x1,n=this._selected.x2,o=this._selected.y1,a=this._selected.y2,o>a&&(l=n,n=i,i=l,l=a,a=o,o=l),i>n&&o===a&&(l=n,n=i,i=l),u=o;a>=u;u++)for(c=0,h=this.cols-1,u===o&&(c=i),u===a&&(h=n);h>=c;c++)null!=this.lines[u][c].old&&(d=this.lines[u][c].old,delete this.lines[u][c].old,this.lines[u][c]=[d,this.lines[u][c][1]]);s=this._selected.y1,e=this._selected.x1}for(s=Math.max(s,0),s=Math.min(s,this.ydisp+this.rows-1),r=Math.max(r,0),r=Math.min(r,this.ydisp+this.rows-1),this._selected={x1:e,x2:t,y1:s,y2:r},s>r&&(l=t,t=e,e=l,l=r,r=s,s=l),e>t&&s===r&&(l=t,t=e,e=l),u=s;r>=u;u++)for(c=0,h=this.cols-1,u===s&&(c=e),u===r&&(h=t);h>=c;c++)d=this.lines[u][c][0],this.lines[u][c]=[-512&d|261636,this.lines[u][c][1]],this.lines[u][c].old=d;s-=this.ydisp,r-=this.ydisp,s=Math.max(s,0),s=Math.min(s,this.rows-1),r=Math.max(r,0),r=Math.min(r,this.rows-1),this.refresh(0,this.rows-1)},s.prototype.grabText=function(e,t,s,r){var i,n,o,a,l,u="",h="";for(s>r&&(l=t,t=e,e=l,l=r,r=s,s=l),e>t&&s===r&&(l=t,t=e,e=l),o=s;r>=o;o++){for(n=0,a=this.cols-1,o===s&&(n=e),o===r&&(a=t);a>=n;n++)i=this.lines[o][n][1]," "!==i?(h&&(u+=h,h=""),u+=i,c(i)&&n++):h+=i;h="",u+="\n"}for(n=t,o=r;n<this.cols;n++)if(" "!==this.lines[o][n][1]){u=u.slice(0,-1);break}return u},s.prototype.keyPrefix=function(e,t){"k"===t||"&"===t?this.destroy():"p"===t||"]"===t?this.emit("request paste"):"c"===t?this.emit("request create"):t>="0"&&"9">=t?(t=+t-1,~t||(t=9),this.emit("request term",t)):"n"===t?this.emit("request term next"):"P"===t?this.emit("request term previous"):":"===t?this.emit("request command mode"):"["===t&&this.enterSelect()},s.prototype.keySelect=function(e,t){if(this.showCursor(),this.searchMode||"n"===t||"N"===t)return this.keySearch(e,t);if(""===t){var s=this.ydisp+this.y;return this.ydisp===this.ybase?(this.y=Math.min(this.y+(this.rows-1)/2|0,this.rows-1),this.refresh(0,this.rows-1)):this.scrollDisp((this.rows-1)/2|0),void(this.visualMode&&this.selectText(this.x,this.x,s,this.ydisp+this.y))}if(""===t){var s=this.ydisp+this.y;return 0===this.ydisp?(this.y=Math.max(this.y-(this.rows-1)/2|0,0),this.refresh(0,this.rows-1)):this.scrollDisp(-(this.rows-1)/2|0),void(this.visualMode&&this.selectText(this.x,this.x,s,this.ydisp+this.y))}if(""===t){var s=this.ydisp+this.y;return this.scrollDisp(this.rows-1),void(this.visualMode&&this.selectText(this.x,this.x,s,this.ydisp+this.y))}if(""===t){var s=this.ydisp+this.y;return this.scrollDisp(-(this.rows-1)),void(this.visualMode&&this.selectText(this.x,this.x,s,this.ydisp+this.y))}if("k"===t||"[A"===t){var s=this.ydisp+this.y;return this.y--,this.y<0&&(this.y=0,this.scrollDisp(-1)),void(this.visualMode?this.selectText(this.x,this.x,s,this.ydisp+this.y):this.refresh(this.y,this.y+1))}if("j"===t||"[B"===t){var s=this.ydisp+this.y;return this.y++,this.y>=this.rows&&(this.y=this.rows-1,this.scrollDisp(1)),void(this.visualMode?this.selectText(this.x,this.x,s,this.ydisp+this.y):this.refresh(this.y-1,this.y))}if("h"===t||"[D"===t){var r=this.x;return this.x--,this.x<0&&(this.x=0),void(this.visualMode?this.selectText(r,this.x,this.ydisp+this.y,this.ydisp+this.y):this.refresh(this.y,this.y))}if("l"===t||"[C"===t){var r=this.x;return this.x++,this.x>=this.cols&&(this.x=this.cols-1),void(this.visualMode?this.selectText(r,this.x,this.ydisp+this.y,this.ydisp+this.y):this.refresh(this.y,this.y))}if("v"===t||" "===t)return void(this.visualMode?this.leaveVisual():this.enterVisual());if("y"!==t){if("q"===t||""===t)return void(this.visualMode?this.leaveVisual():this.leaveSelect());if("w"===t||"W"===t){for(var i=this.x,n=this.y,o=this.ydisp,r=this.x,s=this.y,a=this.ydisp,l=!1;;){for(var c=this.lines[a+s];r<this.cols;){if(c[r][1]<=" ")l=!0;else if(l)break;r++}if(r>=this.cols&&(r=this.cols-1),!(r===this.cols-1&&c[r][1]<=" "))break;if(r=0,++s>=this.rows&&(s--,++a>this.ybase)){a=this.ybase,r=this.x;break}}return this.x=r,this.y=s,this.scrollDisp(-this.ydisp+a),void(this.visualMode&&this.selectText(i,this.x,n+o,this.ydisp+this.y))}if("b"===t||"B"===t){for(var i=this.x,n=this.y,o=this.ydisp,r=this.x,s=this.y,a=this.ydisp;;){for(var c=this.lines[a+s],l=r>0&&c[r][1]>" "&&c[r-1][1]>" ";r>=0;){if(c[r][1]<=" "){if(l&&r+1<this.cols&&c[r+1][1]>" "){r++;break}l=!0}r--}if(0>r&&(r=0),0!==r||!(c[r][1]<=" ")&&l)break;if(r=this.cols-1,--s<0&&(s++,--a<0)){a++,r=0;break}}return this.x=r,this.y=s,this.scrollDisp(-this.ydisp+a),void(this.visualMode&&this.selectText(i,this.x,n+o,this.ydisp+this.y))}if("e"===t||"E"===t){var r=this.x+1,s=this.y,a=this.ydisp;for(r>=this.cols&&r--;;){for(var c=this.lines[a+s];r<this.cols&&c[r][1]<=" ";)r++;for(;r<this.cols;){if(c[r][1]<=" "&&r-1>=0&&c[r-1][1]>" "){r--;break}r++}if(r>=this.cols&&(r=this.cols-1),!(r===this.cols-1&&c[r][1]<=" "))break;if(r=0,++s>=this.rows&&(s--,++a>this.ybase)){a=this.ybase;break}}return this.x=r,this.y=s,this.scrollDisp(-this.ydisp+a),void(this.visualMode&&this.selectText(i,this.x,n+o,this.ydisp+this.y))}if("^"===t||"0"===t){var i=this.x;if("0"===t)this.x=0;else if("^"===t){for(var c=this.lines[this.ydisp+this.y],r=0;r<this.cols&&!(c[r][1]>" ");)r++;r>=this.cols&&(r=this.cols-1),this.x=r}return void(this.visualMode?this.selectText(i,this.x,this.ydisp+this.y,this.ydisp+this.y):this.refresh(this.y,this.y))}if("$"===t){for(var i=this.x,c=this.lines[this.ydisp+this.y],r=this.cols-1;r>=0;){if(c[r][1]>" "){this.visualMode&&r<this.cols-1&&r++;break}r--}return 0>r&&(r=0),this.x=r,void(this.visualMode?this.selectText(i,this.x,this.ydisp+this.y,this.ydisp+this.y):this.refresh(this.y,this.y))}if("g"===t||"G"===t){var i=this.x,n=this.y,o=this.ydisp;return"g"===t?(this.x=0,this.y=0,this.scrollDisp(-this.ydisp)):"G"===t&&(this.x=0,this.y=this.rows-1,this.scrollDisp(this.ybase)),void(this.visualMode&&this.selectText(i,this.x,n+o,this.ydisp+this.y))}if("H"===t||"M"===t||"L"===t){var i=this.x,n=this.y;return"H"===t?(this.x=0,this.y=0):"M"===t?(this.x=0,this.y=this.rows/2|0):"L"===t&&(this.x=0,this.y=this.rows-1),void(this.visualMode?this.selectText(i,this.x,this.ydisp+n,this.ydisp+this.y):(this.refresh(n,n),this.refresh(this.y,this.y)))}if("{"===t||"}"===t){var c,u,i=this.x,n=this.y,o=this.ydisp,h=!1,d=!1,f=-1,s=this.y+("{"===t?-1:1),a=this.ydisp;for("{"===t?0>s&&(s++,a>0&&a--):"}"===t&&s>=this.rows&&(s--,a<this.ybase&&a++);;){for(c=this.lines[a+s],u=0;u<this.cols;u++){if(c[u][1]>" "){-1===f&&(f=0),h=!0;break}if(u===this.cols-1){-1===f?f=1:0===f?d=!0:1===f&&h&&(d=!0);break}}if(d)break;if("{"===t){if(s--,0>s){if(s++,!(a>0))break;a--}}else if("}"===t&&(s++,s>=this.rows)){if(s--,!(a<this.ybase))break;a++}}return d||("{"===t?(s=0,a=0):"}"===t&&(s=this.rows-1,a=this.ybase)),this.x=0,this.y=s,this.scrollDisp(-this.ydisp+a),void(this.visualMode&&this.selectText(i,this.x,n+o,this.ydisp+this.y))}return"/"===t||"?"===t?void(this.visualMode||this.enterSearch("/"===t)):!1}if(this.visualMode){var p=this.grabText(this._selected.x1,this._selected.x2,this._selected.y1,this._selected.y2);this.copyText(p),this.leaveVisual()}},s.prototype.keySearch=function(e,t){if(""===t)return void this.leaveSearch();if("\r"===t||!this.searchMode&&("n"===t||"N"===t)){this.leaveSearch();var s=this.entry;if(!s)return void this.refresh(0,this.rows-1);for(var r,i,n,o=this.x,a=this.y,l=this.ydisp,c=!1,u=!1,h=this.x+1,d=this.ydisp+this.y,f="N"===t?this.searchDown:!this.searchDown;;){for(r=this.lines[d];h<this.cols;){for(n=0;n<s.length&&!(h+n>=this.cols)&&r[h+n][1]===s[n];n++)if(r[h+n][1]===s[n]&&n===s.length-1){c=!0;break}if(c)break;h+=n+1}if(c)break;if(h=0,f){if(d--,0>d){if(u)break;u=!0,d=this.ybase+this.rows-1}}else if(d++,d>this.ybase+this.rows-1){if(u)break;u=!0,d=0}}return c?(d-this.ybase<0?(i=d,d=0,i>this.ybase&&(d=i-this.ybase,i=this.ybase)):(i=this.ybase,d-=this.ybase),this.x=h,this.y=d,this.scrollDisp(-this.ydisp+i),void(this.visualMode&&this.selectText(o,this.x,a+l,this.ydisp+this.y))):void this.refresh(0,this.rows-1)}if("\b"===t||""===t){if(0===this.entry.length)return;var p=this.ydisp+this.rows-1;this.entry=this.entry.slice(0,-1);var n=this.entryPrefix.length+this.entry.length;return this.lines[p][n]=[this.lines[p][n][0]," "],this.x--,this.refresh(this.rows-1,this.rows-1),void this.refresh(this.y,this.y)}if(1===t.length&&t>=" "&&"~">=t){var p=this.ydisp+this.rows-1;this.entry+=t;var n=this.entryPrefix.length+this.entry.length-1;return this.lines[p][n]=[-512&this.defAttr|4,t],this.x++,this.refresh(this.rows-1,this.rows-1),void this.refresh(this.y,this.y)}return!1},s.charsets={},s.charsets.SCLD={"`":"◆",a:"▒",b:"	",c:"\f",d:"\r",e:"\n",f:"°",g:"±",h:"␤",i:"\x0B",j:"┘",k:"┐",l:"┌",m:"└",n:"┼",o:"⎺",p:"⎻",q:"─",r:"⎼",s:"⎽",t:"├",u:"┤",v:"┴",w:"┬",x:"│",y:"≤",z:"≥","{":"π","|":"≠","}":"£","~":"·"},s.charsets.UK=null,s.charsets.US=null,s.charsets.Dutch=null,s.charsets.Finnish=null,s.charsets.French=null,s.charsets.FrenchCanadian=null,s.charsets.German=null,s.charsets.Italian=null,s.charsets.NorwegianDanish=null,s.charsets.Spanish=null,s.charsets.Swedish=null,s.charsets.Swiss=null,s.charsets.ISOLatin=null;var k=this.String,w=this.setTimeout,x=this.setInterval;u._cache={},u.distance=function(e,t,s,r,i,n){return Math.pow(30*(e-r),2)+Math.pow(59*(t-i),2)+Math.pow(11*(s-n),2)},s.EventEmitter=t,s.inherits=o,s.on=r,s.off=i,s.cancel=n,e.exports=s}).call(function(){return this||("undefined"!=typeof window?window:t)}())}).call(t,function(){return this}())},530:function(e,t,s){function r(e,t,s){var r=new o(e,{origin:"http://www.codecademy.com"}),i=new n(r),l=new a(i,t,s);return l}function i(e,t){this.user=t,this.mgmt=new l(e,t)}var n=s(532),o=s(535),a=s(531),l=s(533);i.prototype.getGodexClient=function(e,t,s){this.mgmt.getInstance(e,function(e,i){if(!i)return void s("Instance does not exist");this._instanceId=i.id;var n="wss",o=r(n+"://"+i.godex_url,i,this.user);o.on("connected",function(){o.authenticate({userToken:this.user.authentication_token,userId:this.user.id,username:this.user.username,instanceId:this.mgmt.instance.id,instanceToken:this.mgmt.instance.token})}.bind(this)),t(null,o)}.bind(this),function(e,t){s(e)})},i.prototype.askForFreshGodexInstance=function(e){this.mgmt.deleteInstance(this._instanceId,e)},e.exports.Manager=i,e.exports.GodexClient=r},531:function(e,t,s){function r(e,t,s){this.client=e,this.instance=t,this.user=s,this.setState("disconnected"),this.client.on("connect",this._connected.bind(this)),this.client.on("close",this._disconnected.bind(this)),this.client.on("error",this.emit.bind("transport:error")),this.client.on("client:event",function(e){this.emit(e.name,e.params)}.bind(this))}var i=s(164),n=s(147),o=s(534);i.inherits(r,n.EventEmitter),r.prototype.setState=function(e){this.state=e},r.prototype.connect=function(){this.client.connect()},r.prototype.lockWorkspace=function(e,t){this.client.send("Method.LockWorkspace",[{Workspace:e}],t)},r.prototype.unlockWorkspace=function(e,t){this.client.send("Method.UnlockWorkspace",[{Workspace:e}],t)},r.prototype._connected=function(){this.setState("connected"),this.emit("connected")},r.prototype.close=function(e,t){this.client.close(e,t)},r.prototype._disconnected=function(){this.setState("disconnected"),this.emit("disconnected")},r.prototype.authenticate=function(e){this.client.send("Method.Authenticate",[e],function(e,t){!e&&t?(this.setState("ready"),this.emit("ready")):(this.setState("unauthorized"),this.emit("unauthorized"))}.bind(this))},r.prototype.createWorkspace=function(e,t){this.client.send("Method.CreateWorkspace",[{Id:e.id,Slug:e.slug,Type:e.type}],t)},r.prototype.getFiles=function(e,t,s){this.client.send("Method.GetFiles",[{Files:t,Workspace:e}],s)},r.prototype.getFilesByNames=function(e,t,s){this.client.send("Method.GetFilesByNames",[{FileNames:t,Workspace:e}],s)},r.prototype.getFile=function(e,t,s,r){this.client.send("Method.GetFile",[{Filename:t,Workspace:e,Encoding:s}],r)},r.prototype.renameFile=function(e,t,s,r){this.client.send("Method.RenameFile",[{Workspace:e,From:t,To:s}],r)},r.prototype.deleteFile=function(e,t,s){this.client.send("Method.DeleteFile",[{Workspace:e,Filename:t}],s)},r.prototype.getListing=function(e,t){this.client.send("Method.GetListing",[{Workspace:e}],t)},r.prototype.updateFiles=function(e,t,s){this.client.send("Method.UpdateFiles",[{Workspace:e,Files:t}],s)},r.prototype.run=function(e,t,s){this.client.send("Method.Run",[{
Workspace:e,File:t}],s)},r.prototype.sct=function(e,t,s){this.client.send("Method.Sct",[{Workspace:e,File:t}],s)},r.prototype.execute=function(e,t,s){this.client.send("Method.Execute",[{Workspace:e,Command:t}],s)},r.prototype.persistWorkspace=function(e,t){this.client.send("Method.PersistWorkspace",[{Workspace:e}],t)},r.prototype.restoreWorkspace=function(e,t,s){this.client.send("Method.RestoreWorkspace",[{Workspace:e,Checkpoint:t}],s)},r.prototype.checkpointWorkspace=function(e,t,s){this.client.send("Method.CheckpointWorkspace",[{Workspace:e,Checkpoint:t}],s)},r.prototype.input=function a(e,a,t){this.client.send("Method.Input",[{Workspace:e,Input:a}],t)},r.prototype.setPtySize=function(e,t,s,r){this.client.send("Method.SetPtySize",[{Id:e,Cols:t,Rows:s}],r)},r.prototype.getPtyFgProcName=function(e,t){this.client.send("Method.GetPtyFgProcName",[{Id:e}],t)},r.prototype.acknowledgeSessionStillAlive=function(e){this.client.send("Method.Alive",[{Alive:!0}],e)},r.prototype.send=function(e,t,s){this.client.send(e,t,s)},r.prototype.spawnPty=function(e,t,s){this.client.send("Method.SpawnPty",[{Workspace:e,Command:t}],function(e,t){if(e)return s(e);var r=new WebSocket(this.client.transport.server+"/pty?id="+t.Id),i=new o(r);i.id=t.Id,i.resize=function(e,s,r){this.setPtySize(t.Id,e,s,r)}.bind(this),i.getFgProcName=function(e){this.getPtyFgProcName(t.Id,e)}.bind(this),i.once("connect",function(){s(null,i)})}.bind(this))},r.prototype.uploadFile=function(e,t){var s=new FormData;e.forEach(function(e){s.append("blob",e.blob,e.filename)});var r=new XMLHttpRequest;return r.open("POST","http://"+this.instance.godex_url+"/upload"),r.setRequestHeader("UserId",this.user.id),r.setRequestHeader("UserAuthToken",this.user.authentication_token),r.setRequestHeader("Workspace",t),r.send(s),r},e.exports=r},532:function(e,t,s){function r(e){this.waiting={},this.rid=0,e.on("message",this.receive.bind(this)),e.on("connect",this.emit.bind(this,"connect")),e.on("close",this.emit.bind(this,"close")),e.on("error",this.emit.bind(this,"error")),this.transport=e}var i=s(164),n=s(147);i.inherits(r,n.EventEmitter),r.prototype.connect=function(){this.transport.connect()},r.prototype.close=function(e,t){this.transport.close(e,t)},r.prototype.send=function(e,t,s){var r=++this.rid,i=JSON.stringify({method:e,params:t,id:r});this.waiting[r]=s,this.transport.send(i)},r.prototype._receive_cb=function(e){return function(t,s){var r=JSON.stringify({id:e,error:s,result:t});this.transport.send(r)}},r.prototype.receive=function(e){try{e=JSON.parse(e)}catch(t){throw new Error("Failed to parse JSON"+e)}if("undefined"!=typeof e.result)"function"==typeof this.waiting[e.id]&&(this.waiting[e.id](e.error,e.result),this.waiting[e.id]=null);else{var s={name:e.event,params:e.params};this.emit("client:event",s,this._receive_cb(e.id).bind(this))}},e.exports=r},533:function(e,t,s){function r(e,t){this.baseUrl=e,this.user=t}var i=s(7),n=s(3);r.prototype.getInstance=function(e,t,s){var r,i;i=e.hasOwnProperty("user_id")&&e.user_id?e.user_id:this.user_id,r=e.hasOwnProperty("id")&&e.id?"/instances/user/"+i+"/workspace_id/"+e.id:"/instances/user/"+i+"/workspace/"+e.slug,this.ajax(r,{type:"GET",success:function(e){this.instance=e,t(null,e)}.bind(this),error:function(e){s(e,null)}.bind(this)})},r.prototype.deleteInstance=function(e,t){this.ajax("/instances/"+e,{type:"DELETE",data:{user_id:this.user.id},error:t.error,success:t.success})},r.prototype.ajax=function(e,t){void 0===t.data&&(t.data={}),t.data=n.extend({user_auth_token:this.user.authentication_token},t.data),t.beforeSend=function(e){e.setRequestHeader("X-User-Id",this.user.id),e.setRequestHeader("X-Auth-Token",this.user.authentication_token)}.bind(this),i.ajax(this.baseUrl+e,t)},e.exports=r},534:function(e,t,s){var r=s(164),i=s(147),n=function(e){var t=this;e.onmessage=function(e){t.emit("data",e.data)},e.onclose=function(e){t.emit("end")},e.onopen=function(e){t.emit("connect")},this.write=function(t){return e.send(t)},this.end=function(){return e.close()}};r.inherits(n,i.EventEmitter),e.exports=n},535:function(e,t,s){function r(e,t){this.server=e,this.socketOptions=t||{}}var i=s(1200),n=s(164),o=s(147);n.inherits(r,o.EventEmitter),r.prototype.connect=function(){this.socket=new i(this.server,null,this.socketOptions),this.socket.onopen=this._onopen.bind(this),this.socket.onmessage=this._onmessage.bind(this),this.socket.onerror=this._onerror.bind(this),this.socket.onclose=this._onclose.bind(this)},r.prototype.close=function(e,t){this.socket.close(e,t)},r.prototype.send=function(e){this.socket.send(e)},r.prototype._onopen=function(e){this.emit("connect")},r.prototype._onmessage=function(e){this.emit("message",e.data)},r.prototype._onerror=function(e){this.emit("error",e)},r.prototype._onclose=function(e){this.emit("close")},e.exports=r},543:function(e,t){"use strict";t.__esModule=!0;var s={value:"",mode:"text/javascript",theme:"cc",lineWrapping:!0,lineNumbers:!0,indentUnit:2,tabSize:2,indentWithTabs:!1,dragDrop:!1,matchTags:{bothTags:!0},matchBrackets:!0,styleActiveLine:!0,foldGutter:!0,foldOptions:{widget:"∙ ∙ ∙"},gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],autoRefresh:!0};t["default"]=s,e.exports=t["default"]},544:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},n=s(3),o=r(n),a=s(1),l=r(a),c=s(14),u=r(c),h=s(257),d=s(1017),f=r(d),p=s(543),m=r(p),g=s(165),v=s(2),y=r(v),_=l["default"].createClass({displayName:"CMEditor",propTypes:{filename:l["default"].PropTypes.string,mode:l["default"].PropTypes.string,content:l["default"].PropTypes.string.isRequired,onChange:l["default"].PropTypes.func,disabled:l["default"].PropTypes.bool,readOnly:l["default"].PropTypes.bool},getDefaultProps:function(){return{readOnly:!1,disabled:!1,content:"",filename:""}},getInitialState:function(){return{editor:null}},componentDidMount:function(){this.showFile()},shouldComponentUpdate:function(e){var t=this.getContent()!==e.content&&this.isClean(),s=this.props.filename!==e.filename;return t||s},componentDidUpdate:function(){this.getContent()!==this.props.content&&this.showFile()},componentWillUnmount:function(){this.destroy()},destroy:function(){if(this.state.editor){var e=this.state.editor.getWrapperElement();e&&e.parentNode.removeChild(e)}},getContent:function(){return o["default"].result(this.state.editor,"getValue")},showFile:function(){var e=u["default"].findDOMNode(this.refs.editorParent);if(e){var t=this.props.mode;t||!this.props.filename||this.props.filename.match(/\.min\./)||(t=g.mimetypeForFilename(this.props.filename));var s=Object.assign({},m["default"],{mode:t,value:this.props.content||"",readOnly:this.props.readOnly}),r=this.state.editor;r?o["default"].isString(this.props.content)&&(r.setOption("mode",t),r.getDoc().setValue(this.props.content),this.markClean(),r.getDoc().clearHistory()):(r=h.codemirror(e,s),r.on("change",o["default"].debounce(this.onChange,200)),this.setState({editor:r}))}},markClean:function(){this.state.editor&&this.state.editor.getDoc().markClean()},isClean:function(){return this.state.editor?this.state.editor.getDoc().isClean():!0},onChange:function(){var e=this.getContent();o["default"].isFunction(this.props.onChange)&&(this.props.onChange(e),this.markClean())},handleClick:function(){var e=this.state.editor;e&&e.focus()},render:function(){var e,t=o["default"].omit(this.props,"onChange","disabled","content"),s=y["default"]((e={},e[f["default"].editor]=!0,e[f["default"].disabled]=this.props.disabled,e[h.theme.defaults]=!0,e[h.theme.cc]=!0,e));return l["default"].createElement("div",i({},t,{className:s,ref:"editorParent",onClick:this.handleClick}))}});t["default"]=_,e.exports=t["default"]},574:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}Object.defineProperty(t,"__esModule",{value:!0});var n=s(1),o=r(n),a=s(362),l=r(a),c=s(2),u=r(c),h=o["default"].createClass({displayName:"ProgressDot",propTypes:{active:o["default"].PropTypes.bool},render:function(){var e,t=(0,u["default"])((e={},i(e,l["default"].dot,!0),i(e,l["default"].dotActive,this.props.active),e));return o["default"].createElement("div",{className:t})}});t["default"]=h},575:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(1),n=r(i),o=s(362),a=r(o),l=s(574),c=r(l),u=void 0,h=n["default"].createClass({displayName:"ProgressElipse",getInitialState:function(){return{activeDot:0}},componentDidMount:function(){u=setInterval(this.changeDot,300)},componentWillUnmount:function(){clearInterval(u)},changeDot:function(){var e=this.state.activeDot;2===e?this.setState({activeDot:0}):(e++,this.setState({activeDot:e}))},render:function(){return n["default"].createElement("div",{className:a["default"].progressElipse},n["default"].createElement(c["default"],{active:0===this.state.activeDot}),n["default"].createElement(c["default"],{active:1===this.state.activeDot}),n["default"].createElement(c["default"],{active:2===this.state.activeDot}))}});t["default"]=h},578:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){var s={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(s[r]=e[r]);return s}Object.defineProperty(t,"__esModule",{value:!0});var n=s(1),o=r(n),a=s(2),l=r(a);t["default"]=o["default"].createClass({displayName:"tabbed_views",getInitialState:function(){return{activeIndex:this.props.startIndex}},componentDidUpdate:function(e,t){t.activeIndex!==this.state.activeIndex&&this.props.onChange&&this.props.onChange(t.activeIndex,this.state.activeIndex)},setActiveTab:function(e){this.setState({activeIndex:e})},render:function(){var e=this.props,t=(e.onChange,i(e,["onChange"])),s=[],r=[];return this.props.headings.forEach(function(e,t){var i=(0,l["default"])({"tabbed-view__button":!0,"tabbed-view__button--active":t===this.state.activeIndex}),n=this.setActiveTab.bind(this,t);s.push(o["default"].createElement("div",{className:i,onClick:n},e)),r.push(o["default"].createElement("div",null,this.props.contents[t]))},this),o["default"].createElement("div",t,o["default"].createElement("article",{className:"fit-full tabbed-view__header-article"},o["default"].createElement("div",{className:"grid-row tabbed-view__header"},o["default"].createElement("div",{className:"grid-col-12 grid-col--center grid-col--no-spacing"},o["default"].createElement("div",{className:"tabbed-view__tabs"},s)))),o["default"].createElement("article",{className:"fit-full tabbed-view__content-article"},o["default"].createElement("div",{className:"grid-row"},o["default"].createElement("div",{className:"grid-col-12 grid-col--no-spacing"},o["default"].createElement("div",null,r[this.state.activeIndex])))))}})},579:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(1),n=r(i),o=s(30),a=r(o);t["default"]=n["default"].createClass({displayName:"view_more",mixins:[a["default"]],propTypes:{defaultExpanded:n["default"].PropTypes.bool,expandText:n["default"].PropTypes.string,closeText:n["default"].PropTypes.string,children:n["default"].PropTypes.oneOf(n["default"].PropTypes.element,n["default"].PropTypes.array)},getInitialState:function(){return{expanded:!!this.props.defaultExpanded}},getDefaultProps:function(){return{defaultExpanded:!1,expandText:"",closeText:""}},toggle:function(){this.setState({expanded:!this.state.expanded})},getIcon:function(){return this.state.expanded?n["default"].createElement("span",{className:"fcn-icon fcn-icon-arrowDropdownUp"}):n["default"].createElement("span",{className:"fcn-icon fcn-icon-arrowDropdown"})},getControlText:function(){return this.state.expanded?this.props.closeText:this.props.expandText},render:function(){return n["default"].createElement("span",{className:"view-more"},n["default"].createElement("span",{onClick:this.toggle,className:"view-more__text"}," ",this.getControlText()),n["default"].createElement("span",{onClick:this.toggle,className:"view-more__toggle"},this.getIcon()),this.state.expanded?this.props.children:null)}})},586:function(e,t){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,s,r){return s&&e(t.prototype,s),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){s(this,e),this._locking=Promise.resolve(),this._locked=!1}return r(e,[{key:"isLocked",value:function(){return this._locked}},{key:"lock",value:function(){var e=this;this._locked=!0;var t=void 0,s=new Promise(function(e){return t=e});s.then(function(){return e._locked=!1});var r=this._locking.then(function(){return t});return this._locking=this._locking.then(function(){return s}),r}}]),e}();t["default"]=i},587:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){if(/^http.*/.test(e)){var t=new h["default"](e),s=t.host()+":"+t.port();return/localhost/.test(e)&&s!==window.location.host?{type:"local",src:t.path()}:{type:"external",src:e}}return{type:"local",src:e}}function n(e,t){var s=(arguments.length<=2||void 0===arguments[2]?{}:arguments[2],e.getFile(t)),r=s.content,n=function m(t){if(Array.isArray(t))return t.map(m).join("");if(!t)return"";switch("script"===t.type&&(t.type="tag"),t.type){case"tag":if("link"===t.name||"script"===t.name){var s=void 0;if("script"===t.name?s=i(t.attribs.src):"link"===t.name&&(s=i(t.attribs.href)),!s)return console.warn("Cannot parse src for file:",t),"";if("local"===s.type){var r=e.getFile(s.src);if(!r)return console.warn("Cannot find local file:",s.src),"";if("script"===t.name)return'<script type="text/javascript">\n(function() {'+r.content+"})();\n</script>";if("link"===t.name)return"<style>\n"+r.content+"\n</style>"}}return d[t.name]?"<"+t.raw+">":"<"+t.raw+">"+m(t.children)+"</"+t.name+">";case"directive":return"<"+t.raw+">";case"comment":return"<!--"+t.raw+"-->";default:return t.raw}},o=function(e){return c["default"].map(e,function(e,t){return t+'="'+e+'"'}).join(" ")},l=f.map(function(e){var t='script src="'+e+'"';return{raw:t,data:t,type:"script",name:"script",attribs:{src:e}}}),u=null,h=new a["default"].DefaultHandler(function(e,t){if(e)throw e;var s=a["default"].DomUtils.getElements({tag_type:"directive"},t);s.length&&s.filter(function(e){return!!e.name.match(/!DOCTYPE/i)}).length||t.unshift({raw:"!DOCTYPE html",data:"!DOCTYPE html",type:"directive",name:"!DOCTYPE"});var r,i;if(s=a["default"].DomUtils.getElements({tag_name:"html"},t),s.length)r=s[0],Array.isArray(r.children)||(r.children=[]);else{var h=[];i=t.filter(function(e){return"directive"===e.type||"comment"===e.type?(h.push(e),!1):!0}),r={raw:"html",data:"html",type:"tag",name:"html",attribs:{},children:i},h.push(r),t=h}s=a["default"].DomUtils.getElements({tag_name:"head"},t);var d;s.length?d=s[0]:(d={raw:"head",data:"head",type:"tag",name:"head",attribs:{},children:[]},r.children.unshift(d)),s=a["default"].DomUtils.getElements({tag_name:"body"},t);var f;if(s.length)f=s[0];else{var p=[];i=r.children.filter(function(e,t){return"directive"!==e.type&&"head"!==e.name&&"html"!==e.name?(p.push(t),!0):!1}),r.children=r.children.filter(function(e){return-1===i.indexOf(e)}),f={raw:"body",data:"body",type:"tag",name:"body",attribs:{},children:i},r.children.push(f)}d.children=d.children.concat(l);var m={},g={};a["default"].DomUtils.getElements({tag_name:"link",rel:"stylesheet",href:function(e){return void 0!==m[e]}},t).forEach(function(e){var t=m[e.attribs.href];c["default"].extend(e,{raw:"style",data:"style",type:"tag",name:"style",attribs:{},children:[{raw:t,data:t,type:"text"}]})}),a["default"].DomUtils.getElements({tag_name:"script",src:function(e){return void 0!==g[e]}},t).forEach(function(e){var t=g[e.attribs.src];delete e.attribs.src;var s="script "+o(e.attribs);c["default"].extend(e,{raw:s,data:s,children:[{raw:t,data:t,type:"text"}]})}),a["default"].DomUtils.getElements({tag_name:"script"},t).forEach(function(e){if(!e.attribs||!e.attribs.src){e.attribs||(e.attribs={}),e.attribs.defer="";var t="script "+o(e.attribs);c["default"].extend(e,{raw:t,data:t})}}),u=n(t)}),p=new a["default"].Parser(h);return p.parseComplete(r),u}Object.defineProperty(t,"__esModule",{value:!0});var o=s(527),a=r(o),l=s(3),c=r(l),u=s(83),h=r(u),d=a["default"].DefaultHandler._emptyTags,f=[],p=window.location.protocol+"//"+window.location.host;CCDATA.assets_compiled?(f.push(p+"/assets/relay.js"),f.push(p+"/assets/web_libs.js?v5")):(f.push(p+"/assets/env/external/relay.js"),f.push(p+"/assets/env/luke.min.js"),f.push(p+"/assets/env/runner.js")),t["default"]=n},592:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(5),n=r(i);t["default"]=n["default"].createActions(["startLockTimer"])},615:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(1),n=r(i),o=s(78),a=r(o),l=s(578),c=r(l),u=s(20),h=r(u),d=s(27),f=r(d),p=s(265),m=r(p),g=s(26),v=r(g);s(993);var y=n["default"].createClass({displayName:"AnonymousUserWall",propTypes:{signUpForm:n["default"].PropTypes.string,signInForm:n["default"].PropTypes.string},render:function(){var e=this;return n["default"].createElement(a["default"],{padding:!1,overlayType:"transparent",width:"350px",height:"500px"},n["default"].createElement(c["default"],{className:"anonymous-user-wall",ref:"tabbedView",headings:["Sign Up","Sign In"],contents:[n["default"].createElement("div",{style:{textAlign:"left"},dangerouslySetInnerHTML:{__html:this.props.signUpForm}}),n["default"].createElement("div",{style:{textAlign:"left"},dangerouslySetInnerHTML:{__html:this.props.signInForm}})],startIndex:0,onChange:function(t,s){0===s&&e.renderRecaptcha();var r=new v["default"]({LoginRegistrationForms:m["default"]});r.mountReactComponents()}}))},componentDidMount:function(){var e=this,t=0,s=setInterval(function(){window.grecaptcha?(clearInterval(s),e.renderRecaptcha()):t>30?(clearInterval(s),h["default"].increment("recaptcha.render.failure"),f["default"].error({message:"Recaptcha render failed; grecaptcha not defined"},"javascript_errors")):t++},500),r=new v["default"]({LoginRegistrationForms:m["default"]});r.mountReactComponents()},renderRecaptcha:function(){window.grecaptcha&&setTimeout(function(){window.grecaptcha.render(document.querySelector(".js-sign-up-captcha"),{sitekey:"6LeYzQcTAAAAAAqXDQ36Gcb2JKhONzxPRfDOiLE7"}),h["default"].increment("recaptcha.render.success")},200)}});t["default"]=y},616:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(1),n=r(i),o=n["default"].createClass({displayName:"GetAnswerContent",propTypes:{keepTrying:n["default"].PropTypes.func.isRequired,showAnswer:n["default"].PropTypes.func.isRequired},render:function(){return n["default"].createElement("div",{className:"editor-tooltips"},n["default"].createElement("h3",null,"Having Trouble?"),n["default"].createElement("a",{className:"button button--secondary editor-tooltips__button",onClick:this.props.keepTrying},"Keep Trying"),n["default"].createElement("a",{className:"button button--secondary button--alternate editor-tooltips__button",onClick:this.props.showAnswer},"Get Code"))}});t["default"]=o},617:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(3),n=r(i),o=s(1),a=r(o),l=s(5),c=r(l),u=s(15),h=r(u),d=s(2),f=r(d),p=s(32),m=s(39),g=r(m),v=s(717),y=r(v),_=s(172),b=r(_),k=s(185),w=r(k),x=s(286),T=r(x),S=s(184),C=r(S),E=s(544),P=r(E),M=s(633),N=r(M),F=s(631),O=r(F),A=s(284),I=r(A),L=s(9),j=r(L),R=s(616),D=r(R),B=s(100),U=r(B),W=s(188),q=r(W),$=s(62),H=r($),z=s(735),G=r(z),K=s(308),Q=r(K),V=s(16),J=r(V),Y=s(52),X=r(Y);s(130);var Z=s(77),ee=r(Z),te=s(72),se=s(309),re=r(se),ie=s(89),ne=r(ie),oe=s(266),ae=r(oe),le=a["default"].createClass({displayName:"CodeEditor",propTypes:{presenter:a["default"].PropTypes.object.isRequired,geometry:a["default"].PropTypes.object.isRequired,modifiers:a["default"].PropTypes.object.isRequired,helpers:a["default"].PropTypes.object.isRequired,broadcast:a["default"].PropTypes.func.isRequired,user:a["default"].PropTypes.object},mixins:[y["default"],g["default"],c["default"].connect(q["default"],"currentFiles"),c["default"].listenTo(G["default"],"setOrphans"),h["default"].connect(Q["default"],"peers"),c["default"].listenTo(re["default"],"setLock")],getInitialState:function(){return{currentFiles:{files:[],active:null},pairingAvailable:!1,locked:!1,lockedByLocal:!1,hasTyped:!1,orphans:[],dimensions:{width:this.props.geometry.width(),height:this.props.geometry.height()}}},toggleLock:function(){this.state.lockedByLocal?this.unlockInterface():this.lockInterface()},lockInterface:function(){J["default"].lock()},setLock:function(e){this.setState({locked:e.lock.locked,lockedByLocal:e.lock.owner===j["default"].get("username")})},componentWillMount:function(){var e=this;ee["default"]&&((0,ee["default"])("onShow",function(){e.setState({intercomOpen:!0})}),(0,ee["default"])("onHide",function(){e.setState({intercomOpen:!1})}))},normalizeFileKeys:function(e){var t=[];return e.forEach(function(e){var s={};s.name=e.filename,s.type=e.type,t.push(s)}),t},setOrphans:function(e){e.length>this.state.orphans.length&&(this.setState({orphans:e}),"artursapek"!==j["default"].get("username")&&this.props.broadcast("openMissingFilesDialog",e[0]))},onSubmitEvent:function(e){e.preventDefault(),this.state.running||this.submitClick()},onKeyUp:function(){!this.state.lockedByLocal&&!this.state.locked&&this.state.peers.length>1&&this.props.modifiers.features.collaboration&&this.lockInterface()},onModelChanged:function(e){var t=this;H["default"].updateCurrentFile(e).then(function(){t.state.locked&&X["default"].refresh()}),this.state.hasTyped||this.setState({hasTyped:!0})},submitClick:function(){var e=this;this.state.offerAnswer&&this.props.broadcast("keepTrying"),this.setState({offerAnswer:!1,hasTyped:!1}),this.setState({running:!0}),this.props.broadcast("updateFiles"),H["default"].saveFiles().then(function(){e.props.broadcast("submit"),e.setState({running:!1})})["catch"](function(){e.props.broadcast("submit"),e.setState({running:!1})})},folderClick:function(e,t){t.preventDefault(),this.props.broadcast("showFileNav",this.props.presenter.files)},onEditorFocus:function(){this.state.offerAnswer&&(this.props.broadcast("keepTrying"),this.setState({offerAnswer:!1}))},updateTree:function(){this.props.broadcast("getFileTree")},offerAnswer:function(){this.setState({offerAnswer:!0})},_renderHeader:function(){return a["default"].createElement("div",{className:"fcn-component-header"},this._renderTabs())},_renderEditor:function(){var e="";return this.state.currentFiles.files.length>0&&(e=this.state.currentFiles.files[this.state.currentFiles.active].content),a["default"].createElement("div",{className:(0,f["default"])({"editor-container":"true","editor-container--disabled":this.state.locked&&!this.state.lockedByLocal})},a["default"].createElement(P["default"],{disabled:this.state.locked&&!this.state.lockedByLocal,readOnly:this.state.locked&&!this.state.lockedByLocal,onFocus:this.onEditorFocus,onChange:this.onModelChanged,content:e,filename:this.state.currentFiles.files[this.state.currentFiles.active].name}))},_renderFooter:function(){return a["default"].createElement("div",{className:"editor-footer-container"},a["default"].createElement("div",{className:"editor-footer"},a["default"].createElement("div",{className:"fcn-tabs-container"},this._renderFooterButtons())))},_renderFooterButtons:function(){var e=this,t=this.state.running||-1===!this.state.currentFiles.active||this.state.locked,s=function(){e.setState({offerAnswer:!1}),e.props.broadcast("keepTrying")},r=function(){e.setState({offerAnswer:!1}),e.props.broadcast("showAnswer")},i=this.props.modifiers.isProject?(0,p.t)("views.learning_environment.components.code_editor.save"):(0,p.t)("views.learning_environment.components.code_editor.run"),o=n["default"].get(window,"CCDATA.current_user.pro"),l=!this.props.modifiers.features.collaboration&&o,c=this.props.modifiers.features.collaboration&&o,u={opacity:[1,0],marginTop:[0,30]},h=null;this.state.offerAnswer&&(h=a["default"].createElement(b["default"],{position:"left",arrowPosition:"left"},a["default"].createElement(D["default"],{keepTrying:s,showAnswer:r})));var d=a["default"].createElement("div",{className:"editor-footer__buttons"},h,a["default"].createElement(ne["default"],{theme:"lantern",go:!t&&this.state.hasTyped,disabled:t,onClick:this.state.running?null:this.submitClick,style:{minWidth:80},ref:"runButton"},this.state.running?a["default"].createElement("div",{className:"fcn-spinner"}):i),l?a["default"].createElement(N["default"],{files:this.state.currentFiles.files}):null,a["default"].createElement("div",{className:"peer-controls"},c?a["default"].createElement(te.VelocityComponent,{animation:u,leave:u,duration:500,runOnMount:!0},a["default"].createElement(O["default"],{intercomOpen:this.state.intercomOpen})):null));return d},_renderTabs:function(){var e=this,t=[];return this.state.currentFiles.files&&this.state.currentFiles.files.length>0&&this.state.currentFiles.files.forEach(function(s,r){if(!s.isDir){var i=e.state.currentFiles.active===r,n="100.0"/e.state.currentFiles.files.length,o=s.name.split("/"),l=o[o.length-1],c=s.name;t.push(a["default"].createElement(C["default"],{title:l,key:"codeEditorTab-"+c,isActive:i,tabId:r,locked:e.state.locked,size:n,canClose:!e.props.presenter.navigator_disabled,clickHandler:H["default"].setCurrentOpenFile,closeHandler:H["default"].closeFile}))}}),a["default"].createElement(T["default"],null,this._renderFileControls(),t,a["default"].createElement(C["default"],{className:"fcn-control","data-cue":"discovery-fullscreen",clickHandler:this.props.helpers.toggleFullscreen,canClose:!1,overflow:!1,isControl:!0,align:"right"},a["default"].createElement(ae["default"],{name:"fullscreen"})))},_renderFileControls:function(){return this.props.presenter.navigator_disabled?null:[a["default"].createElement(C["default"],{className:"fcn-control",clickHandler:this.folderClick,overflow:!1,isControl:!0,tabId:"folderControl"},a["default"].createElement(ae["default"],{name:"folder"}))]},_renderPlaceholder:function(){return a["default"].createElement("div",{className:"fcn-code-editor__placeholder"},a["default"].createElement("div",{className:"fcn-code-editor__placeholder__icon"},a["default"].createElement(ae["default"],{name:"file-alt",size:3})),a["default"].createElement("div",null,"Code Editor"),a["default"].createElement("div",null,"Open files here to edit them"))},activeFile:function(){return null!==this.state.currentFiles.active?this.state.currentFiles.files[this.state.currentFiles.active]:void 0},reloadFile:function(e){if(this.state.currentFiles.files){var t=this.state.currentFiles.files.map(function(e){return e.path});if(t.indexOf(e)>-1){var s=U["default"].contentEncoding(U["default"].extname(e));H["default"].reloadFile(e,s)}}},render:function(){var e=(0,f["default"])({editor:!0,"editor--empty":-1===!this.state.currentFiles.active});return a["default"].createElement("div",{onKeyUp:this.onKeyUp,className:e},this._renderHeader(),a["default"].createElement(I["default"],{useForComponent:!0,callBack:this.submitClick}),this.state.currentFiles.files.length>0?this._renderEditor():this._renderPlaceholder(),this._renderFooter(),a["default"].createElement(w["default"],this.props.presenter.errors))}});t["default"]=le},618:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(9),n=(r(i),s(1)),o=r(n),a=s(2),l=r(a),c=s(5),u=r(c),h=s(127),d=r(h),f=s(734),p=r(f),m=o["default"].createClass({displayName:"DiscoveryCue",mixins:[u["default"].listenTo(p["default"],"onInterfaceChange")],propTypes:{cue:o["default"].PropTypes.shape({target:o["default"].PropTypes.string.isRequired,orientation_special:o["default"].PropTypes.string,content:o["default"].PropTypes.string.isRequired})},getInitialState:function(){var e=30;return{hidden:!1,targetLeft:void 0,targetTop:void 0,targetWidth:void 0,MIDDLE_OFFSET:e}},onInterfaceChange:function(){this.reposition()},reposition:function(){var e=document.querySelector('[data-cue="'+this.props.cue.target+'"]'),t=document.getElementById("workspace");if(e&&t&&e.clientWidth>0){var s=e.getBoundingClientRect(),r=document.getElementById("workspace").clientWidth,i=document.getElementById("workspace").clientHeight;this.setState({hidden:!1,targetWidth:s.width,targetLeft:s.left-10,targetTop:s.top-10,workspaceWidth:r,workspaceHeight:i})}else this.setState({hidden:!0})},componentDidUpdate:function(e){void 0!==this.state.targetLeft||this.state.hidden||this.reposition()},onMouseOver:function(e,t){var s=document.getElementById("workspace").getBoundingClientRect(),r=(e.clientX-s.left,e.clientY-s.top,s.width),i=s.height,n=this.state.targetTop/i>.5?"above":"below",o=this.state.targetLeft/r>.5?"left":"right";this.setState({orientation:o+"-"+n})},_cueClick:function(){d["default"].cueSeen(this.props.cue.target)},render:function(){var e=(0,l["default"])({"discovery-cue__arrow":!0,"discovery-cue__arrow--bottom-left":"right-above"===this.state.orientation,"discovery-cue__arrow--top-left":"right-below"===this.state.orientation,"discovery-cue__arrow--bottom-right":"left-above"===this.state.orientation,"discovery-cue__arrow--top-right":"left-below"===this.state.orientation}),t=(0,l["default"])({"discovery-cue":!0,"discovery-cue--hidden":this.state.hidden||void 0===this.state.targetLeft||void 0===this.state.targetTop||void 0===this.state.targetWidth}),s=(0,l["default"])({"discovery-cue--content-container":!0,"discovery-cue--top-right":"right-above"===this.state.orientation,"discovery-cue--bottom-left":"left-below"===this.state.orientation,"discovery-cue--bottom-right":"right-below"===this.state.orientation,"discovery-cue--top-left":"left-above"===this.state.orientation}),r=this.state.targetLeft/this.state.workspaceWidth*100,i=this.state.targetTop/this.state.workspaceHeight*100;this.state.targetWidth/this.state.workspaceWidth*100;"middle-edge"===this.props.cue.orientation_special&&(i+=this.state.MIDDLE_OFFSET);var n={left:r+"%",top:i+"%"};return o["default"].createElement("div",{className:t,style:n,onClick:this._cueClick,onMouseOver:this.onMouseOver},o["default"].createElement("div",{className:s},o["default"].createElement("div",{className:e}),o["default"].createElement("p",{className:"discovery-cue--content"},this.props.cue.content)),o["default"].createElement("div",{className:"pulse"}))}});t["default"]=m},619:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(1),n=r(i),o=s(39),a=r(o),l=s(2),c=(r(l),s(63)),u=r(c),h=s(32),d=n["default"].createClass({displayName:"Navigation",propTypes:{navigate:n["default"].PropTypes.func.isRequired,currentLessonIndex:n["default"].PropTypes.number.isRequired,currentExerciseIndex:n["default"].PropTypes.number.isRequired,farthestCompleteExerciseIndex:n["default"].PropTypes.number,course:n["default"].PropTypes.object.isRequired,mayProceed:n["default"].PropTypes.bool.isRequired},mixins:[a["default"]],getInitialState:function(){var e=this.getMilestones();return{lessonBeginnings:e.lessonBeginnings,exerciseCount:e.exerciseCount}},onNextEvent:function(){this.next()},onPreviousEvent:function(){
this.previous()},next:function(){this.props.mayProceed&&this.props.navigate(this.props.currentLessonIndex,this.props.currentExerciseIndex+1)},previous:function(){0!==this.percentageOfCurrent()&&this.props.navigate(this.props.currentLessonIndex,this.props.currentExerciseIndex-1)},isLastLesson:function(){return this.props.currentLessonIndex===this.props.course.lessons_order.length-1},isLastExerciseInLesson:function(){return this.props.currentExerciseIndex+1===this.currentLessonExerciseCount()},isLastExerciseInCourse:function(){return this.isLastLesson()&&this.isLastExerciseInLesson()},nextButtonText:function(){return this.isLastExerciseInLesson()?(0,h.t)("views.learning_environment.components.exercise_navigation.up_next"):(0,h.t)("views.learning_environment.components.exercise_navigation.next")},getMilestones:function(){var e=[],t={lessonBeginnings:[],exerciseCount:0};return this.props.course.lessons_order.forEach(function(s){var r=this.props.course.lessons[s];t.lessonBeginnings.push(e.length),r.exercises_order.forEach(function(t){var s=r.exercises[t];e.push(s)})}.bind(this)),t.exerciseCount=e.length,t},percentageOfCurrent:function(){return(this.state.lessonBeginnings[this.props.currentLessonIndex]+this.props.currentExerciseIndex)/this.state.exerciseCount},currentLessonExerciseCount:function(){var e=this.state.lessonBeginnings,t=this.props.currentLessonIndex+1;return e.length===t?this.state.exerciseCount-e[this.props.currentLessonIndex]:e[t]-e[this.props.currentLessonIndex]},render:function(){var e=this.percentageOfCurrent(),t=this.props.mayProceed?"lantern--go":"everyday";return n["default"].createElement("div",{className:"fcn-nav-wrapper"},n["default"].createElement("div",{className:"fcn-nav-wrapper__center fcn-progress-container"},n["default"].createElement(u["default"],{type:"everyday",inactive:0===e,onClick:this.previous},(0,h.t)("views.learning_environment.components.exercise_navigation.back")),n["default"].createElement("div",{className:"fnc-nav__exercise-count"},this.props.currentExerciseIndex+1+"/"+this.currentLessonExerciseCount()),n["default"].createElement(u["default"],{id:"discovery-next",type:t,inactive:!this.props.mayProceed,onClick:this.next},this.nextButtonText())))}});t["default"]=d},626:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(1),n=r(i),o=s(2),a=r(o),l=s(7),c=r(l),u=s(175),h=r(u),d=s(269),f=r(d),p=s(33),m=r(p);s(22),t["default"]=n["default"].createClass({displayName:"god_mode",propTypes:{setProgressToCurrentExercise:n["default"].PropTypes.func,uploadInitialSavepoint:n["default"].PropTypes.func.isRequired,prerender:n["default"].PropTypes.object,currentWorkspace:n["default"].PropTypes.object,contentStudioURL:n["default"].PropTypes.string,isAdmin:n["default"].PropTypes.bool,nolock:n["default"].PropTypes.bool.isRequired,uploadSavepoints:n["default"].PropTypes.bool.isRequired},getInitialState:function(){return{open:!1,popoverActive:!1}},setPopoverStatus:function(e){this.setState({popoverActive:e})},releaseTerminalFormRender:function(){var e=CCDATA.current_user.authentication_token,t=CCDATA.current_user._id;return n["default"].createElement("form",{method:"post",action:"/admin/management_service/release_terminal",name:"release_terminal"},n["default"].createElement("input",{type:"hidden",name:"authenticity_token",value:e}),n["default"].createElement("input",{type:"hidden",name:"id",value:t}),n["default"].createElement("input",{type:"hidden",name:"content[reset_progress]",value:"1"}),n["default"].createElement("input",{type:"hidden",name:"content[skill_slug]",value:this.props.currentWorkspace.slug}))},deleteWorkspaceFormRender:function(){var e=CCDATA.current_user.authentication_token,t=CCDATA.current_user._id;return n["default"].createElement("form",{method:"post",action:"/admin/management_service/delete_workspace",name:"delete_workspace"},n["default"].createElement("input",{type:"hidden",name:"authenticity_token",value:e}),n["default"].createElement("input",{type:"hidden",name:"id",value:t}),n["default"].createElement("input",{type:"hidden",name:"workspace_slug",value:this.props.currentWorkspace.slug}))},releaseTerminal:function(){var e=(0,c["default"])('form[name="release_terminal"]');e.submit()},deleteWorkspace:function(){var e=(0,c["default"])('form[name="delete_workspace"]');e.submit()},render:function(){var e=this,t=void 0;try{t=m["default"].state.client.instance.hostname}catch(s){}var r=n["default"].createElement("div",{className:(0,a["default"])({"fcn-godmode__button":!0,"fcn-godmode__button--active":this.state.popoverActive,"fcn-godmode__button--allow-navigation":this.props.nolock})},n["default"].createElement("span",{className:"new-cc-icon icon-gear icon--"}));return n["default"].createElement(f["default"],{className:"fcn-godmode",clickTarget:r,showNipple:!1,popoverOffset:0,onToggle:this.setPopoverStatus},n["default"].createElement("div",{className:(0,a["default"])({"fcn-godmode__menu":!0})},n["default"].createElement("div",{className:"godmode-title"},n["default"].createElement("h5",null,"Content Tools & Progress")),n["default"].createElement("div",null,n["default"].createElement("button",{onClick:function(){window.location.href=e.props.contentStudioURL},className:"button",title:"Use Content Studio to edit this exercise or project."},"Edit in Content Studio")),void 0===this.props.setProgressToCurrentExercise?null:n["default"].createElement("div",null,n["default"].createElement("button",{onClick:this.props.setProgressToCurrentExercise,className:"button",title:"Changes your progress to this exercise, but does not change your Workspace. To do that, use 'Reset Exercise'."},"Set Progress to This Exercise")),n["default"].createElement("div",{title:"Unlock navigation to move freely through the course, even if you haven't completed the exercises."},n["default"].createElement("label",{htmlFor:"nolockCheckbox"},"Allow All Navigation"),n["default"].createElement("div",{className:"godmode__checkbox"},n["default"].createElement("input",{type:"checkbox",onChange:function(e){h["default"].adminChange("nolock",e.target.checked)},defaultChecked:this.props.nolock,id:"nolockCheckbox"}),n["default"].createElement("label",{htmlFor:"nolockCheckbox"}))),n["default"].createElement("div",{className:"godmode-title"},n["default"].createElement("h5",null,"Workspace Tools")),n["default"].createElement("div",null,n["default"].createElement("button",{onClick:this.releaseTerminal,className:"button",title:"Click to get a fresh Terminal box. Useful when you want to test Workspace content changes."},"Get New Godex Instance ",this.releaseTerminalFormRender())),n["default"].createElement("div",null,n["default"].createElement("button",{onClick:this.deleteWorkspace,className:"button",title:"Click to delete all files and get new ones. Useful when you want to test Workspace content changes."},"Delete Workspace ",this.deleteWorkspaceFormRender())),n["default"].createElement("div",{className:"godmode-title",title:"Lakitu is used to create 'safe' states of the application that users can call for if they mess their Workspace up. These states are called Savepoints."},n["default"].createElement("h5",null,"Lakitu")),this.props.isAdmin?n["default"].createElement("div",null,n["default"].createElement("button",{onClick:this.props.uploadInitialSavepoint,className:"button",title:"Useful for creating Savepoints in Projects or in the first exercise of a topic/lesson."},"Upload Initial Savepoint")):void 0,this.props.isAdmin?n["default"].createElement("div",{title:"Automatically creates Savepoints when you land on an exercise or when you pass all Checkpoints."},n["default"].createElement("label",{htmlFor:"savepointCheckbox"},"Upload Savepoints"),n["default"].createElement("div",{className:"godmode__checkbox"},n["default"].createElement("input",{type:"checkbox",onChange:function(e){h["default"].adminChange("uploadSavepoints",e.target.checked)},defaultChecked:this.props.uploadSavepoints,id:"savepointCheckbox"}),n["default"].createElement("label",{htmlFor:"savepointCheckbox"}))):void 0,n["default"].createElement("div",{className:"godmode-title",title:"Useful information for QA/Engineering purposes."},n["default"].createElement("h5",null,"Metadata")),n["default"].createElement("div",{className:"godmode__metadata"},void 0===this.props.currentWorkspace?void 0:n["default"].createElement("div",null,n["default"].createElement("p",null,"Workspace:"),n["default"].createElement("p",null,this.props.currentWorkspace.slug)),void 0===t?void 0:n["default"].createElement("div",null,n["default"].createElement("p",null,"Instance:"),n["default"].createElement("p",null,n["default"].createElement("a",{href:"http://"+t+".terminal.com",target:"_blank"},t))),this.props.prerender?n["default"].createElement("div",{id:"godmode__render-info"},n["default"].createElement("p",null,"Render Time:"),n["default"].createElement("p",null,Math.ceil(this.props.prerender.duration),"ms (",this.props.prerender.hostname,")")):null)))}})},627:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}Object.defineProperty(t,"__esModule",{value:!0});var n=s(1),o=r(n),a=s(999),l=r(a),c=s(2),u=r(c),h=s(103),d=r(h),f=s(76),p=r(f),m=o["default"].createClass({displayName:"Hint",propTypes:{hint:o["default"].PropTypes.string.isRequired},getInitialState:function(){return{showHint:!1,hint:(0,d["default"])(this.props.hint)}},toggleHint:function(){this.setState({showHint:!this.state.showHint})},render:function(){var e,t=(0,u["default"])((e={},i(e,l["default"].hintBody,!0),i(e,l["default"].hintBodyShown,this.state.showHint),e)),s=(0,u["default"])(i({"fcn-icon":!0,"fcn-icon-arrowDropdown":!this.state.showHint,"fcn-icon-arrowDropdownUp":this.state.showHint},l["default"].toggleArrow,!0)),r=(0,u["default"])(i({"fcn-icon":!0,"fcn-icon-supportFilled":!0},l["default"].hintHeaderIcon,!0));return o["default"].createElement("div",{className:l["default"].hint},o["default"].createElement(p["default"],{dontTrack:this.state.showHint,category:"user",linkContentTarget:"hint"},o["default"].createElement("div",{className:l["default"].hintHeader,onClick:this.toggleHint},o["default"].createElement("span",{className:l["default"].hintHeaderText},o["default"].createElement("span",{className:r}),this.state.showHint?"Hint":"Stuck? Get a hint"),o["default"].createElement("span",{className:s}))),o["default"].createElement("div",{className:t,dangerouslySetInnerHTML:{__html:this.state.hint}}))}});t["default"]=m},628:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}Object.defineProperty(t,"__esModule",{value:!0});var n=s(1),o=r(n),a=s(1e3),l=r(a),c=s(575),u=r(c),h=s(16),d=r(h),f=s(629),p=r(f),m=s(2),g=r(m),v=o["default"].createClass({displayName:"Peer",propTypes:{status:o["default"].PropTypes.string,icon:o["default"].PropTypes.string,callBack:o["default"].PropTypes.func,useForSelf:o["default"].PropTypes.bool,useForComponent:o["default"].PropTypes.bool},onDoneEditing:function(){this.props.callBack(),d["default"].unlock()},renderSleeve:function(){var e,t=(0,g["default"])(i({"fcn-button":!0},l["default"].doneBtn,!0)),s=(0,g["default"])((e={},i(e,l["default"].sleeve,!0),i(e,l["default"].useElipse,!this.props.useForSelf),e));return this.props.useForSelf?o["default"].createElement("div",{className:s},o["default"].createElement(p["default"],null),o["default"].createElement("div",{className:t,onClick:this.onDoneEditing},"DONE")):this.props.useForComponent?o["default"].createElement("div",{className:s},o["default"].createElement(p["default"],null),o["default"].createElement(u["default"],null)):void 0},render:function(){var e,t=(0,g["default"])((e={},i(e,l["default"].peer,!0),i(e,l["default"].useForComponent,this.props.useForComponent),e));return o["default"].createElement("div",{className:t},o["default"].createElement("div",{className:l["default"].userIcon},o["default"].createElement("img",{src:this.props.icon})),this.renderSleeve())}});t["default"]=v},629:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(1),n=r(i),o=s(1001),a=r(o),l=s(738),c=r(l),u=s(15),h=r(u),d=n["default"].createClass({displayName:"PeerStatus",mixins:[h["default"].connect(c["default"],"status"),h["default"].connect(c["default"],"userName")],render:function(){return n["default"].createElement("span",{className:a["default"].PeerStatus},this.state.userName+" "+this.state.status)}});t["default"]=d},630:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(3),n=r(i),o=s(1),a=r(o),l=s(63),c=r(l),u=s(282),h=s(294),d=r(h),f=s(172),p=r(f),m=s(182),g=r(m),v=a["default"].createClass({displayName:"ProjectsFooter",propTypes:{course:a["default"].PropTypes.object,initialUnit:a["default"].PropTypes.string,initialLesson:a["default"].PropTypes.string,initialExercise:a["default"].PropTypes.string,disabled:a["default"].PropTypes.bool,backPath:a["default"].PropTypes.string.isRequired,skillTitle:a["default"].PropTypes.string.isRequired,courseSlug:a["default"].PropTypes.string.isRequired,projectSlug:a["default"].PropTypes.string.isRequired,projectTitle:a["default"].PropTypes.string.isRequired,onProjectComplete:a["default"].PropTypes.func,tasks:a["default"].PropTypes.array,tasksComplete:a["default"].PropTypes.bool.isRequired,skillMeta:a["default"].PropTypes.object.isRequired,courseMeta:a["default"].PropTypes.object.isRequired},getInitialState:function(){return{disabled:!1,buttonText:"Up Next",showTooltip:!1}},getAssessmentCount:function(){var e=arguments.length<=0||void 0===arguments[0]?!1:arguments[0];return e?n["default"].where(this.props.tasks,{done:!0}).length:this.props.tasks.length},showTooltip:function(){this.setState({showTooltip:!0})},hideTooltip:function(){this.setState({showTooltip:!1})},projectComplete:function(){this.props.tasksComplete&&n["default"].isFunction(this.props.onProjectComplete)&&this.props.onProjectComplete()},render:function(){var e="everyday",t=null;return this.props.tasksComplete?e="lantern--go":this.state.showTooltip&&(t=a["default"].createElement(p["default"],{style:{width:500}},a["default"].createElement("p",null,a["default"].createElement("strong",null,"Project in progress.")," Mark tasks as complete by checking them off in the left panel to finish."))),a["default"].createElement(u.Footer,{disabled:this.props.disabled,course:this.props.course,title:this.props.title,titleRoute:n["default"].get(this.props,"exitPaths.back"),initialUnit:this.props.initialUnit,initialLesson:this.props.initialLesson,initialExercise:this.props.initialExercise},a["default"].createElement(u.FooterSection,{position:"center"},a["default"].createElement("div",{className:"fcn-project-footer",onMouseOver:this.showTooltip,onMouseOut:this.hideTooltip},a["default"].createElement(d["default"],{total:this.getAssessmentCount(),complete:this.getAssessmentCount(!0)}),t,a["default"].createElement(c["default"],{key:"pf-btn-"+e,type:e,inactive:!this.props.tasksComplete,onClick:this.projectComplete},this.state.buttonText))),a["default"].createElement(u.FooterSection,{position:"right"},a["default"].createElement(g["default"],{noun:"project",allowReset:!0,courseSlug:this.props.courseSlug,contentSlug:this.props.projectSlug,contentTitle:this.props.projectTitle,courseMeta:this.props.courseMeta})))}});t["default"]=v},631:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(1),n=r(i),o=s(9),a=r(o),l=s(77),c=s(1004),u=r(c),h=s(184),d=r(h),f=s(2),p=r(f),m=n["default"].createClass({displayName:"ShareCodeControl",propTypes:{intercomOpen:n["default"].PropTypes.bool},getInitialState:function(){return{clicked:!1}},inviteAdvisor:function(){var e=window.location.origin+window.location.pathname+"?user_id="+a["default"].id(),t="?user_id="+a["default"].id();(0,l.conversationHasStarted)()||this.props.intercomOpen?(0,l.sendMessageToExistingConversation)("Hi there, I'd like you to review my code "+e):(0,l.sendMessage)("Hi there, I'd like an advisor to review my code "+e),window.history.pushState({userId:a["default"].id()},window.location.pathname,t),(0,l.trackEvent)("project-collaboration-invite",{share_url:e}),this.setState({clicked:!0})},render:function(){var e=(0,p["default"])({"fcn-control":!0,"fcn-icon":!0,"fcn-icon-share":!0,clicked:this.state.clicked}),t=(0,l.conversationHasStarted)()?"Invite your advisor to view your code":"Invite an advisor to view your code";return n["default"].createElement("div",{className:u["default"].shareCodeControl},n["default"].createElement("span",{className:u["default"].cta},t),n["default"].createElement("div",{className:u["default"].ctaArrow}),n["default"].createElement(d["default"],{className:e,clickHandler:this.inviteAdvisor,overflow:!1,isControl:!0}))}});t["default"]=m},632:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(3),n=r(i),o=s(1),a=r(o),l=s(75),c=r(l),u=s(61),h=r(u),d=s(363),f=r(d),p=s(634),m=r(p),g=window.ClientRect,v=a["default"].createClass({displayName:"SharePopover",propTypes:{rect:a["default"].PropTypes.instanceOf(g),close:a["default"].PropTypes.func.isRequired,files:a["default"].PropTypes.array.isRequired,isOpen:a["default"].PropTypes.bool.isRequired},getInitialState:function(){return{gistURL:null,loading:!1}},componentWillReceiveProps:function(e){e.isOpen&&!this.props.isOpen&&this.shareAll()},getPosition:function(){var e=this.props.rect;return e?{top:Math.round(e.top-5),left:Math.round(e.right-e.width/2)}:{}},handleClose:function(){this.props.close()},shareFiles:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.setState({loading:!0}),(0,m["default"])({description:"Codecademy export","public":!1,files:t}).then(function(t){e.setState({gistURL:t.url,loading:!1})})["catch"](function(e){})},shareAll:function(){var e={};n["default"].each(this.props.files,function(t){e[t.name]={content:t.content}}),this.shareFiles(e)},getGistURL:function(){return this.state.gistURL?a["default"].createElement("div",{className:f["default"].gistResult},a["default"].createElement("a",{className:f["default"].gistOpen,href:this.state.gistURL,target:"false"},"Open"),a["default"].createElement(h["default"],{className:f["default"].gistInput,useDefaultStyles:!1,selectOnClick:!0,value:this.state.gistURL})):void 0},render:function(){var e=null;return this.state.loading?e=a["default"].createElement("div",{className:f["default"].gistLoader},a["default"].createElement("div",{className:"fcn-spinner"})):this.state.gistURL&&(e=this.getGistURL()),a["default"].createElement(c["default"],{isOpen:this.props.isOpen,onOutsideClick:this.handleClose},a["default"].createElement("div",{className:f["default"].popover,style:this.getPosition()},e))}});t["default"]=v},633:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(1),n=r(i),o=s(14),a=r(o),l=s(632),c=r(l),u=s(363),h=r(u),d=n["default"].createClass({displayName:"ShareButton",propTypes:{files:n["default"].PropTypes.array},getInitialState:function(){return{open:!1,popoverPosition:null}},showShareOptions:function(){this.setState({open:!0,popoverPosition:this.getPopoverTargetPosition()})},hideShareOptions:function(){this.setState({open:!1})},getPopoverTargetPosition:function(){var e=a["default"].findDOMNode(this.refs.popoverTarget);return e?e.getBoundingClientRect():null},getSharePopover:function(){return n["default"].createElement(c["default"],{isOpen:this.state.open,close:this.hideShareOptions,rect:this.state.popoverPosition,files:this.props.files})},render:function(){return n["default"].createElement("button",{className:h["default"].button,ref:"popoverTarget",onClick:this.showShareOptions},n["default"].createElement("i",{className:"new-cc-icon icon-link"}),this.getSharePopover())}});t["default"]=d},634:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){return new Promise(function(t,s){return o["default"].isEqual(c,e)&&u?void t(u):(c=e,void l["default"].ajax({url:"/gist",cache:!1,method:"POST",dataType:"json",data:e}).done(function(e){u=e,t(e)}).fail(function(e){u=null,s(e)}))})}Object.defineProperty(t,"__esModule",{value:!0});var n=s(3),o=r(n),a=s(7),l=r(a),c=null,u=null;t["default"]=i},635:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(1),n=r(i),o=s(637),a=r(o),l=s(286),c=r(l),u=s(184),h=r(u),d=s(3),f=r(d),p=s(2),m=r(p),g=s(15),v=r(g),y=s(17),_=r(y),b=n["default"].createClass({displayName:"TerminalContainer",mixins:[v["default"].connect(_["default"],"workspaceReady")],propTypes:{presenter:n["default"].PropTypes.object.isRequired,modifiers:n["default"].PropTypes.object.isRequired,helpers:n["default"].PropTypes.object.isRequired,broadcast:n["default"].PropTypes.func.isRequired,tabsEnabled:n["default"].PropTypes.bool,maxTabs:n["default"].PropTypes.number},getDefaultProps:function(){return{tabsEnabled:!0,maxTabs:3}},getInitialState:function(){return{terminals:[],activeTerminal:null}},componentDidMount:function(){this.createInitialTerminal()},createInitialTerminal:function(){0===this.state.terminals.length&&this.createNewTerminal()},focusOnActiveTerminal:function(){var e=this;this.getActiveTerminal()&&f["default"].defer(function(){e.getActiveTerminal().focus()})},componentDidUpdate:function(e,t){!t.workspaceReady&&this.state.workspaceReady?this.createInitialTerminal():t.workspaceReady&&!this.state.workspaceReady&&this.setState({terminals:[]}),t.activeTerminal!==this.state.activeTerminal&&this.focusOnActiveTerminal()},tabsEnabled:function(){return this.props.tabsEnabled&&this.props.modifiers.isProject},createTerminalId:function(){return f["default"].uniqueId("terminal")},getActiveTerminal:function(){return this.refs[this.state.activeTerminal]},getAllTerminals:function(){return this.state.terminals.map(function(e){return this.refs[e.id]}.bind(this))},onResize:function(){var e=this.getAllTerminals();if(e&&e.length){var t=this.getActiveTerminal();if(t&&!t.state.fake&&t.refs.RealTerminal){var s=t.refs.RealTerminal.getRowsCols(),r=!0,i=!1,n=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var l=o.value;l.resize(s)}}catch(c){i=!0,n=c}finally{try{!r&&a["return"]&&a["return"]()}finally{if(i)throw n}}}}},resetTerminals:function(){this.replaceState(Object.assign({},this.getInitialState(),{workspaceReady:this.state.workspaceReady})),this.createInitialTerminal()},setActiveTerminal:function(e){this.setState({activeTerminal:e})},onTerminalReady:function(e){var t=f["default"].clone(this.state.terminals);t.forEach(function(t){t.id===e.props.terminalId&&(t.title=e.state.title)}),this.setState({terminals:t})},onTerminalClose:function(e){e&&(this.tabsEnabled()?this.closeTerminal(e):this.resetTerminals())},onTerminalFrProcChange:function(e,t){var s=!0,r=!1,i=void 0;try{for(var n,o=this.state.terminals[Symbol.iterator]();!(s=(n=o.next()).done);s=!0){var a=n.value;a.id===e&&(a.title=t)}}catch(l){r=!0,i=l}finally{try{!s&&o["return"]&&o["return"]()}finally{if(r)throw i}}this.setState({terminals:this.state.terminals})},renderTerminal:function(e){return n["default"].createElement(a["default"],{key:e.id,ref:e.id,terminalId:e.id,onFgProcChange:this.onTerminalFrProcChange,modifiers:this.props.modifiers,presenter:this.props.presenter,broadcast:this.props.broadcast,onReady:this.onTerminalReady,onClose:this.onTerminalClose,isActive:e.id===this.state.activeTerminal})},closeTerminal:function(e){var t={};t.terminals=f["default"].reject(this.state.terminals,function(t){return t.id===e}),t.terminals.length&&this.state.activeTerminal===e?t.activeTerminal=t.terminals[t.terminals.length-1].id:t.terminals.length||(t.activeTerminal=null),this.setState(t)},renderTerminalTab:function(e){return n["default"].createElement(h["default"],{key:"terminalTab"+e.id,tabId:e.id,title:e.title,clickHandler:this.setActiveTerminal,canClose:this.state.terminals.length>1,closeHandler:this.closeTerminal,isActive:this.state.activeTerminal===e.id})},createNewTerminal:function(){var e=f["default"].clone(this.state.terminals),t=this.createTerminalId();e.push({id:t,title:"bash"}),this.setState({terminals:e,activeTerminal:t})},atMaxTabs:function(){return this.state.terminals.length>=this.props.maxTabs},render:function(){var e=[],t=[];if(this.state.terminals&&this.state.terminals.length){var s=!0,r=!1,i=void 0;try{for(var o,a=this.state.terminals[Symbol.iterator]();!(s=(o=a.next()).done);s=!0){var l=o.value;e.push(this.renderTerminalTab(l)),t.push(this.renderTerminal(l))}}catch(u){r=!0,i=u}finally{try{!s&&a["return"]&&a["return"]()}finally{if(r)throw i}}}else t=n["default"].createElement("div",{className:"fcn-terminal-container__placeholder"},n["default"].createElement("div",{className:"fcn-terminal-container__placeholder__body"},n["default"].createElement("div",{className:"fcn-terminal-container__placeholder__icon fcn-icon fcn-icon-terminal"}),n["default"].createElement("span",{className:"fcn-terminal-container__placeholder__text"},"Terminal"),n["default"].createElement("span",{className:"fcn-terminal-container__placeholder__text"},this.tabsEnabled()?n["default"].createElement("span",null,"Open a new tab by clicking the plus icon"):null)));var d=void 0;this.tabsEnabled()&&(d=n["default"].createElement("div",{className:"fcn-component-header fcn-component-header--tabs"},n["default"].createElement(c["default"],null,n["default"].createElement(h["default"],{className:"fcn-icon fcn-icon-plus fcn-control",key:"terminalTabNew",clickHandler:this.createNewTerminal,isDisabled:this.atMaxTabs(),overflow:!1}),n["default"].createElement("div",{className:"fcn-tabs-container__inner"},e),n["default"].createElement(h["default"],{className:"fcn-control fcn-icon fcn-icon-fullscreen",key:"terminalTabFullscreen",clickHandler:this.props.helpers.toggleFullscreen,overflow:!1,align:"right"}))));var f=(0,m["default"])({"fcn-terminal-container":!0,"fcn-terminal-container--with-header":this.tabsEnabled()});return n["default"].createElement("div",{className:f},d,t)}});t["default"]=b},636:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(5),n=r(i),o=s(1),a=r(o),l=s(737),c=r(l);t["default"]=a["default"].createClass({displayName:"OutputTerminal",mixins:[n["default"].ListenerMixin],getInitialState:function(){return{output:[]}},componentDidMount:function(){this.listenTo(c["default"],this.onChange)},onChange:function(e){this.setState({output:e})},render:function(){return a["default"].createElement("div",{className:"fill-container"},a["default"].createElement("div",{className:"fcn-terminal-container"},a["default"].createElement("div",{className:"fcn-terminal fcn-terminal--active"},a["default"].createElement("div",{className:"jqconsole"},this.state.output.map(function(e,t){return a["default"].createElement("div",{key:"output-line-"+t,className:"jqconsole-"+e.type},e.text)})))))}})},637:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(3),n=r(i),o=s(1),a=r(o),l=s(2),c=r(l),u=s(639),h=r(u),d=s(638),f=r(d),p=s(718),m=r(p),g=s(185),v=r(g),y=s(17),_=r(y),b=s(304),k=r(b),w=a["default"].createClass({displayName:"Terminal",mixins:[m["default"],(0,k["default"])("openFirstShell")],propTypes:{presenter:a["default"].PropTypes.object.isRequired,modifiers:a["default"].PropTypes.object.isRequired,broadcast:a["default"].PropTypes.func.isRequired,isActive:a["default"].PropTypes.bool,onReady:a["default"].PropTypes.func,onClose:a["default"].PropTypes.func,terminalId:a["default"].PropTypes.oneOfType([a["default"].PropTypes.string,a["default"].PropTypes.number])},getDefaultProps:function(){return{isActive:!1,hasSpawned:!1}},getInitialState:function(){return{fake:void 0!==this.props.presenter.whitelist,title:"bash",history:[]}},ptyCallback:function(e){this.setState(e)},realTerminalText:function(){return this.refs.RealTerminal?this.refs.RealTerminal.text():void 0},resize:function(e){this.refs.RealTerminal&&this.refs.RealTerminal.resize(e)},onClose:function(){n["default"].isFunction(this.props.onClose)&&this.props.onClose(this.props.terminalId)},onFgProcChange:function(e){this.props.onFgProcChange(this.props.terminalId,e)},getTerminalChild:function(){return this.refs.RealTerminal||this.refs.FakeTerminal},getInitialShell:function(){return this.props.presenter.shell||"bash"},focus:function(){var e=this.getTerminalChild();e&&e.focus()},openFirstShell:function(){this.state.hasSpawned||this.openShellIfNeeded()},openShellIfNeeded:function(e){var t=e,s=this.props.presenter.whitelist,r=n["default"].isArray(s)?s.length:s;r||(t=this.getInitialShell()),t&&this.props.broadcast("pty",t,this.ptyCallback),this.setState({title:t,hasSpawned:!0}),n["default"].isFunction(this.props.onReady)&&this.props.onReady(this)},render:function(){var e=void 0,t=(0,c["default"])({"fcn-terminal":!0,"fcn-terminal--active":this.props.isActive});return e=_["default"].state.workspaceReady?this.state.fake?a["default"].createElement(f["default"],{ref:"FakeTerminal",requestShell:this.openShellIfNeeded,history:this.state.history,modifiers:this.props.modifiers,presenter:this.props.presenter,broadcast:this.props.broadcast}):a["default"].createElement(h["default"],{ref:"RealTerminal",id:this.props.terminalId,initialShell:this.getInitialShell(),isActive:this.props.isActive,ptyStream:this.state.ptyStream,onStreamEnd:this.onClose,onFgProcChange:this.onFgProcChange,modifiers:this.props.modifiers,broadcast:this.props.broadcast}):null,a["default"].createElement("div",{className:t},e,a["default"].createElement(v["default"],this.props.presenter.errors))}});t["default"]=w},638:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),s(787);var i=s(3),n=r(i),o=s(7),a=r(o),l=s(1),c=r(l),u=s(14),h=r(u),d={stdout:"jqconsole-stdout",stderr:"jqconsole-stderr"},f="$ ",p="",m=".. ",g={},v={"{}":"brace","[]":"bracket","()":"paren"},y=function(e,t){t(!1)},_={shortcuts:g,matchings:v,continueLabel:m,promptLabel:f,header:p,multilineCallback:y,evaluator:a["default"].noop},b=c["default"].createClass({displayName:"FakeTerminal",propTypes:{presenter:c["default"].PropTypes.object.isRequired,modifiers:c["default"].PropTypes.object.isRequired,broadcast:c["default"].PropTypes.func.isRequired,ptyStream:c["default"].PropTypes.object,history:c["default"].PropTypes.array},getInitialState:function(){var e=this.props.history||[];return{history:e}},componentDidMount:function(){if(!this.props.modifiers.readonly){var e=h["default"].findDOMNode(this.refs.terminal),t=_,s=(0,a["default"])(e).jqconsole(t.header,t.promptLabel,t.continueLabel);s.SetHistory(n["default"].pluck(this.state.history,"input")),this.setState({console:s}),this._startPrompt(s)}},_startPrompt:function(e){e.Prompt(!0,this._handleInput)},_handleInput:function(e){var t=this.props.presenter.whitelist;if(void 0!==t){var s=n["default"].find(t,function(t){var s=new RegExp(t.matcher);return s.test(e)});s?void 0!==s.fakeresponse?this._handleFakeResponse(e,s.fakeresponse):void 0!==s.shell?n["default"].isFunction(this.props.requestShell)&&this.props.requestShell(s.shell.cmd):this.props.broadcast("input",e,this._handleResult):/^\ *$/.test(e)?this._handleResult(e,"",1):(this._handleResult(e,"command not recognized",1),this.props.broadcast("result"))}else this.props.broadcast("input",e,this._handleResult);return this},_handleResult:function(e,t,s){
t&&this.println(t,"stdout"),this._recordHistoryItem(e,t,s),this._startPrompt(this.state.console),this.props.broadcast("result")},_handleFakeResponse:function(e,t,s){this._recordHistoryItem(e,t.output,s),this._printFakeResultOutput(t)},_printFakeResultOutput:function(e){var t=e.delay||0;setTimeout(function(){this.println(e.output,e.type),this._startPrompt(this.state.console),this.props.broadcast("result")}.bind(this),t)},_recordHistoryItem:function(e,t,s){var r={input:e,output:t,exitCode:s};this.state.history.push(r),this.setState({history:this.state.history})},focus:function(){this.state.console.Focus()},println:function(e,t){"\n"!==e[e.length-1]&&(e+="\n"),this.print(e,t)},print:function(e,t){void 0===t&&(t="stdout"),this.state.console.Write(e,d[t])},render:function(){return c["default"].createElement("div",{className:"fcn-fake-container","data-readonly":this.props.modifiers.readonly},c["default"].createElement("div",{id:"terminalComponent",ref:"terminal"},this.props.modifiers.readonly?c["default"].createElement("div",{className:"jqconsole"},c["default"].createElement("div",{className:"jqconsole-stdout"}," Terminal disabled ")):void 0))}});t["default"]=b},639:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(3),n=r(i),o=s(525),a=r(o),l=s(524),c=r(l),u=s(1),h=r(u),d=s(14),f=r(d),p=20,m=h["default"].createClass({displayName:"RealTerminal",propTypes:{modifiers:h["default"].PropTypes.object.isRequired,broadcast:h["default"].PropTypes.func.isRequired,ptyStream:h["default"].PropTypes.object,onStreamEnd:h["default"].PropTypes.func},getInitialState:function(){var e=new a["default"]({cols:60,rows:35,cursorBlink:!1,useFocus:!1});return{term:e,fgCmd:this.props.initialShell}},componentDidMount:function(){var e=f["default"].findDOMNode(this.refs.terminal);this.state.term.open(e),this.state.term.on("keydown",this.onKeydown),this._resize=n["default"].debounce(this.resize,100),this.bindStream()},resize:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?this.getRowsCols():arguments[0];t.cols<=0||t.rows<=0||this.props.ptyStream.resize(t.cols,t.rows,function(){e.state.term.resize(t.cols,t.rows),e.state.term.refresh(0,t.rows-1)})},text:function(){return this.state.term.asText()},getRowsCols:function(){var e=f["default"].findDOMNode(this.refs.terminal),t=c["default"].getSize(e),s=e.offsetWidth,r=e.offsetHeight,i=Math.floor((s-p)/t.width),n=Math.floor((r-p)/t.height);return{rows:n,cols:i}},onEnter:function(){var e=this;this.props.broadcast("pty_result"),this.props.ptyStream.getFgProcName(function(t,s){if(t);else{var r=s.Content;e.props.onFgProcChange(r)}})},onKeydown:function(e){a["default"].focus&&13===e.keyCode&&this.onEnter()},focus:function(){this.state.term.focus(),f["default"].findDOMNode(this.refs.terminal).focus()},blur:function(){this.state.term.blur(),f["default"].findDOMNode(this.refs.terminal).blur()},bindStream:function(){var e=this;if(void 0!==this.props.ptyStream){var t=this.props.ptyStream,s=this.state.term;t.on("data",this._handleStreamData),t.on("end",function(){s.destroy(),n["default"].isFunction(e.props.onStreamEnd)&&e.props.onStreamEnd()}),s.on("data",function(e){t.write(e)})}},componentDidUpdate:function(e){e.ptyStream!==this.props.ptyStream&&(this.bindStream(),this.resize(this.getRowsCols()))},_handleStreamData:function(e){var t=this;this.state.term.write(e),this._resize&&this._resize(this.getRowsCols()),n["default"].defer(function(){t.state.hasGottenFirstData||(t.blur(),t.setState({hasGottenFirstData:!0}))})},render:function(){return h["default"].createElement("div",{className:"fcn-real-container"},h["default"].createElement("div",{className:"real-terminal",tabIndex:"0",ref:"terminal",onClick:this.focus}))}});t["default"]=m},640:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(1),n=r(i),o=s(2),a=r(o);t["default"]=n["default"].createClass({displayName:"WorkspaceStatusMessage",propTypes:{type:n["default"].PropTypes.string,message:n["default"].PropTypes.string,visible:n["default"].PropTypes.bool},getInitialState:function(){return{visible:!1,isHovering:!1}},componentWillReceiveProps:function(e){var t=this,s=this.props.type!==e.type||this.props.message!=e.message;if(e.message&&s&&(this.setState({visible:!0}),this.state.hideTimeout&&(clearTimeout(this.state.hideTimeout),this.setState({hideTimeout:null})),"neutral"!==e.type)){var r=setTimeout(function(){t.setState({visible:!1})},3e3);this.setState({hideTimeout:r})}},_onMouseOver:function(){this.state.isHovering=!0,this.setState({isHovering:this.state.isHovering,visible:!0})},_onMouseLeave:function(){this.setState({visible:!1,isHovering:!1})},render:function(){var e=(0,a["default"])({"fcn-godex-status--hidden":!this.props.visible&&!this.state.visible,"fcn-godex-status":!0,"fcn-godex-status--neutral":"neutral"===this.props.type,"fcn-godex-status--error":"error"===this.props.type,"fcn-godex-status--success":"success"===this.props.type,"fcn-godex-status--stable":this.state.isHovering&&"error"!==this.props.type});return n["default"].createElement("div",{className:"fcn-godex-status-container",onMouseEnter:this._onMouseOver,onMouseLeave:this._onMouseLeave},n["default"].createElement("div",{className:e},n["default"].createElement("span",{ref:"statusMessage"},this.props.message),n["default"].createElement("div",{className:"fcn-godex-status__glow"})))}})},641:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(1),n=r(i),o=s(2),a=r(o);t["default"]=n["default"].createClass({displayName:"badge_alert",getInitialState:function(){return{hidden:!1}},componentDidMount:function(){setTimeout(function(){this.setState({hidden:!0})}.bind(this),8e3)},_hide:function(){this.setState({hidden:!0})},render:function(){var e=(0,a["default"])({"fcn-alert-box":!0,"fcn-alert-box--hidden":this.state.hidden}),t=this.props.icon?"cc-achievement cc-achievement--"+this.props.icon:"cc-achievement cc-achievement--code-achievement";return n["default"].createElement("div",null,n["default"].createElement("div",{className:e,onClick:this._hide},n["default"].createElement("div",{className:"fcn-alert-box__close"},n["default"].createElement("span",{className:"fcn-icon fcn-icon-close"})),n["default"].createElement("div",{className:"grid-row fcn-alert-box__contents"},n["default"].createElement("div",{className:"grid-col-4"},n["default"].createElement("span",{className:t})),n["default"].createElement("div",{className:"grid-col-8 fcn-alert-box__text"},n["default"].createElement("p",null,"Congratulations! You earned a new achievement:"),n["default"].createElement("p",null,n["default"].createElement("strong",null,this.props.name))))))}})},642:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(641),n=r(i),o=s(1),a=r(o);t["default"]=a["default"].createClass({displayName:"badges",_buildAchievements:function(){var e=[],t=this.props.achievements;return t&&t.length>0&&t.forEach(function(t,s){e.push(a["default"].createElement("li",null,a["default"].createElement(n["default"],{name:t.name,slug:t.slug,icon:t.icon,key:t.slug})))}.bind(this)),e},render:function(){return a["default"].createElement("div",{className:"fcn-achievement-alerts"},a["default"].createElement("ul",{className:"fcn-achievement-alerts__list"},this._buildAchievements()))}})},643:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(15),n=r(i),o=s(185),a=r(o),l=s(716),c=r(l),u=s(52),h=r(u),d=s(17),f=r(d),p=s(104),m=r(p),g=s(644),v=r(g),y=s(645),_=r(y),b=s(304),k=r(b),w=s(1),x=r(w),T=s(14),S=r(T),C=s(2),E=r(C),P=s(3),M=(r(P),x["default"].createClass({displayName:"WebBrowser",mixins:[c["default"],n["default"].connect(m["default"]),(0,k["default"])("home")],propTypes:{presenter:x["default"].PropTypes.object.isRequired,modifiers:x["default"].PropTypes.object.isRequired,broadcast:x["default"].PropTypes.func.isRequired},getInitialState:function(){return{urlBarValue:""}},_onURLBarKeyDown:function(e){13===e.keyCode&&h["default"].load(this.state.urlBarValue)},_onURLBarChange:function(e){this.setState({urlBarValue:e.target.value})},onUrlFieldBlur:function(){this.setState({urlBarFocused:!1})},onUrlFieldFocus:function(){this.setState({urlBarFocused:!0})},componentWillUpdate:function(e,t){this.state.urlBarFocused||(S["default"].findDOMNode(this.refs.urlbar).value=t.location.displayUrl)},refreshAndTest:function(){var e=this;h["default"].refresh().then(function(){e.props.broadcast("runTests")})},home:function(){void 0!==this.props.presenter.url&&h["default"].load(this.props.presenter.url)},setLocation:function(e){e&&this.setState({location:e,urlBarValue:e.displayUrl})},isBlank:function(){return!this.state.location.internalUrl||!f["default"].state.workspaceObject},renderBody:function(){if(this.isBlank())return x["default"].createElement("div",{className:"fcn-browser__placeholder"},x["default"].createElement("div",{className:"fcn-browser__placeholder__body"},x["default"].createElement("div",{className:"fcn-browser__placeholder__image"}),x["default"].createElement("div",{className:"fcn-browser__placeholder__text"},"Browser Window",x["default"].createElement("br",null),"Use the URL bar to load a website")));switch(f["default"].state.workspaceBackend){case"godex":return x["default"].createElement(_["default"],{src:this.state.location.internalUrl.toString(),modifiers:this.props.modifiers,broadcast:this.props.broadcast,nonce:this.state.nonce,ref:"browser"});case"library":return x["default"].createElement(v["default"],{src:this.state.location.internalUrl,nonce:this.state.nonce,ref:"browser"});default:throw new Error("Unknown workspaceBackend "+f["default"].state.workspaceBackend)}},render:function(){var e=this.props.presenter.errors,t=(0,E["default"])({"fcn-browser__url-bar":!0,"fcn-browser__url-bar--error":e&&e.visible,"fcn-browser__url-bar--pass":e&&!e.visible}),s=(0,E["default"])({"fcn-control":!0,"fcn-icon":!0,"fcn-icon-arrowPrev":!0,"fcn-control--disabled":m["default"].state.historyIndex<1});return x["default"].createElement("div",{className:"fill-container fcn-browser__container"},x["default"].createElement("div",{className:"fcn-browser__chrome"},x["default"].createElement("span",{className:s,onClick:h["default"].navigateBack}),x["default"].createElement("span",{className:"fcn-control fcn-icon fcn-icon-refresh",onClick:this.refreshAndTest}),x["default"].createElement("div",{className:"fcn-browser__chrome__center"},x["default"].createElement("input",{type:"text",className:t,ref:"urlbar",placeholder:"Type URL here",onKeyDown:this._onURLBarKeyDown,onFocus:this.onUrlFieldFocus,onBlur:this.onUrlFieldBlur,onChange:this._onURLBarChange}),this.state.loading?x["default"].createElement("div",{className:"fcn-spinner fcn-spinner--grey"}):null),this.props.presenter.fullscreenButton),x["default"].createElement("div",{className:"fcn-browser__body"},this.renderBody()),x["default"].createElement(a["default"],this.props.presenter.errors))}}));t["default"]=M},644:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,s){function r(i,n){try{var o=t[i](n),a=o.value}catch(l){return void s(l)}return o.done?void e(a):Promise.resolve(a).then(function(e){return r("next",e)},function(e){return r("throw",e)})}return r("next")})}}Object.defineProperty(t,"__esModule",{value:!0});var n=s(7),o=r(n),a=s(523),l=r(a),c=s(790),u=r(c),h=s(1),d=r(h),f=s(14),p=r(f),m=s(104),g=r(m),v=s(52),y=r(v),_=s(17),b=r(_),k=s(712),w=r(k),x=s(586),T=r(x),S=l["default"].secureSandboxIndex();t["default"]=d["default"].createClass({displayName:"LocalWebBrowser",propTypes:{nonce:d["default"].PropTypes.number.isRequired,src:d["default"].PropTypes.object.isRequired},getInitialState:function(){return{stuffMutex:new T["default"]}},componentDidMount:function(){this.state.container=p["default"].findDOMNode(this),this.fetchAndLoad()},componentWillUnmount:function(){(0,o["default"])(window).off("resize")},componentDidUpdate:function(e){e.nonce!==this.props.nonce&&this.fetchAndLoad()},fetchAndLoad:function(){if("localhost"!==this.props.src.host())return void this._loadHTML("404");var e=new w["default"](b["default"].state.workspaceObject),t=e.GET(this.props.src.toString());switch(t.status){case 200:this._loadHTML(t.body);break;case 404:this._loadHTML("404");break;default:this._loadHTML("Unhandled response")}},_loadHTML:function(e){this._withStuffContext(function(t){t.load(e,function(){g["default"].state.onLoad(),t.on("clickLink",function(e){e&&"#"!==e&&y["default"].load(e)})})})},runLegacySCT:function(e,t){var s=this;this._withStuffContext(function(){s.state.context.evaljs("window.__runner.testWeb("+JSON.stringify(e)+")",function(e,s){e?t(!1,e.message):"string"==typeof s?t(!1,s):t(!0,"")})})},_withStuffContext:function(e){var t=this;return i(regeneratorRuntime.mark(function s(){var r;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,t.state.stuffMutex.lock();case 2:return r=s.sent,void 0===t.state.context?(0,u["default"])(S,t.state.container,function(s){t.state.context=s,e.call(t,s),r()}):(e.call(t,t.state.context),r()),s.abrupt("return",t);case 5:case"end":return s.stop()}},s,t)}))()},render:function(){return d["default"].createElement("div",{className:"LocalWebBrowser__frame-container"})}})},645:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(3),n=r(i),o=s(1),a=r(o),l=s(14),c=r(l),u=s(104),h=r(u),d=s(52),f=r(d),p=s(27),m=r(p);t["default"]=a["default"].createClass({displayName:"RemoteWebBrowser",propTypes:{src:a["default"].PropTypes.string.isRequired,modifiers:a["default"].PropTypes.object.isRequired,broadcast:a["default"].PropTypes.func.isRequired,nonce:a["default"].PropTypes.number.isRequired},getInitialState:function(){return{init:!1}},componentDidMount:function(){var e=this,t=this.getIframe();t.addEventListener("load",function(){e.props.broadcast("loadExternal")}),window.addEventListener("message",this._handleIframeMessage,!1),t.src="",t.src=this.props.src,t.onload=function(){h["default"].state.onLoad()}},componentWillUnmount:function(){window.removeEventListener("message",this._handleIframeMessage)},_handleIframeMessage:function(e){var t=e.data;t.location&&(/ccterminalcloud/.test(e.origin)||/localhost/.test(e.origin)||/external-dev\.codecademy/.test(e.origin)||/heroku\.com/.test(e.origin)||void 0===e.origin)&&(m["default"].info("navigated to",t.location),f["default"].push(t.location),this.state.init||n["default"].isEmpty(this.props.src)?this.props.broadcast("runTests"):this.setState({init:!0}))},getIframe:function(){return c["default"].findDOMNode(this.refs.frame)},componentDidUpdate:function(e){if(e.nonce!==this.props.nonce){var t=c["default"].findDOMNode(this.refs.frame);t.onload=h["default"].state.onLoad,t.src="",t.src=this.props.src}},render:function(){var e={pointerEvents:this.props.modifiers.dragging?"none":"auto"};return a["default"].createElement("iframe",{className:"fill-container",ref:"frame",style:e})}})},646:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(1),n=r(i),o=s(2),a=r(o),l=s(103),c=r(l),u=s(30),h=r(u);t["default"]=n["default"].createClass({displayName:"checkpoint",mixins:[h["default"]],propTypes:{disabled:n["default"].PropTypes.bool.isRequired,status:n["default"].PropTypes.string.isRequired,label:n["default"].PropTypes.string.isRequired,index:n["default"].PropTypes.number.isRequired},getDefaultProps:function(){return{disabled:!1,status:"default"}},render:function(){var e=(0,a["default"])({"fcn-checkpoint":!0,"fcn-checkpoint--satisfied":"satisfied"===this.props.status,"fcn-checkpoint--unsatisfied":"unsatisfied"===this.props.status,"fcn-checkpoint--pending":"pending"===this.props.status,"fcn-checkpoint--disabled":this.props.disabled&&"default"===this.props.status}),t=(0,a["default"])({"fcn-checkpoint__checkbox":!0,"fcn-checkpoint__checkbox--satisfied":"satisfied"===this.props.status,"fcn-checkpoint__checkbox--unsatisfied":"unsatisfied"===this.props.status,"fcn-checkpoint__checkbox--pending":"pending"===this.props.status}),s="fcn-icon-";switch(this.props.status){case"satisfied":s+="checkmark";break;case"unsatisfied":s+="close";break;default:s=""}return n["default"].createElement("div",{className:e},n["default"].createElement("b",{className:"fcn-checkpoint__number"},this.props.index,"."),n["default"].createElement("div",{className:"fcn-checkpoint__body"},n["default"].createElement("span",{dangerouslySetInnerHTML:{__html:(0,c["default"])(this.props.label)}})),n["default"].createElement("div",{className:t},"pending"===this.props.status?n["default"].createElement("div",{className:"fcn-spinner"}):n["default"].createElement("div",{className:"fcn-icon "+s})))}})},647:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(617),n=r(i),o=s(657),a=r(o),l=s(660),c=r(l),u=s(293),h=r(u),d=s(635),f=r(d),p=s(636),m=r(p),g=s(643),v=r(g),y=s(666),_=r(y);t["default"]={PersistentCodeEditor:n["default"],NonPersistentCodeEditor:n["default"],Image:a["default"],Narrative:c["default"],Terminal:f["default"],OutputTerminal:m["default"],WebBrowser:v["default"],Brief:h["default"],SQLPreview:_["default"]}},648:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(650),n=r(i),o=s(653),a=r(o),l=s(39),c=(r(l),s(100)),u=(r(c),s(1)),h=r(u),d=s(2),f=r(d),p=s(301),m=r(p),g=s(654),v=r(g),y=s(15),_=r(y),b=s(296),k=s(9),w=r(k),x=s(129),T=r(x),S=s(300),C=r(S),E=s(188),P=(r(E),s(62)),M=r(P),N=s(16),F=r(N),O=s(17),A=r(O);t["default"]=h["default"].createClass({displayName:"FileTool",mixins:[m["default"],_["default"].connect(A["default"])],propTypes:{broadcast:h["default"].PropTypes.func.isRequired,autoAdd:h["default"].PropTypes.bool.isRequired,tree:h["default"].PropTypes.object,environment:h["default"].PropTypes.string.isRequired,useClickOutside:h["default"].PropTypes.bool},getInitialState:function(){return{openFile:void 0,loading:!1,error:void 0,currentItemPath:"",currentSavePath:void 0,newDirectory:!1,isAddingFiles:!1,isDeletingFiles:!1,openPaths:new Set([])}},componentDidMount:function(){var e=this;this.props.useClickOutside&&(this.props.autoAdd?this.listenForOutsideClick(".file-tool",function(){e.props.toggle()}):this.listenForOutsideClick(".global-modal__container",function(){e.props.toggle()}))},onEscapeKey:function(){this.setState({open:!1}),this.stopListeningForOutsideClicks()},_setCurrentItem:function(e,t){t?this.setState({currentSavePath:e}):this.setState({currentSavePath:void 0}),this.setState({currentItemPath:e})},_addOrRemoveOpenPath:function(e){var t=this.state.openPaths;t.has(e)?t["delete"](e):t.add(e),this.setState({openPaths:t})},_forceAddOpenPath:function(e){var t=this.state.openPaths;t.has(e)||(t.add(e),this.setState({openPaths:this.state.openPaths}))},_clearMediaViewer:function(){this.setState({openFile:void 0,currentSavePath:void 0})},setIsDeleting:function(e){this.setState({isDeletingFiles:e})},toggleAddFileState:function(){this.setState({isAddingFiles:!this.state.isAddingFiles}),this.refs.newFileTool.toggleAddFileTool()},updateTree:function(){this.props.broadcast("getFileTree")},_createNewFile:function(e,t){this.setState({isAddingFiles:!0});var s=this.state.currentSavePath?this.state.currentSavePath+"/"+e:e;if(t){var r=new C["default"]({name:e,path:s,files:[],directories:[]});F["default"].createDirectories([r])}else{var i=new T["default"]({name:e,path:s,content:""});F["default"].updateFiles([i]),F["default"].getFile(e),M["default"].openFile(i)}this._setCurrentItem(e,t),this.state.currentSavePath&&this._forceAddOpenPath(this.state.currentSavePath)},_setError:function(e){this.setState({error:e})},_clearError:function(){this.setState({error:void 0})},render:function(){var e=(0,f["default"])({"file-tool":!0,"file-tool--auto-add":this.props.autoAdd,"file-tool--is-adding":this.state.isAddingFiles}),t=(0,f["default"])({"file-tool__error":!0,"file-tool__error--shown":this.state.error,"file-tool__error-isdir":!this.state.openFile&&!this.props.autoAdd&&this.state.newDirectory});return h["default"].createElement("div",{className:e},h["default"].createElement("div",{className:"file-tool__container"},h["default"].createElement("div",{className:"file-tool__container--left"},h["default"].createElement("p",{className:t},this.state.error),h["default"].createElement(v["default"],{ref:"newFileTool",autoAdd:this.props.autoAdd,toggleAddFileState:this.toggleAddFileState,isAddingFiles:this.state.isAddingFiles,isDeletingFiles:this.state.isDeletingFiles,setIsDeleting:this.setIsDeleting,setError:this._setError,clearError:this._clearError,createNewFile:this._createNewFile,broadcast:this.props.broadcast,currentSavePath:this.state.currentSavePath,currentItemPath:this.state.currentItemPath,clearMediaViewer:this._clearMediaViewer}),h["default"].createElement(n["default"],{ref:"fileTree",setCurrentItem:this._setCurrentItem,setError:this._setError,clearError:this._clearError,currentItemPath:this.state.currentItemPath,addOrRemoveOpenPath:this._addOrRemoveOpenPath,forceAddOpenPath:this._forceAddOpenPath,openPaths:this.state.openPaths,broadcast:this.props.broadcast,isAddingFiles:this.state.isAddingFiles||this.props.autoAdd,isDeletingFiles:this.state.isDeletingFiles,newDirectory:this.state.newDirectory,environment:this.props.environment}),w["default"].isAdmin()||w["default"].isAdvisor()?h["default"].createElement("div",{className:"workspaceDownloadMenu"},h["default"].createElement("form",{method:"POST",action:b.LIBRARY_ROOT+"/users/"+w["default"].get("_id")+"/workspaces/"+A["default"].state.workspaceSlug+"/download"},h["default"].createElement("input",{type:"hidden",name:"attachment",value:"true"}),h["default"].createElement("input",{type:"hidden",name:"auth_token",value:w["default"].get("authentication_token")}),h["default"].createElement("input",{type:"submit",value:"Download workspace"}))):null),this.props.useViewer?h["default"].createElement(a["default"],{ref:"mediaViewer",loading:this.state.loading,broadcast:this.props.broadcast}):void 0,h["default"].createElement("div",{className:"fcn-icon fcn-icon-close fcn-button--everyday fcn-control",onClick:this.props.toggle})))}})},649:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(1),n=r(i),o=s(14),a=r(o),l=s(290);r(l);t["default"]=n["default"].createClass({displayName:"FileToolNameInput",getInitialState:function(){return{value:""}},componentDidMount:function(){this.setFocus()},setFocus:function(){a["default"].findDOMNode(this.refs.filenameinput).focus()},clearInput:function(){this.setState({value:""})},_fileNameKeyDown:function(e){var t=e.target.value;this.setState({value:t}),this.props.fileNameKeyDown(t)},render:function(){var e=this.state.value;return n["default"].createElement("form",{onSubmit:this.props.onSubmit},n["default"].createElement("input",{type:"text",className:"file-name-input",ref:"filenameinput",placeholder:this.props.placeHolder,value:e,onChange:this._fileNameKeyDown}))}})},650:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(39),n=r(i),o=s(302),a=r(o),l=s(652),c=r(l),u=s(651),h=r(u),d=s(1),f=r(d),p=s(5),m=r(p),g=s(15),v=r(g),y=s(100),_=r(y),b=s(516),k=(r(b),s(17)),w=r(k),x=s(177),T=r(x),S=s(16),C=r(S);t["default"]=f["default"].createClass({displayName:"FileTree",mixins:[n["default"],a["default"],m["default"].ListenerMixin,v["default"].connect(w["default"])],propTypes:{currentItemPath:f["default"].PropTypes.string.isRequired,openPaths:f["default"].PropTypes.object.isRequired,setError:f["default"].PropTypes.func.isRequired,clearError:f["default"].PropTypes.func.isRequired,setCurrentItem:f["default"].PropTypes.func.isRequired,addOrRemoveOpenPath:f["default"].PropTypes.func.isRequired,isAddingFiles:f["default"].PropTypes.bool.isRequired,environment:f["default"].PropTypes.string.isRequired},getInitialState:function(){return{canDrop:!0,workspace:void 0}},componentDidMount:function(){C["default"].getFileTree()},_preventDrop:function(){this.setState({canDrop:!1})},_enableDrop:function(){this.setState({canDrop:!0})},_shouldHideFileListing:function(e){return"."===e.name[0]?!0:"lessons"!==this.props.environment||"test/"!==e.path.substring(0,"test/".length)&&"spec/"!==e.path.substring(0,"spec/".length)?!1:!0},_shouldHideDirectoryListing:function(e){return"."===e.name[0]?!0:"lessons"!==this.props.environment||"test"!==e.name&&"spec"!==e.name?!1:!0},_writeItem:function(e){if(!this._shouldHideFileListing(e)){var t=e.name,s=e.path;return f["default"].createElement(h["default"],{path:s,key:s,name:t,id:s,broadcast:this.props.broadcast,moveItem:this._moveItem,fileExists:this.fileExists,setError:this.props.setError,clearError:this.props.clearError,setCurrentFile:this._setCurrentFile,currentItemPath:this.props.currentItemPath,isAddingFiles:this.props.isAddingFiles})}},_resetPath:function(){"file-tree__tree-btn"!==event.target.className.split(" ")[0]&&this.props.setCurrentItem("")},_setCurrentFile:function(e,t){if(this.props.clearError(),this.props.setCurrentItem(e),!t){var s=_["default"].contentEncoding(_["default"].extname(e));T["default"].setPreviewFilepath(e,s),C["default"].getFile(e,s).then(T["default"].previewFile)}},_writeFolderItem:function(e){if(!this._shouldHideDirectoryListing(e)){var t=e.name,s=e.path;return f["default"].createElement(c["default"],{newDirectory:this.props.newDirectory,path:s,key:s,name:t,fileExists:this.fileExists,setError:this.props.setError,clearError:this.props.clearError,openPaths:this.props.openPaths,setCurrentItem:this.props.setCurrentItem,setCurrentFile:this._setCurrentFile,addOrRemoveOpenPath:this.props.addOrRemoveOpenPath,forceAddOpenPath:this.props.forceAddOpenPath,preventDrop:this._preventDrop,enableDrop:this._enableDrop,canDrop:this.state.canDrop,currentItemPath:this.props.currentItemPath,isAddingFiles:this.props.isAddingFiles,rename:this.props.renameItem,tree:this._buildTree(e)})}},_buildTree:function(e){var t=[],s=!0,r=!1,i=void 0;try{for(var n,o=e.directories[Symbol.iterator]();!(s=(n=o.next()).done);s=!0){var a=n.value;t.push(this._writeFolderItem(a))}}catch(l){r=!0,i=l}finally{try{!s&&o["return"]&&o["return"]()}finally{if(r)throw i}}var c=!0,u=!1,h=void 0;try{for(var d,f=e.files[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var p=d.value;t.push(this._writeItem(p))}}catch(l){u=!0,h=l}finally{try{!c&&f["return"]&&f["return"]()}finally{if(u)throw h}}return t},render:function(){var e={files:[],directories:[]};return this.state.workspaceObject&&(e=this.state.workspaceObject.root),f["default"].createElement("div",{className:"file-tree",onClick:this._resetPath},f["default"].createElement("ul",null,this._buildTree(e)))}})},651:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(1),n=r(i),o=s(14),a=r(o),l=s(5),c=r(l),u=s(2),h=r(u),d=s(100),f=r(d),p=s(291),m=r(p),g=s(16),v=r(g),y=s(62),_=r(y),b=s(307),k=r(b);t["default"]=n["default"].createClass({displayName:"FileTreeFile",mixins:[c["default"].connectFilter(k["default"],"file",function(e){return e.file})],propTypes:{name:n["default"].PropTypes.string.isRequired,path:n["default"].PropTypes.string.isRequired,currentItemPath:n["default"].PropTypes.string.isRequired,setError:n["default"].PropTypes.func.isRequired,clearError:n["default"].PropTypes.func.isRequired,setCurrentFile:n["default"].PropTypes.func.isRequired,isAddingFiles:n["default"].PropTypes.bool.isRequired},getInitialState:function(){return{name:this.props.name,file:null}},_onFileNameChange:function(e){this.setState({name:e.target.value}),this.props.clearError()},_invalidExtension:function(e){return!m["default"].has(e)},_onBlur:function(){this._triggerNameChange()},_forceFocus:function(){a["default"].findDOMNode(this.refs.nameInput).focus(),this.setState({isActive:!0}),this.props.setCurrentFile(this.props.path,!0)},setClickTimeOut:function(){setTimeout(function(){this.state.shouldAcceptDoubleClick=!1,this.setState({shouldAcceptDoubleClick:this.state.shouldAcceptDoubleClick})}.bind(this),500)},_handleClick:function(e){if(e.stopPropagation(),this.props.currentItemPath===this.props.path&&this.state.shouldAcceptDoubleClick){var t=f["default"].extname(this.state.name);switch(t.toLowerCase()){case"jpg":case"jpeg":case"png":case"gif":return;default:this.state.file&&(this.state.file.canClose=!0,_["default"].openFile(this.state.file),this.props.broadcast("openFileFromViewer",this.state.file),this.props.broadcast("toggleModal"))}}else this.state.shouldAcceptDoubleClick=!0,this.setState({shouldAcceptDoubleClick:this.state.shouldAcceptDoubleClick}),this.setClickTimeOut(),this.props.setCurrentFile(this.props.path)},_triggerNameChange:function(e){if(e&&e.preventDefault(),this.props.name!==this.state.name){var t=this.props.path,s=this.props.path.replace(this.props.name,this.state.name),r=f["default"].extname(this.state.name);""===this.state.name?(this.props.setError("Enter a filename."),this._forceFocus()):this._invalidExtension(r)?(this.props.setError("Invalid extension."),this._forceFocus()):this.props.fileExists(s)?(this.props.setError("File already exists."),this._forceFocus()):v["default"].rename(t,s)}},render:function(){var e=(0,h["default"])({"file-tree__tree-btn":!0,"file-tree__tree-btn--active":this.props.currentItemPath===this.props.path,"file-tree__tree-btn--inactive":this.props.isAddingFiles});return n["default"].createElement("li",{key:this.props.path},n["default"].createElement("div",{className:e,onClick:this._handleClick}),n["default"].createElement("span",{className:"fcn-icon fcn-icon-file"}),n["default"].createElement("form",{onSubmit:this._triggerNameChange},n["default"].createElement("input",{ref:"nameInput",value:this.state.name,onChange:this._onFileNameChange,onBlur:this._onBlur})))}})},652:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(39),n=r(i),o=s(1),a=r(o),l=s(14),c=r(l),u=s(2),h=r(u),d=s(20),f=(r(d),s(16)),p=r(f);t["default"]=a["default"].createClass({displayName:"FileTreeFolder",mixins:[n["default"]],propTypes:{name:a["default"].PropTypes.string.isRequired,path:a["default"].PropTypes.string.isRequired,openPaths:a["default"].PropTypes.object.isRequired,currentItemPath:a["default"].PropTypes.string.isRequired,addOrRemoveOpenPath:a["default"].PropTypes.func.isRequired,setError:a["default"].PropTypes.func.isRequired,clearError:a["default"].PropTypes.func.isRequired,setCurrentItem:a["default"].PropTypes.func.isRequired,isAddingFiles:a["default"].PropTypes.bool.isRequired,newDirectory:a["default"].PropTypes.bool.isRequired},getInitialState:function(){return{isOpen:!1,isActive:!1,name:this.props.name}},componentDidMount:function(){this.props.currentItemPath===this.props.path&&(this.setState({isActive:!0}),this.setState({isOpen:!0})),this.props.openPaths.has(this.props.path)&&this.setState({isOpen:!0})},componentDidUpdate:function(){this.state.isActive&&this.props.currentItemPath!==this.props.path&&this.setState({isActive:!1})},_toggleFolder:function(){this.props.clearError(),this.setState({isActive:!0,isOpen:!this.state.isOpen}),this.props.addOrRemoveOpenPath(this.props.path),this.props.setCurrentItem(this.props.path,!0)},_openFolderAndLeaveInactive:function(){this.setState({isOpen:!0}),this.props.forceAddOpenPath(this.props.path)},_onFileNameChange:function(e){
this.setState({name:e.target.value}),this.props.clearError()},_onBlur:function(){this._triggerNameChange()},_forceFocus:function(){c["default"].findDOMNode(this.refs.nameInput).focus(),this.setState({isActive:!0}),this.props.setCurrentItem(this.props.path,!0)},_triggerNameChange:function(e){if(e&&e.preventDefault(),this.props.name!==this.state.name||"untitled"===this.state.name){var t=this.props.path.replace(this.props.name,this.state.name);""===this.state.name||"untitled"===this.state.name?(this.props.setError("Enter a filename."),this._forceFocus()):this.props.fileExists(t)?(this.props.setError("File already exists."),this._forceFocus()):p["default"].rename(this.props.path,t,!0)}},render:function(){var e=this.state.name,t=(0,h["default"])({"file-tree__tree-btn":!0,"file-tree__tree-btn--active":this.state.isActive}),s=(0,h["default"])({"file-tree__folder":!0,"file-tree__folder--open":this.state.isOpen,"file-tree__folder--while-adding":this.props.isAddingFiles}),r=(0,h["default"])({"fcn-icon":!0,"fcn-icon-nav":!0,"fcn-icon--nav-right":!this.state.isOpen,"fcn-icon-navArrowRight":!this.state.isOpen,"fcn-icon--nav-down":this.state.isOpen,"fcn-icon-navArrowDown":this.state.isOpen}),i=(0,h["default"])({"fcn-icon":!0,"fcn-icon-folderFilled":!0});return a["default"].createElement("li",{key:this.props.path,className:s},a["default"].createElement("div",{className:t,onClick:this._toggleFolder}),a["default"].createElement("span",{className:r}),a["default"].createElement("span",{className:i}),a["default"].createElement("form",{onSubmit:this._triggerNameChange},a["default"].createElement("input",{ref:"nameInput",type:"text",value:e,onChange:this._onFileNameChange,onBlur:this._onBlur})),a["default"].createElement("ul",null,this.props.tree))}})},653:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(1),n=r(i),o=s(5),a=r(o),l=s(307),c=r(l),u=s(177),h=r(u),d=s(62),f=r(d),p=s(2),m=r(p),g=s(128),v=r(g),y=function(e){return e.file},_=function(e){return e.loading};t["default"]=n["default"].createClass({displayName:"MediaViewer",mixins:[a["default"].connectFilter(c["default"],"file",y),a["default"].connectFilter(c["default"],"loading",_)],propTypes:{broadcast:n["default"].PropTypes.func.isRequired},getInitialState:function(){return{file:void 0,loading:!1}},componentWillUnmount:function(){h["default"].clearPreviewFile()},_openFile:function(e){f["default"].openFile(e),this.props.broadcast("toggleModal")},render:function(){var e,t=!1;if(this.state.file)switch(this.state.file.type){case"image":var s="data:image/"+this.state.file.extension+";charset=utf-8;base64,"+this.state.file.contentBase64;t=!0,e=n["default"].createElement("div",{className:"image-preview-container"},n["default"].createElement("img",{src:s}));break;default:e=n["default"].createElement(v["default"],{key:this.state.file.name,filename:this.state.file.name},this.state.file.content)}var r=(0,m["default"])({"fcn-button":!0,"fcn-button--hidden":!this.state.file,"fcn-button--lantern":!t,"fcn-button--inactive":t}),i=(0,m["default"])({"file-preview__empty":!0,"file-preview__empty--hidden":this.state.file||this.state.loading}),o=(0,m["default"])({"fcn-spinner fcn-spinner--large":!0,"fcn-spinner--hidden":!this.state.loading}),a=t?"Read-only":"Open";return n["default"].createElement("div",{className:"file-preview"},n["default"].createElement("div",{className:"file-preview--content"},n["default"].createElement("div",{className:o}),e),n["default"].createElement("div",{className:i},n["default"].createElement("p",{className:"fcn-icon file-preview__icon--large fcn-icon-folderFilled"}),n["default"].createElement("span",{className:"file-preview__icon--large"},"File Navigator"),n["default"].createElement("p",{className:"file-preview__empty--copy"},"The panel on the left shows all the folders and files included in your root directory.  Select a file from the left in order to preview and/or open it.")),n["default"].createElement("div",{className:"file-preview--footer"},n["default"].createElement("div",{className:r,onClick:this._openFile.bind(null,this.state.file)},a),t?n["default"].createElement("span",{className:"readonly-text"},"You cannot open this file because it cannot be edited at this time."):void 0))}})},654:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(39),n=r(i),o=s(302),a=r(o),l=s(1),c=r(l),u=s(5),h=(r(u),s(2)),d=r(h),f=s(301),p=r(f),m=s(291),g=r(m),v=s(649),y=r(v),_=s(15),b=r(_),k=s(16),w=r(k),x=s(17),T=r(x);t["default"]=c["default"].createClass({displayName:"NewFileTool",mixins:[n["default"],a["default"],p["default"],b["default"].connect(T["default"])],propTypes:{currentSavePath:c["default"].PropTypes.string,currentItemPath:c["default"].PropTypes.string.isRequired,createNewFile:c["default"].PropTypes.func.isRequired,broadcast:c["default"].PropTypes.func.isRequired,setError:c["default"].PropTypes.func.isRequired,clearError:c["default"].PropTypes.func.isRequired,setIsDeleting:c["default"].PropTypes.func.isRequired,autoAdd:c["default"].PropTypes.bool.isRequired,isAddingFiles:c["default"].PropTypes.bool.isRequired,isDeletingFiles:c["default"].PropTypes.bool.isRequired},getInitialState:function(){return{fileName:"",isAddingFiles:!1,IsDir:!1,slug:T["default"].getSlug()}},onSubmit:function(e){e.preventDefault(),this._createNewFile()},onEscapeKey:function(){this._toggle()},_reset:function(){this.setState({IsDir:!1,fileName:"",isAddingFiles:!1}),this.refs.fileInput.clearInput()},_validateExtension:function(e){return!g["default"].has(e)},_fileNameKeyDown:function(e){this.setState({name:e}),this.props.clearError()},_createNewFolder:function(){this.refs.fileInput&&this.refs.fileInput.setFocus(),this.state.IsDir=!0,this.setState({IsDir:this.state.IsDir}),this.props.autoAdd||this._toggle()},_deleteFile:function(){var e=this.props.currentItemPath;this.props.clearMediaViewer(),this.props.setIsDeleting(!1),w["default"].deleteFile(e).then(w["default"].updateFileTree)},_toggle:function(){this.stopListeningForOutsideClicks(),this.props.clearError(),this.props.broadcast("toggleFileTool"),this.toggleAddFileTool()},_createNewFile:function(){var e=this.state.IsDir;if(!e)var t=this.state.name.substring(this.state.name.indexOf(".")+1,this.state.name.length);return""===this.state.name?void this.props.setError("Enter a file name."):!e&&this._validateExtension(t)?void this.props.setError("Invalid file extension."):this.fileExists(this.state.name)?void this.props.setError("File already exists."):(this.props.createNewFile(this.state.name,e),(!this.props.autoAdd||this.props.autoAdd&&!e)&&this._toggle(),void this._reset())},toggleAddFileTool:function(){this.setState({isAddingFiles:!this.state.isAddingFiles})},getDeleteConfirmation:function(){var e=this.props.currentSavePath?{title:"Delete Directory?",message:"Are you sure you want to delete this directory?  This will delete all files inside it. You cannot undo this "}:{title:"Delete file?",message:"Are you sure you want to delete this file?  You cannot undo this."};this.props.broadcast("getConfirmation",e,this._deleteFile),this.props.setIsDeleting(!0)},render:function(){var e=this,t=(this.state.hasErrors,(0,d["default"])({"new-file-tool__error":!0,"new-file-tool__error--shown":this.state.hasErrors}),(0,d["default"])({"fcn-icon":!0,"fcn-icon-plus":!0,"fcn-control":!0,"fcn-control--disabled":this.props.isAddingFiles||this.props.isDeletingFiles})),s=(0,d["default"])({"fcn-icon":!0,"fcn-icon-folderAdd":!0,"fcn-control":!0,"fcn-control--disabled":this.props.isAddingFiles||this.props.isDeletingFiles}),r=(0,d["default"])({"fcn-icon":!0,"fcn-icon-trash":!0,"fcn-control":!0,"fcn-control--disabled":this.props.isAddingFiles||this.props.isDeletingFiles||""===this.props.currentItemPath}),i=(0,d["default"])({"select-cta":!0,"select-cta--hidden":!this.props.autoAdd}),n=this.state.IsDir?"Enter Folder Name":"Enter File Name";return c["default"].createElement("div",{className:"fcn-create-file-tool"},this.props.autoAdd?void 0:c["default"].createElement("div",{className:"file-tool__menu"},c["default"].createElement("span",{className:t,onClick:this._toggle}),c["default"].createElement("span",{className:s,onClick:this._createNewFolder}),c["default"].createElement("span",{className:r,onClick:this.getDeleteConfirmation})),this.props.autoAdd||this.state.isAddingFiles?c["default"].createElement("div",null,c["default"].createElement(y["default"],{ref:"fileInput",placeHolder:n,fileNameKeyDown:this._fileNameKeyDown,onSubmit:this.onSubmit}),c["default"].createElement("div",{className:"select-cta-container"},c["default"].createElement("span",{className:i},"Select a directory:"),c["default"].createElement("span",{className:"fcn-icon fcn-icon-folderAdd fcn-control fcn-control--right",onClick:this._createNewFolder})),c["default"].createElement("div",{className:"new-file-tool__footer"},c["default"].createElement("span",{className:"fcn-button fcn-button--lantern",onClick:function(){e._createNewFile()}},"Create"),c["default"].createElement("span",{className:"fcn-button fcn-button--tab",onClick:this._toggle},"Cancel"))):void 0)}})},655:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(1),n=r(i),o=s(290),a=r(o);t["default"]=n["default"].createClass({displayName:"SecondaryModal",propTypes:{secondaryModalContent:n["default"].PropTypes.shape({title:n["default"].PropTypes.string.isRequired,message:n["default"].PropTypes.string.isRequired}).isRequired,cancelAndClose:n["default"].PropTypes.func.isRequired,confirmAndClose:n["default"].PropTypes.func.isRequired},buildButton:function(e,t){return n["default"].createElement("div",{key:e.title+t,className:"fcn-button fcn-button--blast",onClick:e.action},e.title)},buildButtons:function(e){var t=[];return e.forEach(function(e,s){t.push(this.buildButton(e,s))}.bind(this)),t},render:function(){var e;return e=this.props.secondaryModalContent.buttons?this.buildButtons(this.props.secondaryModalContent.buttons):n["default"].createElement(a["default"],{cancelAndClose:this.props.cancelAndClose,confirmAndClose:this.props.confirmAndClose}),n["default"].createElement("div",{className:"secondary-modal"},n["default"].createElement("p",{className:"secondary-modal__title"},this.props.secondaryModalContent.title),n["default"].createElement("p",null,this.props.secondaryModalContent.message),e)}})},656:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(1),n=r(i);t["default"]=n["default"].createClass({displayName:"fullscreen_controls",render:function(){var e=this.props.isFullscreen?"minimize":"fullscreen";return n["default"].createElement("div",{"data-cue":"discovery-fullscreen",className:"fcn-control fcn-control--right",onClick:this.props.toggleFullscreen},n["default"].createElement("span",{className:"fcn-icon fcn-icon-"+e}))}})},657:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(1),n=r(i);t["default"]=n["default"].createClass({displayName:"Image",render:function(){return n["default"].createElement("div",{className:"francine-image__container"},n["default"].createElement("img",{src:this.props.presenter.url,className:"fit-full francine-image"}))}})},658:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(295),n=r(i),o=s(3),a=r(o),l=s(1),c=r(l),u=s(5),h=(r(u),s(15)),d=r(h),f=s(2),p=r(f),m=s(297),g=s(38),v=r(g),y=s(20),_=r(y),b=s(123),k=r(b),w=s(729),x=r(w),T=s(724),S=r(T),C=s(720),E=r(C),P=s(303),M=r(P),N=s(642),F=r(N),O=s(288),A=r(O),I=s(283),L=r(I),j=s(282),R=s(659),D=r(R),B=s(671),U=r(B),W=s(292),q=r(W),$=s(289),H=r($),z=s(619),G=r(z),K=s(181),Q=r(K),V=s(182),J=r(V),Y=s(63),X=(r(Y),s(102)),Z=r(X),ee=s(16),te=r(ee),se=s(126),re=r(se),ie=s(305),ne=(r(ie),s(17)),oe=r(ne),ae=s(306),le=r(ae);t["default"]=c["default"].createClass({displayName:"lessons",mixins:m.LearnMixins.concat([x["default"],S["default"],E["default"],M["default"],d["default"].connect(oe["default"])]),getInitialState:function(){var e=this.props.initialLesson,t=this.props.course.lessons_order.indexOf(this.props.initialLesson.slug),s=this.props.initialExercise,r=this.props.initialLesson.exercises_order.indexOf(this.props.initialExercise.slug),i=this.getInitialProgress(this.props.progress);return{currentExerciseIndex:r,currentExercise:s,currentLesson:e,currentLessonIndex:t,adapter:this.getAdapter(s),progress:i,errors:{},readonly:!1,isAnon:!this.props.isRegisteredUser,drawerOpen:!1,godexStatus:{type:"",message:"",visible:!1},godexReady:!1,fileNavReady:!1,wall:this.anonymousUserWallIfNeeded(),skipTests:!1}},componentDidMount:function(){this.state.adapter.trigger("interface:ready"),this._setWorkspace(this.state.currentExercise),this.state.adapter.extendCache(),this.addExtraComponentsToAdapter(this.state.adapter),this.refreshNav(),window.history.pushState({exerciseIndex:this.state.currentExerciseIndex,lessonIndex:this.state.currentLessonIndex},this.state.currentExercise.title,this.state.currentExercise.path+location.search),window.addEventListener("popstate",function(e){e.state&&this.navigate(e.state.lessonIndex,e.state.exerciseIndex,{push:!1})}.bind(this)),(0,v["default"])("info","Mounted Lessons controller on exercise: "+this.state.currentExercise.slug)},getAdapter:function(e){var t=n["default"].forComponents(e.components);return t.controller=this,this.state&&this.state.adapter&&(t.inheritCache(this.state.adapter),this.state.adapter.destroy()),this.addExtraComponentsToAdapter(t),Z["default"].newAdapter(t),t},setUpWorkspace:function(){var e=this,t=this.state.currentExercise.setup;void 0!==t&&this.isActiveCheckpoint(this.state.currentLessonIndex,this.state.currentExerciseIndex,0)&&re["default"].execute(t.command).then(function(t){_["default"].increment("francine.godexer.setup-exercise","success"),te["default"].persist().then(function(){e.state.adapter.trigger("interface:ready")})},function(t){_["default"].increment("francine.godexer.setup-exercise","error"),e._apologize()})},addExtraComponentsToAdapter:function(e){var t=this;a["default"].defer(function(){void 0!==t.refs.globalModal&&e.registerComponent&&e.registerComponent("GlobalModal",t.refs.globalModal)})},componentWillUpdate:function(e,t){(t.currentExerciseIndex!==this.state.currentExerciseIndex||t.currentLessonIndex!==this.state.currentLessonIndex)&&this._setWorkspace(t.currentExercise)},componentDidUpdate:function(e,t){this.addExtraComponentsToAdapter(this.state.adapter),(t.currentExerciseIndex!==this.state.currentExerciseIndex||t.currentLessonIndex!==this.state.currentLessonIndex)&&(this.isAccessible(this.state.currentLessonIndex,this.state.currentExerciseIndex,0)||this.setProgressToCurrentExercise(),this.state.adapter.trigger("interface:ready"),this.state.adapter.extendCache(),le["default"].setCursor({course:this.props.course,lesson:this.state.currentLesson,exercise:this.state.currentExercise})),!this.state.wall&&this.state.shouldShowCompletionModal&&this.completeLesson()},isExerciseLocked:function(e,t){return void 0===e&&(e=this.state.currentLessonIndex),void 0===t&&(t=this.state.currentExerciseIndex),!this.state.nolock&&!this.isAccessible(e,t,0)},updateExerciseComponent:function(e,t){var s=JSON.parse(JSON.stringify(this.state.currentExercise));return void 0===s.components[e]?(console.warn("Couldn't update exercise component \""+e+'"'),void console.trace()):(s.components[e]=a["default"].extend(s.components[e],t),void this.setState({currentExercise:s}))},_showingFinalExercise:function(){return this.state.currentLessonIndex===this.props.course.lessons_order.length-1&&this.state.currentExerciseIndex===this.state.currentLesson.exercises_order.length-1},completeLesson:function(){if(this.props.segment){var e=void 0,t=void 0,s=this.currentUnit();if(this.courseIsComplete())return void(window.location=a["default"].get(this.props,"exitPaths.back","/learn"));if(this.projectIsNext()&&(e=s.projects[0]),this.isLastLesson()){var r=this.currentUnitIndex(),i=this.props.segment.units[r+1];if(t=i.lessons[0],!t&&(e=i.projects[0],!e.should_show))return void(window.location=k["default"].get("landing_path")||"/learn")}else t=s.lessons[this.currentUnitIndex()+1];this.setState({wall:c["default"].createElement(Q["default"],{type:"screen",course:this.state.lesson,nextProject:e,onClose:this.clearWall,nextLesson:t})})}},_clearWall:function(){this.setState({wall:void 0})},_pickAWall:function(){return this.state.wall?this.state.wall:this.state.workspaceIdle?c["default"].createElement(q["default"],null):this.isExerciseLocked()?c["default"].createElement(D["default"],{courseStarted:this.isCourseStarted(),course:this.props.course}):this._showingFinalExercise()&&this.canAccessNextExercise()&&this.props.course.wip?c["default"].createElement(U["default"],null):void 0},setProgressToCurrentExercise:function(){var e=this.state.currentExercise.components.Narrative;if(e){var t=e.checkpoints;if(t){var s=!0,r=!1,i=void 0;try{for(var n,o=t[Symbol.iterator]();!(s=(n=o.next()).done);s=!0){var a=n.value;a.status="default"}}catch(l){r=!0,i=l}finally{try{!s&&o["return"]&&o["return"]()}finally{if(r)throw i}}}}this.setAndUpdateProgressState({lessonIndex:this.state.currentLessonIndex,exerciseIndex:this.state.currentExerciseIndex,checkpointIndex:0})},currentWorkspace:function(){var e={};try{e=this.state.currentExercise.workspace}catch(t){e=this.props.initialExercise.workspace}return e},uploadInitialSavepoint:function(){this.state.adapter.trigger("godmode:uploadInitial")},_mayResetExercise:function(){return void 0!==this.state.adapter&&void 0!==this.state.adapter.checkpoints&&this.state.adapter.checkpoints.length>0&&!this.state.isAnon},_contentStudioURL:function(){var e=this.props.revision||"master",t="http://contentstudio.codecademy.com/#/"+e+"/courses",s=this.props.course.slug,r=this.state.currentLesson.unit_slug,i=this.state.currentLesson.slug,n=this.state.currentExercise.slug;return t+"/"+s+"/units/"+r+"/lessons/"+i+"/exercises/"+n},render:function(){var e={isAnon:this.state.isAnon},t={readonly:this.state.readonly,fileNavReady:this.state.fileNavReady,isProject:!1,features:this.props.features},s={errors:this.state.errors,wall:this._pickAWall(),groupsLink:this.props.course.meta.qa_forum_url},r={componentShouldBeDisabled:this.componentShouldBeDisabled},i=(0,p["default"])({francine:!0,"francine--butterbar":this.props.hasButterbar});return c["default"].createElement("div",{id:"workspace",className:i},c["default"].createElement(L["default"],{exitPaths:this.props.exitPaths,title:this.props.course.title,godexStatus:this.state.godexStatus,uploadInitialSavepoint:this.uploadInitialSavepoint,setProgressToCurrentExercise:this.setProgressToCurrentExercise,profileImage:this.props.profileImage,currentExercise:this.state.currentExercise,"private":this.state.currentLesson["private"],prerender:this.props.prerender,contentStudioURL:this._contentStudioURL(),nolock:this.state.nolock,uploadSavepoints:this.state.uploadSavepoints}),this.discoveryCues(),c["default"].createElement(H["default"],{ref:"globalModal",broadcast:this.state.adapter.createComponentBroadcastFunction("GlobalModal"),environment:"lessons"}),c["default"].createElement(A["default"],{ref:"componentGrid",key:this.state.currentExercise.slug,components:this.state.currentExercise.components,adapter:this.state.adapter,modifiers:t,helpers:r,presenter:s,user:e}),c["default"].createElement(F["default"],{achievements:this.state.achievements}),c["default"].createElement(j.Footer,{disabled:this.componentShouldBeDisabled("Footer"),course:this.props.course,progress:this.state.progress.current_state,initialUnit:this.state.currentLesson.unit_slug,initialLesson:this.state.currentLesson.slug,initialExercise:this.state.currentExercise.slug,titleRoute:a["default"].get(this.props,"exitPaths.back"),title:this.state.currentExerciseIndex+1+". "+this.state.currentExercise.title,unlockAll:this.state.nolock},c["default"].createElement(j.FooterSection,{position:"center"},c["default"].createElement(G["default"],{exitPaths:this.props.exitPaths,mayProceed:this.state.nolock||!this.isOnFarthestUnlockedExercise()||this.canAccessNextExercise(),currentLessonIndex:this.state.currentLessonIndex,currentLesson:this.state.currentLesson,currentExerciseIndex:this.state.currentExerciseIndex,currentExercise:this.state.currentExercise,exerciseNames:this.state.currentLesson.exercises_order,navigate:this.navigate,course:this.props.course,farthestCompleteExerciseIndex:this.state.progress.current_state.exercise,farthestCompleteLessonIndex:this.state.progress.current_state.lesson})),c["default"].createElement(j.FooterSection,{position:"right"},c["default"].createElement(J["default"],{noun:"exercise",courseSlug:this.state.currentLesson.course_slug,contentSlug:this.state.currentLesson.slug,contentTitle:this.state.currentLesson.title,allowReset:this._mayResetExercise(),courseMeta:this.props.course.meta}))))}})},659:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(1),n=r(i),o=s(78),a=r(o),l=s(32);t["default"]=n["default"].createClass({displayName:"locked_exercise_wall",render:function(){var e=this.props.courseStarted?(0,l.t)("views.learning_environment.components.locked_exercise_wall.continue"):this.props.course.title,t=this.props.courseStarted?(0,l.t)("views.learning_environment.components.locked_exercise_wall.started_text"):(0,l.t)("views.learning_environment.components.locked_exercise_wall.unstarted_text"),s=this.props.courseStarted?(0,l.t)("views.learning_environment.components.locked_exercise_wall.resume"):(0,l.t)("views.learning_environment.components.locked_exercise_wall.start");return n["default"].createElement(a["default"],null,n["default"].createElement("h2",null,e),n["default"].createElement("p",null,t),n["default"].createElement("a",{href:this.props.course.resume_path,className:"button button--alternate fcn-wall__nav"},s))}})},660:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e};Object.defineProperty(t,"__esModule",{value:!0});var n=s(646),o=r(n),a=s(285),l=r(a),c=s(103),u=r(c),h=s(287),d=r(h),f=s(1),p=r(f),m=s(187),g=r(m),v=s(32);t["default"]=p["default"].createClass({displayName:"Narrative",mixins:[g["default"]],getInitialState:function(){var e="",t="";return this.props.presenter.instructions&&(e=(0,u["default"])(this.props.presenter.instructions)),this.props.presenter.content&&(t=(0,u["default"])(this.props.presenter.content)),{content:t,instructions:e}},componentDidUpdate:function(e,t){this.listenForLinkClicks(".narrative--markdown a")},scrollToInstructions:function(){this.refs.accordion&&this.refs.accordion.openSection("instructions")},scrollToSupport:function(){this.refs.accordion&&this.refs.accordion.openSection("support")},render:function(){var e,t,s=this.props.presenter;!s.instructions||s.checkpoints&&0!==s.checkpoints.length||(e=p["default"].createElement("div",{className:"accordion-section-body__padded",dangerouslySetInnerHTML:{__html:this.state.instructions}})),s.checkpoints&&s.checkpoints.length>0&&(t=s.checkpoints.map(function(e,t){var r=s.checkpoints[t-1],n=!1;return r&&"satisfied"!==r.status&&(n=!0),p["default"].createElement(o["default"],i({key:"checkpoint-"+t,index:t+1,disabled:n},e))}));var r=[{heading:p["default"].createElement("span",{className:"learn-header"},p["default"].createElement("span",{className:"fcn-icon fcn-icon-learn"}),(0,v.t)("views.learning_environment.components.narrative.learn")),content:p["default"].createElement("div",{className:"accordion-section-body__padded narrative--markdown",dangerouslySetInnerHTML:{__html:this.state.content}}),key:"learn"}];return(e||t)&&r.push({heading:p["default"].createElement("span",null,p["default"].createElement("span",{className:"fcn-icon fcn-icon-instructions"}),(0,v.t)("views.learning_environment.components.narrative.instructions")),content:p["default"].createElement("div",{className:"narrative--markdown"},t,e),key:"instructions"}),r.push({heading:p["default"].createElement("span",{className:"support-header"},p["default"].createElement("div",{className:"fcn-icon fcn-icon-support"}),(0,v.t)("views.learning_environment.components.narrative.report_a_bug")),content:p["default"].createElement(l["default"],null),key:"support"}),p["default"].createElement("div",null,p["default"].createElement(d["default"],{content:r,ref:"accordion"}))}})},661:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(1),n=r(i),o=s(78),a=r(o),l=s(18),c=r(l),u=n["default"].createClass({displayName:"OutageWall",propTypes:{courseSlug:n["default"].PropTypes.string.isRequired},_sendAway:function(){c["default"].track("action","click",{target:"outageRedirect",skill:this.props.courseSlug}),window.location.replace("/learn")},render:function(){return n["default"].createElement(a["default"],null,n["default"].createElement("h2",null,"Sorry about that!"),n["default"].createElement("p",null,"There are a lot of people taking this course right now! It might be unavailable until the crowd clears."),n["default"].createElement("p",null,"Until then, how about taking one of our other courses?"),n["default"].createElement("button",{onClick:this._sendAway,className:"button button--alernative fcn-wall__nav"},"Browse More Courses"))}});t["default"]=u},662:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(1),n=r(i),o=s(2),a=r(o),l=s(5),c=r(l),u=s(15),h=r(u),d=s(739),f=r(d),p=s(3),m=r(p);s(22);var g=s(18),v=(r(g),s(707),s(9)),y=(r(v),s(123)),_=r(y),b=s(297),k=s(38),w=r(k),x=s(295),T=r(x),S=s(102),C=r(S),E=s(305),P=(r(E),s(283)),M=r(P),N=s(288),F=r(N),O=s(289),A=r(O),I=s(293),L=(r(I),s(181)),j=r(L),R=s(630),D=r(R),B=s(292),U=r(B),W=s(728),q=r(W),$=s(303),H=r($),z=s(17),G=r(z);t["default"]=n["default"].createClass({displayName:"projects",propTypes:{project:n["default"].PropTypes.object,course:n["default"].PropTypes.object,selfAssessments:n["default"].PropTypes.array,features:n["default"].PropTypes.object,skill:n["default"].PropTypes.object,isRegisteredUser:n["default"].PropTypes.bool,progress:n["default"].PropTypes.object,profileImage:n["default"].PropTypes.string},mixins:b.LearnMixins.concat([q["default"],H["default"],c["default"].listenTo(f["default"],"onSelfAssessmentChange"),h["default"].connect(G["default"])]),onSelfAssessmentChange:function(e,t){this.setState({selfAssessmentsDone:t,selfAssessments:e}),this.state.godexReady&&this.state.adapter.trigger("interface:persist")},getInitialState:function(){var e=f["default"].getInitialState({userProgress:this.props.selfAssessments,projectAssessments:this.props.project.self_assessments,projectSlug:this.props.project.slug,skillSlug:this.props.course.slug,revision:this.props.course.revision}),t={_schema:"Brief",objective:this.props.project.objective},s=this.props.project.components;s.Brief=t;var r=T["default"].forProjectsWithComponents(s);return r.controller=this,C["default"].newAdapter(r),{adapter:r,godexStatus:{type:"",message:"",visible:!1},isAnon:!this.props.isRegisteredUser,godexReady:!1,fileNavReady:!1,restoringFiles:!1,wall:this.anonymousUserWallIfNeeded(),components:s,selfAssessmentsDone:e.allDone,selfAssessments:e.assessments,progress:this.props.progress}},updateExerciseComponent:function(e,t){return void 0===this.state.components[e]?(console.warn("Tried to update a nonexistent component named ",e),void console.trace()):(this.state.components[e]=m["default"].extend(this.state.components[e],t),void this.setState({components:this.state.components}))},addExtrasToAdapter:function(e){var t=this;m["default"].defer(function(){void 0!==t.refs.globalModal&&e.registerComponent&&e.registerComponent("GlobalModal",t.refs.globalModal)})},componentDidMount:function(){var e=this;m["default"].defer(function(){e.addExtrasToAdapter(e.state.adapter)}),this._setWorkspace(this.props.project),this.state.adapter.trigger("interface:ready"),this.state.adapter.extendCache(),(0,w["default"])("info","Mounted Projects controller on project:"+this.props.project.slug)},componentDidUpdate:function(e,t){this.addExtrasToAdapter(this.state.adapter)},currentWorkspace:function(){var e=this.props.project.workspace;return e},gridSetup:function(e){0===this.state.progress.status&&e.expandSlotInDirection(25,"left")},setUpWorkspace:function(){},componentsToHide:function(){return Object.keys(this.props.project.components).filter(function(e){return"Brief"!==e&&"WebBrowser"!==e})},revealComponents:function(){var e=!0,t=!1,s=void 0;try{for(var r,i=this.componentsToHide()[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var n=r.value;this.refs.componentGrid.expandSlotByName(n)}}catch(o){t=!0,s=o}finally{try{!e&&i["return"]&&i["return"]()}finally{if(t)throw s}}this.setState({grid:this.state.grid})},wall:function(){return this.state.wall?this.state.wall:this.state.workspaceIdle?n["default"].createElement(U["default"],null):void 0},_uploadInitialSavepoint:function(){this.state.adapter.trigger("godmode:uploadInitial")},clearWall:function(){this.setState({wall:void 0})},completeProject:function(){if(this.props.segment){var e=void 0,t=void 0,s=this.currentUnit();if(this.courseIsComplete())return void(window.location=m["default"].get(this.props,"exitPaths.back"));if(this.projectIsNext())e=s.projects[this.currentProjectIndex()+1];else if(this.isLastProject()){var r=this.currentUnitIndex(),i=this.props.segment.units[r+1];if(t=i.lessons[0],!t&&(e=i.projects[0],!e.should_show))return void(window.location=_["default"].get("landing_path")||"/learn")}else t=s.lessons[this.currentUnitIndex()+1];this.setState({wall:n["default"].createElement(j["default"],{type:"screen",course:this.props.course,nextProject:e,onClose:this.clearWall,nextLesson:t})})}},getSelfAssessmentTasks:function(){var e=this.state.selfAssessments||[],t=(0,m["default"])(e).pluck("tasks").flatten().value();return t},_contentStudioURL:function(){var e=this.props.revision||"master",t="http://contentstudio.codecademy.com/#/"+e+"/courses",s=this.props.course.slug,r=this.props.project.unit_slug,i=this.props.project.slug;return t+"/"+s+"/units/"+r+"/projects/"+i},render:function(){var e={componentShouldBeDisabled:this.componentShouldBeDisabled,positionCueSignal:this.positionCueSignal},t={readonly:!1,fileNavReady:!0,isProject:!0,assessments:this.state.selfAssessments,features:this.props.features},s={progress:this.state.progress,wall:this.wall()},r=n["default"].createElement(F["default"],{ref:"componentGrid",components:this.state.components,adapter:this.state.adapter,helpers:e,modifiers:t,presenter:s,gridSetup:this.gridSetup,user:{isAnon:!1}}),i=(0,a["default"])({"fcn-projects":!0,francine:!0,"francine--butterbar":this.props.hasButterbar});(0,a["default"])({"fcn-nav-footer":!0,disabled:this.componentShouldBeDisabled("Footer")});return n["default"].createElement("div",{className:i,id:"workspace"},n["default"].createElement(M["default"],{exitPaths:this.props.exitPaths,title:this.props.exitPaths.title,godexStatus:this.state.godexStatus,onAdminChange:this.handleAdminChange,profileImage:this.props.profileImage,uploadInitialSavepoint:this._uploadInitialSavepoint,currentExercise:this.props.project,prerender:this.props.prerender,contentStudioURL:this._contentStudioURL(),nolock:this.state.nolock,uploadSavepoints:this.state.uploadSavepoints}),this.discoveryCues(),n["default"].createElement(A["default"],{ref:"globalModal",broadcast:this.state.adapter.createComponentBroadcastFunction("GlobalModal"),user:{isAnon:!1},environment:"projects"}),r,n["default"].createElement(D["default"],{
course:this.props.course,initialUnit:this.props.project.unit_slug,initialLesson:this.props.project.slug,initialExercise:this.props.project.slug,disabled:this.componentShouldBeDisabled("Footer"),exitPaths:this.props.exitPaths,courseTitle:this.props.course.title,courseSlug:this.props.course.slug,courseMeta:this.props.course.meta,projectSlug:this.props.project.slug,projectTitle:this.props.project.title,"private":this.props.project["private"],tasks:this.getSelfAssessmentTasks(),tasksComplete:this.state.selfAssessmentsDone,title:""+this.props.project.title,onProjectComplete:this.completeProject}))}})},663:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}Object.defineProperty(t,"__esModule",{value:!0});var n=s(1),o=r(n),a=s(2),l=r(a);t["default"]=o["default"].createClass({displayName:"slot",render:function(){var e=this,t=this.props.slot.geometry,s={position:"absolute",top:100*t.top()+"%",right:100-100*t.right()+"%",bottom:100-100*t.bottom()+"%",left:100*t.left()+"%"},r=(0,l["default"])({"fcn-component":!0,disabled:this.props.modifiers.disabled||this.props.modifiers.collapsed,collapsed:this.props.modifiers.collapsed}),n=(0,l["default"])({"fcn-slot":!0,"fcn-slot--no-top-neighbor":t.soloEdges().top,"fcn-slot--no-right-neighbor":t.soloEdges().right,"fcn-slot--no-bottom-neighbor":t.soloEdges().bottom,"fcn-slot--no-left-neighbor":t.soloEdges().left,collapsed:this.props.modifiers.collapsed,"fcn-slot--collapsed-x":t.withinCollapseThreshold("x"),"fcn-slot--collapsed-y":t.withinCollapseThreshold("y")});return o["default"].createElement("div",{id:"discovery-resize-"+this.props.locations,className:n,style:s,"data-fcn-arrangement":this.props.slot.arrangement.slots},o["default"].createElement("div",{className:r},o["default"].createElement("div",{className:"overlay"}),o["default"].createElement(this.props.component.constructor,{features:this.props.features,presenter:this.props.component.presenter,user:this.props.user,broadcast:this.props.adapter.createComponentBroadcastFunction(this.props.component.name),modifiers:this.props.modifiers,helpers:this.props.helpers,geometry:this.props.slot.geometry,ref:this.props.component.name})),t.withinCollapseThreshold("x")||t.withinCollapseThreshold("y")?o["default"].createElement("div",{className:(0,l["default"])(i({"fcn-slot-snapped-button":!0},"fcn-slot-snapped-button--"+this.props.component.name,!0)),onClick:function(){e.props.expandSlot(e.props.slot.geometry.id)}},o["default"].createElement("div",{className:(0,l["default"])(i({"fcn-slot-snapped-button__icon":!0,"fcn-icon":!0},"fcn-icon-"+(this.props.component.icon||"learn"),!0))})):void 0)},componentDidMount:function(){this.props.adapter.registerComponent&&this.props.adapter.registerComponent(this.props.component.name,this.refs[this.props.component.name])},componentDidUpdate:function(){this.props.adapter.registerComponent&&this.props.adapter.registerComponent(this.props.component.name,this.refs[this.props.component.name])}})},664:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(1),n=r(i),o=s(7),a=r(o),l=n["default"].createClass({displayName:"SQLPreview",propTypes:{result:n["default"].PropTypes.string.isRequired},resultTable:function(){var e,t=(0,a["default"])("<div/>");return(0,a["default"])("<div/>").html(this.props.result).find("tr").each(function(s,r){(0,a["default"])(r).find("th").length>0&&(e=(0,a["default"])("<table/>"),t.append(e)),e.append(r)}),t.html()},results:function(){return""===this.props.result?n["default"].createElement("div",{className:"fcn-sqlpreview--schema--undef"},"Run a query to see results."):n["default"].createElement("div",{className:"fcn-sqlpreview--results-table",dangerouslySetInnerHTML:{__html:this.resultTable()}})},render:function(){return n["default"].createElement("div",{className:"fcn-sqlpreview--results"},n["default"].createElement("h3",null,"Query Results"),this.results())}});t["default"]=l},665:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(1),n=r(i),o=s(3),a=r(o),l=n["default"].createClass({displayName:"SQLPreview",propTypes:{schema:n["default"].PropTypes.array.isRequired},schemaTable:function(){return null==this.props.schema||0===this.props.schema.length?n["default"].createElement("div",{className:"fcn-sqlpreview--schema--undef"},"Schema undefined."):a["default"].map(this.props.schema,function(e){var t=a["default"].map(e.Columns,function(e){return n["default"].createElement("tr",null,n["default"].createElement("td",{className:"fcn-sqlpreview--schema--name"},e.Name),n["default"].createElement("td",{className:"fcn-sqlpreview--schema--type"},e.Type))});return n["default"].createElement("table",null,n["default"].createElement("thead",null,n["default"].createElement("tr",null,n["default"].createElement("th",{colSpan:"2"},e.Name,n["default"].createElement("span",{className:"fcn-sqlpreview--schema--rows"},e.Rows," rows")))),n["default"].createElement("tbody",null,t))})},render:function(){return n["default"].createElement("div",{className:"fcn-sqlpreview--schema"},n["default"].createElement("h3",null,"Database Schema"),n["default"].createElement("div",null,this.schemaTable()))}});t["default"]=l},666:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(1),n=r(i),o=s(665),a=r(o),l=s(664),c=r(l),u=n["default"].createClass({displayName:"SQLPreview",getInitialState:function(){return{result:"",schema:[],dump:{}}},render:function(){return n["default"].createElement("div",{className:"fcn-sqlpreview--container"},n["default"].createElement(a["default"],{schema:this.state.schema}),n["default"].createElement(c["default"],{result:this.state.result}))}});t["default"]=u},667:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(1),n=r(i),o=s(30),a=r(o),l=s(2),c=r(l),u=n["default"].createClass({displayName:"TaskCheckBox",mixins:[a["default"]],propTypes:{checked:n["default"].PropTypes.bool.isRequired,onClick:n["default"].PropTypes.func.isRequired,broadcast:n["default"].PropTypes.func.isRequired},componentDidMount:function(){this.props.broadcast("taskItemMounted")},render:function(){var e=(0,c["default"])({"fcn-task__check":!0,"fcn-task__check--checked":this.props.checked});return n["default"].createElement("div",{"data-cue":"discovery-checklist",className:e,onClick:this.props.onClick},n["default"].createElement("span",{className:"fcn-icon fcn-icon-checkmark fcn-task__icon"}))}});t["default"]=u},668:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(1),n=r(i),o=s(30),a=r(o),l=s(2),c=r(l),u=s(667),h=r(u),d=s(103),f=r(d),p=s(627),m=r(p),g=n["default"].createClass({displayName:"TaskItem",mixins:[a["default"]],propTypes:{done:n["default"].PropTypes.bool.isRequired,text:n["default"].PropTypes.string.isRequired,number:n["default"].PropTypes.number.isRequired,setTask:n["default"].PropTypes.func.isRequired,hint:n["default"].PropTypes.string},getInitialState:function(){return{text:(0,f["default"])(this.props.text)}},handleClick:function(){this.props.setTask(!this.props.done)},render:function(){var e=(0,c["default"])({"fit-full":!0,"fcn-task":!0,"fcn-task--complete":this.props.done});return n["default"].createElement("article",{className:e},n["default"].createElement("div",{className:"grid-row accordion-section-body__padded",onClick:this.handleClick},n["default"].createElement("div",{className:"grid-col-1 grid-col--no-padding"},n["default"].createElement(h["default"],{broadcast:this.props.broadcast,checked:this.props.done})),n["default"].createElement("div",{className:"grid-col-1 grid-col--no-padding"},n["default"].createElement("span",{className:"fcn-task__number"},this.props.number,".")),n["default"].createElement("div",{className:"grid-col-10 grid-col--no-padding"},n["default"].createElement("div",{className:"task--markdown",dangerouslySetInnerHTML:{__html:this.state.text}}))),this.props.hint?n["default"].createElement(m["default"],{hint:this.props.hint}):null)}});t["default"]=g},669:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(1),n=r(i),o=s(187),a=r(o),l=s(668),c=r(l),u=s(670),h=r(u);t["default"]=n["default"].createClass({displayName:"TaskList",mixins:[a["default"]],propTypes:{broadcast:n["default"].PropTypes.func.isRequired,tasks:n["default"].PropTypes.array.isRequired,setTask:n["default"].PropTypes.func.isRequired},componentDidUpdate:function(e,t){this.listenForLinkClicks(".task--markdown a")},makeTaskItems:function(e,t,s){var r=this,i=[];return e.forEach(function(e,o){i.push(n["default"].createElement(c["default"],{text:e.text,number:o+1+t,key:"task-"+e.key,hint:e.hint,done:e.done,broadcast:r.props.broadcast,setTask:function(e){r.props.setTask(s,o,e)}}))}),n["default"].createElement("div",null,i)},render:function(){var e=this,t=[],s=0;return this.props.tasks.forEach(function(r,i){r.heading&&r.heading.length>0&&t.push(n["default"].createElement(h["default"],{key:"task-heading-"+i,heading:r.heading})),t.push(e.makeTaskItems(r.tasks,s,i)),s+=r.tasks.length}),n["default"].createElement("div",{className:"fcn-tasks"},n["default"].createElement("span",{className:"fcn-tasks__help"},"Mark the tasks as complete by checking them off"),t)}})},670:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(1),n=r(i),o=s(30),a=r(o),l=n["default"].createClass({displayName:"TaskListHeader",mixins:[a["default"]],propTypes:{heading:n["default"].PropTypes.string.isRequired,broadcast:n["default"].PropTypes.func.isRequired},render:function(){return n["default"].createElement("article",{className:"fit-full fcn-task-header"},this.props.heading)}});t["default"]=l},671:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(1),n=r(i),o=s(30),a=r(o),l=s(78),c=r(l),u=s(32),h=n["default"].createClass({displayName:"ComingSoonWall",propTypes:{dismiss:n["default"].PropTypes.func.isRequired},mixins:[a["default"]],render:function(){return n["default"].createElement(c["default"],{dismiss:this.props.dismiss},n["default"].createElement("div",null,n["default"].createElement("h2",null,(0,u.t)("views.learning_environment.components.coming_soon_wall.more_coming_soon")),n["default"].createElement("p",null,(0,u.t)("views.learning_environment.components.coming_soon_wall.body_text")),n["default"].createElement("a",{href:"/learn",className:"button button--alternate fcn-wall__nav"},(0,u.t)("views.learning_environment.components.coming_soon_wall.see_more_courses"))))}});t["default"]=h},672:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(1),n=r(i),o=s(30),a=r(o),l=s(78),c=r(l),u=n["default"].createClass({displayName:"CourseCompleteWall",propTypes:{courseName:n["default"].PropTypes.string.isRequired,courseSlug:n["default"].PropTypes.string.isRequired,achievements:n["default"].PropTypes.array.isRequired,dismiss:n["default"].PropTypes.func.isRequired},mixins:[a["default"]],render:function(){var e=this.props.achievements,t=void 0;e.forEach(function(e){/^skill-/.test(e.slug)&&(t=e)});var s=void 0;return s=t?"cc-achievement cc-achievement--"+t.icon:"cc-achievement cc-achievement--code-achievement",n["default"].createElement(c["default"],{dismiss:this.props.dismiss},n["default"].createElement("div",null,n["default"].createElement("h2",null,"Congratulations!"),n["default"].createElement("p",null,n["default"].createElement("span",{className:s})),n["default"].createElement("p",null,"Congratulations on completing the course ",n["default"].createElement("strong",null,this.props.courseName),"! You've learned a new skill and should be proud!"),n["default"].createElement("p",null,"Want to take a look at your profile and see what you've accomplished?"),n["default"].createElement("a",{href:"/profiles/me",className:"button button--alternate fcn-wall__nav"},"SEE YOUR ACHIEVEMENTS")))}});t["default"]=u},673:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(270),n=r(i);t["default"]=n["default"].extend({initialize:function(){},createComponentBroadcastFunction:function(e){return function(){var t=arguments[0],s=["component",e,t].join(":"),r=Array.prototype.slice.call(arguments,1),i=[s].concat(r);this.trigger.apply(this,i)}.bind(this)},_handle:function(e){this._handlers[e].forEach(function(e){e.call(this)}.bind(this))},registerComponent:function(e,t){this._components[e]=t},destroy:function(){this._handle("destroy");for(var e in this._events)this.off(e)},inheritCache:function(e){this._cache=e._cache},extendCache:function(){this._handle("extendCache")}})},674:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){return function(){function t(e,t){void 0!==e[t]&&(l[t].push(e[t]),delete e[t])}var s=n["default"].extend(!0,{mixins:[]},e),r={},i=s.mixins,o=[s.events],l={destroy:[],extendCache:[]};delete s.events,t(s,"destroy"),t(s,"extendCache"),r=a["default"].extend(r,s),void 0!==i&&i.forEach(function(e){t(e,"destroy"),t(e,"extendCache"),o.push(a["default"].extend({},e.events)),delete e.events,r=a["default"].extend(r,e)});var u=c["default"].extend(r),h=new u;return h._handlers=l,h._components={},h._state={},h._cache={},o.forEach(function(e){for(var t in e)h.on(t,e[t].bind(h))}),h}};var i=s(7),n=r(i),o=s(3),a=r(o),l=s(673),c=r(l)},675:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(7);r(i);s(22);var n=s(18),o=(r(n),s(16)),a=r(o);t["default"]={events:{"interface:persist":function(){a["default"].persist()},"component:Brief:start":function(){var e=this;this._components.WebBrowser&&this._components.WebBrowser.home(),this.controller.updateProgress(1,{success:function(){e.controller.revealComponents(),e.controller.setState({progress:{status:1}})}})}}}},676:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={events:{"component:NonPersistentCodeEditor:update":function(e){this.controller.updateExerciseComponent("FullWebPreview",e)},"component:PersistentCodeEditor:update":function(e){this.controller.updateExerciseComponent("FullWebPreview",e)}}}},677:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(20),n=r(i);t["default"]={events:{"component:PersistentCodeEditor:showFileNav":function(e){this._components.GlobalModal.toggleModal("FileTool")},"component:PersistentCodeEditor:openMissingFilesDialog":function(e){this.openMissingFilesDialog(e)},"component:GlobalModal:toggleModal":function(){this._components.GlobalModal.toggleModal("FileTool")},"component:GlobalModal:toggleFileTool":function(){this._components.GlobalModal.closeAddFileTool()},"component:GlobalModal:getConfirmation":function(e,t){this._components.GlobalModal.setState({secondaryModalContent:e,confirmationCB:t})}},openMissingFilesDialog:function(e){var t=e.slice(e.lastIndexOf("/")+1||0,e.length),s=this._components.GlobalModal.resetFilesContent(e,t);this._components.GlobalModal.openSecondaryModal(s),n["default"].increment("francine.filenav.move-file","error")}}},678:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={events:{"component:NonPersistentCodeEditor:update":function(e){this.controller.updateExerciseComponent("NonPersistentCodeEditor",e)}}}},679:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={events:{"component:PersistentCodeEditor:toggleFileTool":function(){this._components.PersistentCodeEditor.toggleFileTool()},"component:PersistentCodeEditor:submit":function(){this.handleWorkspaceSaveAfterSubmit()}}}},680:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={_buildTemplatedFile:function(e){var t=this._components.PresetTemplatedWebPreview.props.presenter.source;return t=t.replace("{{{snippet}}}",e.content),{files:[{filename:"index.html",content:t}]}},events:{"component:PresetTemplatedWebPreview:selectSnippet":function(e){this.controller.updateExerciseComponent("PresetTemplatedWebPreview",this._buildTemplatedFile(e))}}}},681:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(33),n=r(i);t["default"]={events:{"godex:ready":function(){var e=this;n["default"].state.client.on("sql:stdout",function(t){e._components.SQLPreview.setState({result:t.result,schema:t.schema}),""!=t.error?e.controller.setState({errors:{visible:!0,timestamp:(new Date).valueOf(),friendly:t.error,component:"PersistentCodeEditor"},skipTests:!0}):e.controller.setState({skipTests:!1})})}}}},682:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={events:{"component:NonPersistentEditor:update":function(e){},"interface:ready":function(){}}}},683:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(33),n=r(i),o=s(17),a=r(o),l=s(3);r(l);t["default"]={events:{"godex:ready":function(){n["default"].state.client.on("RailsErr",function(e){this._components.Terminal.getActiveTerminal().print(e.RailsError+"\n")}.bind(this))},"lifesaver:restored":function(e){this._components.Terminal&&this._components.Terminal.resetTerminals()},"interface:resized":function(){this._components.Terminal&&this._components.Terminal.onResize()},"component:Terminal:pty":function(e,t){var s=e.split(" "),r=s[0],i=s.slice(1);n["default"].state.client.spawnPty(a["default"].state.workspaceSlug,{Name:r,Args:i},function(e,s){t({fake:!1,ptyStream:s}),s.on("end",function(){t({fake:!0})})})},"component:Terminal:input":function(e,t){n["default"].state.client.execute(a["default"].state.workspaceObject.slug,e,function(s,r){t(e,r.Content,r.Error?1:0)}.bind(this))}}}},684:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={}},685:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={events:{"component:PersistentCodeEditor:openedFile":function(){this.dirtyUIState()}},submit:function(){void 0!==this.checkpoints&&this.checkpoints.length>0&&this.controller.refs.componentGrid.expandSlotByName("Narrative"),this.handleWorkspaceSaveAfterSubmit()},handleWorkspaceSaveAfterSubmit:function(){void 0===this.checkpoints||0===this.checkpoints.length||this.controller.state.skipTests?this.cleanUp():(this.dirtyWorkspaceState(),this.runCheckpointTests())}}},686:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={events:{"component:Terminal:result":function(){this.dirtyUIState(),this.dirtyWorkspaceState(),this.runCheckpointTests()},"component:Terminal:pty_result":function(){this.dirtyUIState(),this.dirtyWorkspaceState(),this.runCheckpointTests()}}}},687:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={events:{"component:WebBrowser:runTests":function(){this.dirtyUIState(),this.runCheckpointTests()},"component:Narrative:navigateToURL":function(e){this.dirtyUIState(),this.runCheckpointTests()}}}},688:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(52),n=r(i),o=s(16);r(o);t["default"]={handleWorkspaceSaveAfterSubmit:function(){n["default"].refresh()}}},689:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={}},690:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(127),n=r(i);t["default"]={events:{"interface:resized":function(){n["default"].resized()},"interface:resizing":function(){n["default"].resizing()},"component:Brief:taskItemMounted":function(){n["default"].resized()}}}},691:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(18),n=r(i),o=s(38),a=r(o),l=s(102),c=(r(l),s(17)),u=r(c);t["default"]={events:{"component:Narrative:showWall":function(e){this.controller.setState({wall:e})},"component:Narrative:hideWall":function(){this.controller.setState({wall:void 0})},"component:Narrative:fixFiles":function(){this.fixFiles()},"component:GlobalModal:fixFiles":function(){this.fixFiles()},"component:Reflux:fixFiles":function(){this.fixFiles()},"component:PersistentCodeEditor:keepTrying":function(){n["default"].track("exercise","offer_support",{skill:this.controller.props.course.slug,topic:this.controller.state.currentLesson.slug,exercise:this.controller.state.currentExercise.slug,failures:this._totalFailures,user_response:"keep_trying"}),this._failures=0},"component:PersistentCodeEditor:showAnswer":function(){n["default"].track("exercise","offer_support",{skill:this.controller.props.course.slug,topic:this.controller.state.currentLesson.slug,exercise:this.controller.state.currentExercise.slug,failures:this._totalFailures,user_response:"get_answer"}),this.controller.setState({godexReady:!1}),u["default"].setStatus("Fetching code...","neutral");var e=this.finalSavepointSlug(),t=function(e,t){e?u["default"].setStatus("Something went wrong.","error"):(u["default"].setStatus("Successfully retrieved code.","success"),(0,a["default"])("info","Successfully fetched answer files using Lakitu")),this.controller.setState({godexReady:!0})}.bind(this);this._failures=0,(0,a["default"])("info","Fetching answer files using Lakitu"),this.restoreWorkspace(e,t)},"tester:tested":function(e,t){if(e&&this.controller.state.uploadSavepoints){var s=this.finalSavepointSlug();u["default"].setStatus("Saving workspace checkpoint: "+s+"...","neutral"),this.checkpointWorkspace(s)}e||t||(this._failures++,this._totalFailures++,this._failures===this._cache.failureThreshold&&void 0!==this._components.PersistentCodeEditor&&this._components.PersistentCodeEditor.offerAnswer())},"lifesaver:restored":function(e){this.controller.hideErrors(),this.dirtyWorkspaceState()}},initialSavepointSlug:function(){return this.controller.state.currentExercise.slug+"-initial"},finalSavepointSlug:function(){return this.controller.state.currentExercise.slug+"-final"},fixFiles:function(){n["default"].track("exercise","fix_files",{skill:this.controller.props.course.slug,topic:this.controller.state.currentLesson.slug,exercise:this.controller.state.currentExercise.slug,failures:this._totalFailures});var e=this.initialSavepointSlug(),t=function(e,t){e?u["default"].setStatus("Something went wrong.","error"):(u["default"].setStatus("Fixed your files.","success"),this.controller.setProgressToCurrentExercise(),this.controller.refreshNav()),this.controller.setState({godexReady:!0})}.bind(this);this.controller.setState({godexReady:!1}),u["default"].setStatus("Fixing your files...","neutral"),this.restoreWorkspace(e,t)}}},692:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(1),n=(r(i),s(5)),o=(r(n),s(18)),a=(r(o),s(9)),l=(r(a),s(125)),c=(r(l),s(38)),u=r(c),h=s(33),d=r(h),f=s(17),p=r(f),m=s(130),g=r(m),v=s(16),y=r(v),_=s(52),b=r(_),k=4;t["default"]={extendCache:function(){void 0===this._cache.failureThreshold&&(this._cache.failureThreshold=k)},events:{"interface:ready":function(){this._failures=0,this._totalFailures=0},"godex:ready":function(){this.controller.state.uploadSavepoints&&this.uploadInitialSavepoint()},"godmode:uploadInitial":function(){this.uploadInitialSavepoint()}},uploadInitialSavepoint:function(){var e=this.initialSavepointSlug();p["default"].setStatus("Saving workspace checkpoint: "+e+"...","neutral"),this.checkpointWorkspace(e)},restoreWorkspace:function(e,t){var s=e.split("-").pop();switch((0,u["default"])("info","Restoring workspace using Lakitu: "+e),p["default"].state.workspaceBackend){case"godex":d["default"].state.client.restoreWorkspace(p["default"].state.workspaceSlug,e,function(e,s,r){if(t&&t(s,r),!s){(0,u["default"])("info","Successfully restored workspace using Lakitu"),this.trigger("lifesaver:restored",e);var i=!0,n=!1,o=void 0;try{for(var a,l=g["default"].files[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var c=a.value;y["default"].getFile(c)}}catch(s){n=!0,o=s}finally{try{!i&&l["return"]&&l["return"]()}finally{if(n)throw o}}b["default"].refresh()}}.bind(this,s));break;case"library":p["default"]["interface"].client.restore(p["default"].state.workspaceSlug,e).then(function(){y["default"].initialize().then(function(){var e=!0,t=!1,s=void 0;try{for(var r,i=g["default"].files[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var n=r.value;y["default"].getFile(n)}}catch(o){t=!0,s=o}finally{try{!e&&i["return"]&&i["return"]()}finally{if(t)throw s}}b["default"].refresh()},function(e){throw new Error(e)})},function(e){throw new Error(e)});break;default:throw new Error("Unknown workspaceBackend "+p["default"].state.workspaceBackend)}},checkpointWorkspace:function(e){d["default"].state.client.checkpointWorkspace(p["default"].state.workspaceSlug,e,function(e){e?p["default"].setStatus("Something went wrong.","error"):p["default"].setStatus("Saved workspace!","success")}.bind(this))}}},693:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(18),n=r(i),o=s(178),a=r(o),l=s(17),c=r(l);t["default"]={events:{"component:Reflux:fixFiles":function(){var e=this;n["default"].track("project","reset",{project:this.controller.props.project.slug}),a["default"].resetProject();var t=this.initialSavepointSlug(),s=function(t,s){t?c["default"].setStatus("Something went wrong","error"):(c["default"].setStatus("Your project was reset","success"),e.controller.updateProgress(0,{success:function(){e.controller.setProps({progress:{status:0}})}})),e.controller.setState({godexReady:!0})};this.controller.setState({godexReady:!1}),c["default"].setStatus("Resetting your project...","neutral"),this.restoreWorkspace(t,s)},"component:Brief:showWall":function(e){this.controller.setState({wall:e})},"component:Brief:hideWall":function(e){this.controller.setState({wall:void 0})}},initialSavepointSlug:function(){return""}}},694:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var _problem_reporter=__webpack_require__(299),_problem_reporter2=_interopRequireDefault(_problem_reporter),_event_tracking=__webpack_require__(18),_event_tracking2=_interopRequireDefault(_event_tracking),_statsd=__webpack_require__(20),_statsd2=_interopRequireDefault(_statsd),_webSCT=__webpack_require__(702),_webSCT2=_interopRequireDefault(_webSCT),_rubySCT=__webpack_require__(701),_rubySCT2=_interopRequireDefault(_rubySCT),_rspecTest=__webpack_require__(700),_rspecTest2=_interopRequireDefault(_rspecTest),_karmaTest=__webpack_require__(699),_karmaTest2=_interopRequireDefault(_karmaTest),_batsTest=__webpack_require__(695),_batsTest2=_interopRequireDefault(_batsTest),_componentTest=__webpack_require__(696),_componentTest2=_interopRequireDefault(_componentTest),_workspaceTest=__webpack_require__(703),_workspaceTest2=_interopRequireDefault(_workspaceTest),_executeFileTest=__webpack_require__(697),_executeFileTest2=_interopRequireDefault(_executeFileTest),_executeTest=__webpack_require__(698),_executeTest2=_interopRequireDefault(_executeTest),_error_recognition=__webpack_require__(711),_logger=__webpack_require__(27),_logger2=_interopRequireDefault(_logger),_activityLogger=__webpack_require__(38),_activityLogger2=_interopRequireDefault(_activityLogger),_WorkspaceActions=__webpack_require__(16),_WorkspaceActions2=_interopRequireDefault(_WorkspaceActions),_WorkspaceStore=__webpack_require__(17),_WorkspaceStore2=_interopRequireDefault(_WorkspaceStore),_WebBrowserActions=__webpack_require__(52),_WebBrowserActions2=_interopRequireDefault(_WebBrowserActions),Testers={webSCT:_webSCT2["default"],rubySCT:_rubySCT2["default"],rspecTest:_rspecTest2["default"],karmaTest:_karmaTest2["default"],componentTest:_componentTest2["default"],workspaceTest:_workspaceTest2["default"],batsTest:_batsTest2["default"],executeFileTest:_executeFileTest2["default"],executeTest:_executeTest2["default"]},COMPONENT_HINT_ORDER=["PersistentCodeEditor","Terminal","WebBrowser"];exports["default"]={events:{"interface:ready":function interfaceReady(){this._untestedState={dirtyWorkspace:!1,dirtyUI:!1},this.checkpoints=[],this.controller.setState({adapter:this});var checkpoint=this._loadCheckpoint.bind(this);try{eval(this.controller.state.currentExercise.tests.checkpoints)}catch(e){_statsd2["default"].increment("francine.tester.checkpoints","eval-error"),_WorkspaceStore2["default"].setStatus("Aw, snap! There's an error in the exercise. Please try again later.","error"),this._reportEvalError(e,"Eval error when parsing checkpoints")}0!==this.checkpoints.length||this.controller.state.readonly?(this.checkpoints.forEach(function(e,t){var s=this.controller.isCheckpointComplete(this.controller.state.currentLessonIndex,this.controller.state.currentExerciseIndex,t);e.status=s?"satisfied":"default"},this),this.controller.updateExerciseComponent("Narrative",{checkpoints:this.checkpoints}),this.controller.refreshNav()):this.controller.isExerciseComplete(this.controller.state.currentLessonIndex,this.controller.state.currentExerciseIndex)||this.controller.handleCheckpointUpdate({checkpointIndex:-1})},"lifesaver:restored":function(e){"final"===e?this._completeCheckpoints():"initial"===e?this._resetCheckpoints():console.error("Unknown lakitu type: "+e)}},_loadCheckpoint:function(e,t){void 0===this.checkpoints&&(this.checkpoints=[]),this.checkpoints.push({label:e,test:t.bind(this),status:"default",message:""})},dirtyWorkspaceState:function(){this._untestedState.dirtyWorkspace=!0},dirtyUIState:function(){this._untestedState.dirtyUI=!0},clearUntestedState:function(){this._untestedState={dirtyUI:!1,dirtyWorkspace:!1}},runCheckpointTests:function(){var e=this;if(!this._cache.runningCheckpointTests&&!this.controller.state.isAnon&&!this.controller.state.readonly)if(this._cache.runningCheckpointTests=!0,this._cache.abort=!1,this._components.WebBrowser&&this._untestedState.dirtyWorkspace){var t=!1;_WebBrowserActions2["default"].refresh().then(function(){t=!0,setTimeout(function(){e._startRunningCheckpoints()},750)}),setTimeout(function(){return e._cache.abort?e.cleanUp():void(t||e._startRunningCheckpoints())},1e4)}else this._startRunningCheckpoints()},_startRunningCheckpoints:function(){if(0===this.checkpoints.length)return void this.cleanUp();this._setupBeforeRunning();for(var e=-1,t=0;t<this.checkpoints.length;t++)if("satisfied"!==this.checkpoints[t].status){e=t;break}return-1===e?void this.cleanUp():((0,_activityLogger2["default"])("info","Running checkpoints starting with index "+e),void this._runCheckpointTest(e))},abortCheckpoints:function(){this._cache.runningCheckpointTests&&(this._cache.abort=!0)},_checkForAllPassed:function(){return this.checkpoints.every(function(e){return"satisfied"===e.status})},_getTestsForCheckpoint:function(e){var t={componentTest:Testers.componentTest.bind(this),workspaceTest:Testers.workspaceTest.bind(this),executeFileTest:Testers.executeFileTest.bind(this),webSCT:Testers.webSCT.bind(this),rubySCT:Testers.rubySCT.bind(this),
rspecTest:Testers.rspecTest.bind(this),karmaTest:Testers.karmaTest.bind(this),activeBatsTest:Testers.batsTest.bind(this,!1),passiveBatsTest:Testers.batsTest.bind(this,!0),executeTest:Testers.executeTest.bind(this),batsTest:Testers.batsTest.bind(this,!0)},s=function(e,t){t.result({pass:!1,errors:{tool:"",component:""}},"autoFailTest")};return this._state.farthestProgressionAfterRun>this._state.farthestProgressionBeforeRun&&(this._untestedState.dirtyWorkspace||(t.rspecTest=s,t.karmaTest=s,t.webSCT=s,t.rubySCT=s,t.workspaceTest=s,t.executeFileTest=s),this._untestedState.dirtyUI||(t.componentTest=s)),t},_runCheckpointTest:function(e){var t=this;if(void 0===this.checkpoints)return console.warn("No checkpoints found for this exercise."),void this.cleanUp();if(this._cache.abort)return console.info("Aborted running checkpoints at index",e),this.cleanUp();var s=this.checkpoints[e],r={checkpointIndex:e,showPending:function(){t.checkpoints[e].status="pending",t.controller.updateExerciseComponent("Narrative",{checkpoints:t.checkpoints})},result:function(r,i){if(t._cache.abort)return console.info("Aborted running checkpoints at index",e),t.cleanUp();if(s.status=r.pass?"satisfied":"unsatisfied",t.controller.updateExerciseComponent("Narrative",{checkpoints:t.checkpoints}),r.pass)return t.controller.hideErrors(),t._state.farthestProgressionAfterRun=e,e<t.checkpoints.length-1?void t._runCheckpointTest(e+1):((0,_activityLogger2["default"])("info","Ran all checkpoints successfully"),void t.cleanUp());r.errors.component||(r.errors.component=t._chooseComponentForHint());var n=t._state.farthestProgressionAfterRun>t._state.farthestProgressionBeforeRun;if(n){for(var o=e;o<t.checkpoints.length;o++)t._unsetCheckpointState(t.checkpoints[o]);t._state.gotActiveFeedback=!0}else{r.passive?t._unsetCheckpointState(t.checkpoints[e]):t._state.gotActiveFeedback=!0;for(var o=e+1;o<t.checkpoints.length;o++)t._unsetCheckpointState(t.checkpoints[o]);if(r.errors.tool){var a=(0,_error_recognition.recognize)(r.errors.tool);switch(a.probableCause){case _error_recognition.causes.NETWORK_ISSUES:r.errors.friendly="Sorry, it looks like we're experiencing a temporary problem. Please try again!";break;case _error_recognition.causes.BAD_TERMINAL_INSTANCE:r.errors.friendly="Sorry, it looks like we're experiencing a temporary problem. Please try again!",t.incrementSuspicionThatInstanceIsBad();break;case _error_recognition.causes.UNKNOWN_CAUSE:r.errors.friendly="Something has gone wrong. Please try again in a little while.";break;case _error_recognition.causes.USER_ERROR:}t._instrumentRecognizedToolError(a),_logger2["default"].error({message:r.errors.tool,id:a.id,cause:a.probableCause},"platform_tool_errors")}r.passive||t.controller.showErrors(r.errors)}t.controller.updateExerciseComponent("Narrative",{checkpoints:t.checkpoints}),(0,_activityLogger2["default"])("info","Failed on checkpoint index "+e),t.cleanUp()}},i=this._getTestsForCheckpoint(e);try{s.test(i,r),_statsd2["default"].increment("francine.tester.checkpoints","test-eval-success")}catch(n){console.error("Checkpoint test run error:\n"+n),_statsd2["default"].increment("francine.tester.checkpoints","test-eval-error"),r.result({pass:!1,errors:{}}),_WorkspaceStore2["default"].setStatus("Aw, snap! There's an error in the exercise. Please try again later.","error"),this._reportEvalError(n,"Eval error when running checkpoint "+e)}},_chooseComponentForHint:function(){var e=!0,t=!1,s=void 0;try{for(var r,i=COMPONENT_HINT_ORDER[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var n=r.value;if(this.controller.state.currentExercise.components[n])return n}}catch(o){t=!0,s=o}finally{try{!e&&i["return"]&&i["return"]()}finally{if(t)throw s}}var a=Object.keys(this.controller.state.currentExercise.components).filter(function(e){return"Narrative"!==e});return a.length>0?a[0]:null},_setupBeforeRunning:function(){this._state.farthestProgressionBeforeRun=-1;for(var e=0;e<this.checkpoints.length;e++)"satisfied"===this.checkpoints[e].status&&(this._state.farthestProgressionBeforeRun=e);this._state.gotActiveFeedback=!1,this._state.farthestProgressionAfterRun=-1,this._state.testerSetupState={}},_runTesterWithSetup:function(e,t,s){var r=this;this._state.testerSetupState[e]!==!0?t.call(this,function(){r._state.testerSetupState[e]=!0,s.call(r)}):s.call(this)},cleanUp:function(){var e=-1;this.checkpoints.forEach(function(t,s){"satisfied"===t.status&&(e=s)},this),1>e&&this._state.gotActiveFeedback&&this._components.Narrative&&this._components.Narrative.scrollToInstructions();var t=this._state.farthestProgressionAfterRun>this._state.farthestProgressionBeforeRun,s=this._checkForAllPassed();_event_tracking2["default"].track("action","submit",{skill:this.controller.props.course.slug,curriculum:this.controller.props.course.slug,topic:this.controller.state.currentLesson.slug,exercise:this.controller.state.currentExercise.slug,number_checkpoints:this.checkpoints.length,last_passing_checkpoint_index:e,completed:s,correct:t,submit_type:"exercise_submit"}),this.trigger("tester:tested",s,t),this.clearUntestedState(),this._cache.runningCheckpointTests=!1,this._cache.abort=!1,this.controller.handleCheckpointUpdate({checkpointIndex:this._state.farthestProgressionAfterRun?this._state.farthestProgressionAfterRun:0})},_unsetCheckpointState:function(e){this._updateCheckpointState(e,"default")},_updateCheckpointState:function(e,t){e.status=t},_resetCheckpoints:function(){this._updateAllCheckpoints("default")},_completeCheckpoints:function(){this._updateAllCheckpoints("satisfied"),this._state.farthestProgressionAfterRun=this.checkpoints.length-1,this.cleanUp()},_updateAllCheckpoints:function(e){var t=this;this.checkpoints&&this.checkpoints.length&&(this.checkpoints.forEach(function(s){t._updateCheckpointState(s,e)}),this.controller.updateExerciseComponent("Narrative",{checkpoints:this.checkpoints}))},_reportEvalError:function(e,t){_problem_reporter2["default"].report({error:e,preface:t,type:"checkpoint-eval"}),(0,_activityLogger2["default"])("error",t+": '"+e.message.replace('"','"')+"'")},_instrumentRecognizedToolError:function(e){_statsd2["default"].increment("francine.tester.recognized-errors.id",e.id),_statsd2["default"].increment("francine.tester.recognized-errors.cause",e.probableCause)}}},695:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t,s){var r=this;if(void 0===a["default"].state.client)throw new Error("Not connected to Godex; can't run bats test");var i=(new Date).valueOf();a["default"].state.client.updateFiles(this.controller.state.currentExercise.workspace.slug,[{Filename:".test.bats",Content:this.controller.state.currentExercise.tests.files[t]}],function(){a["default"].state.client.execute(r.controller.state.currentExercise.workspace.slug,"bats .test.bats",function(t,r){n["default"].timing("francine.godexer.testers","batsTest",(new Date).valueOf()-i.valueOf());var o="";if(r.Error){var a=r.Content.split("\n"),l=a.filter(function(e){return/not ok/gi.test(e)});l.length>0?o=l[0].replace(/not ok \d/,""):(console.error("Warning: bats error output not as expected. You may have a malformed test file."),console.error(r.Content))}s.result({pass:!r.Error,passive:e,errors:{friendly:o}},"batsTest")}.bind(r))})};var i=s(20),n=r(i),o=s(33),a=r(o),l=s(17);r(l)},696:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t){var s=this;if(void 0===t)throw new Error("Callback missing from componentTest.");var r={FullWebPreview:this._components.FullWebPreview,WebBrowser:this._components.WebBrowser,CodeEditor:this._components.PersistentCodeEditor};if(this._components.Terminal)!function(){var i=s._components.Terminal.getActiveTerminal();if(i)r.Terminal=i;else{console.info("No active terminal; using noop");var o=function(){return!1};r.Terminal={ranOneOfWithExitCode:o,didRunCommand:o,didRunOneOf:o}}s._terminalPollingID&&window.clearInterval(s._terminalPollingID);var a=100,l=2e3/a,c=0;s._terminalPollingID=window.setInterval(function(){var i=void 0;try{i=e(r,t)}catch(o){i={pass:!1,passive:!0},n["default"].error(o)}void 0===i.passive&&(i.passive=!1),i.pass||c>l?(window.clearInterval(s._terminalPollingID),delete s._terminalPollingID,t.result(i,"componentTest")):c++},a)}();else{var i=e(r,t);void 0===i.passive&&(i.passive=!1),t.result(i,"componentTest")}};var i=s(27),n=r(i)},697:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t,s,r,i){if(void 0===n["default"].state.client)throw new Error("Not connected to Godex; can't run bats test");var o=this.controller.state.currentExercise.workspace.slug,l=n["default"].state.client,c=(new Date).valueOf();l.updateFiles(o,[{Filename:e,Content:this.controller.state.currentExercise.tests.files[e]}],function(){l.execute(o,t,function(t,n){a["default"].timing("francine.godexer.testers","executeFileTest",(new Date).valueOf()-c.valueOf()),l.deleteFile(o,e,function(){i.result({pass:!n.Error,passive:r,errors:{friendly:s}},"executeFileTest")})})})};var i=s(33),n=r(i),o=s(20),a=r(o)},698:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t,s){if(void 0===n["default"].state.client)throw new Error("Not connected to Godex; can't run SCT");n["default"].state.client.execute(this.controller.currentWorkspace().slug,e,function(e,r){var i=t(r.Error,r.Content);s.result(i,"executeTest")})};var i=s(33),n=r(i),o=s(20);r(o)},699:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(3),n=r(i),o=s(129),a=r(o),l=s(20),c=r(l),u=s(16),h=r(u),d=s(33),f=r(d),p=s(126),m=r(p),g=function(e,t){if(!f["default"].state.ready)throw new Error("Not connected to Godex; can't run karma test");t.showPending();var s=(n["default"].get(this.controller,"state.currentExercise.workspace.slug"),(new Date).valueOf());h["default"].updateFiles([new a["default"]({path:"test/test.js",content:this.controller.state.currentExercise.tests.files[e]})]).then(function(){m["default"].execute("/usr/local/lib/node_modules/karma/bin/karma start .karma.conf.js").then(function(e){c["default"].timing("francine.godexer.testers","karmaTest",(new Date).valueOf()-s.valueOf());var r=e.Content.trim().split("\n"),i=void 0,n=void 0,o="",a="",l={};try{if(i=JSON.parse(r[r.length-1]),i.summary.failed>0)for(var u=i.result[Object.keys(i.result)[0]],h=0;h<u.length;h++)if(!u[h].success){var d=u[h].description;o+=d+"\n"}0===i.summary.failed&&i.summary.success>0?n=!0:0===i.summary.failed&&0===i.summary.success?(n=!1,a=r.slice(4,r.length-1).join()):i.summary.failed>0&&(n=!1),o?l.friendly=o:a&&(l.tool=a),t.result({pass:n,errors:Object.assign({},l)},"karmaTest")}catch(f){var p=e.Content.split("\n")[0];t.result({pass:!1,errors:{tool:p}},"karmaTest")}},function(e){t.result({pass:!1,errors:{tool:"Failed to test your code"}}),c["default"].increment("francine.godexer.testers.karmaTest","executeErr")})},function(){})};t["default"]=g},700:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t){if(void 0===n["default"].state.client)throw new Error("Not connected to Godex; can't run rspec test");t.showPending();var s=(new Date).valueOf();n["default"].state.client.updateFiles(this.controller.state.currentExercise.workspace.slug,[{Filename:"spec/spec.rb",Content:this.controller.state.currentExercise.tests.files[e]}],function(e,r){n["default"].state.client.execute(this.controller.state.currentExercise.workspace.slug,"bundle exec rspec --format j spec/spec.rb",function(e,r){a["default"].timing("francine.godexer.testers","rspecTest",(new Date).valueOf()-s.valueOf());var i,n=r.Content.split("\n");try{i=JSON.parse(n[n.length-1]);var o="";if(i.summary.failure_count>0)for(var l=0;l<i.examples.length;l++)if("failed"===i.examples[l].status){var c=i.examples[l].exception.message;o+=c+"\n"}o=o.split("Diff:")[0];var u=0===i.summary.failure_count;t.result({pass:u,errors:{friendly:o}},"rspecTest")}catch(h){var d=r.Content.split("\n");d=d.filter(function(e){return!/warning/gi.test(e)});var f=new RegExp("/.*"+this.controller.currentWorkspace().slug+"/","g");d[0]=d[0].replace(f,""),t.result({pass:!1,errors:{tool:d[0]}},"rspecTest")}}.bind(this))}.bind(this))};var i=s(33),n=r(i),o=s(20),a=r(o)},701:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t){if(void 0===n["default"].state.client)throw new Error("Not connected to Godex; can't run SCT");var s=(new Date).valueOf();this._runTesterWithSetup("rubySCT",function(e){var t=this._components.PersistentCodeEditor.props.presenter.files;n["default"].state.client.run(a["default"].state.workspaceSlug,t[0].filename,function(t,s){e.call(this)})},function(){n["default"].state.client.updateFiles(a["default"].state.workspaceSlug,[{Filename:e,Content:this.controller.state.currentExercise.tests.files[e]}],function(){n["default"].state.client.sct(this.controller.state.currentExercise.workspace.slug,e,function(e,r){c["default"].timing("francine.godexer.testers","rubySCT",(new Date).valueOf()-s.valueOf()),t.result({pass:r.Pass,errors:{friendly:r.Hint}},"rubySCT")})}.bind(this))})};var i=s(33),n=r(i),o=s(17),a=r(o),l=s(20),c=r(l)},702:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t){var s=this.controller.state.currentExercise.tests.files[e],r=!1,i=this._components.WebBrowser.refs.browser;switch(t.showPending(),c["default"].state.workspaceBackend){case"godex":if(h["default"].state.history.length>0&&void 0!==i){var n=i.getIframe(),o=function l(e){var s=e.data;"webSCT:response"===s.event&&(e.target.removeEventListener(e.type,l),t.result({pass:void 0===s.error,errors:{friendly:s.error}},"webSCT"),r=!0)};window.addEventListener("message",o),n.contentWindow.postMessage({event:"webSCT:request",code:s},"*"),setTimeout(function(){r||(a["default"].increment("francine.tester.webSCT","timeout"),t.result({pass:!1,errors:{friendly:"No response received from web browser"}},"webSCT"))},2e3)}else t.result({pass:!1,errors:{friendly:"Please reload your project in the web browser."}},"webSCT");break;case"library":i.runLegacySCT(s,function(e,s){e?t.result({pass:!0,errors:{}},"webSCT"):t.result({pass:!1,errors:{friendly:s}},"webSCT")});break;default:throw new Error("Can't handle workspaceBackend \""+c["default"].state.workspaceBackend+'"')}};var i=s(1),n=(r(i),s(14)),o=(r(n),s(20)),a=r(o),l=s(17),c=r(l),u=s(104),h=r(u)},703:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){var t={fileContains:function(e,t,s){n["default"].state.client.getFile(a["default"].state.workspaceSlug,e,"text",function(e,r){if(e)s(!1);else{var i=new RegExp(t).test(r.Content);s(i)}})},fileExists:function(e,t){n["default"].state.client.getFile(a["default"].state.workspaceSlug,e,"text",function(e,s){t(!e)})}};e(t)};var i=s(33),n=r(i),o=s(17),a=r(o)},704:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(270),n=r(i),o={PersistentCodeEditor:"CodeEditor",NonPersistentCodeEditor:"CodeEditor",FullWebPreview:"Preview",TemplatedWebPreview:"Preview",PresetTemplatedWebPreview:"Preview",WebBrowser:"Preview",Terminal:"Terminal",OutputTerminal:"Terminal",Brief:"Narrative",SQLPreview:"SQLPreview"};t["default"]=n["default"].extend({initialize:function(){this.arrangements={},this.registerLayouts([{Narrative:"03"},{Narrative:"03",CodeEditor:"1245"},{Narrative:"03",Preview:"1245"},{Narrative:"03",Terminal:"1245"},{Narrative:"03",Image:"1245"},{Narrative:"03",SQLPreview:"1245"},{Narrative:"03",CodeEditor:"14",Preview:"25"},{Narrative:"03",CodeEditor:"14",Image:"25"},{Narrative:"03",CodeEditor:"14",Terminal:"25"},{Narrative:"03",CodeEditor:"14",SQLPreview:"25"},{Narrative:"03",CodeEditor:"1",Preview:"25",Terminal:"4"},{Narrative:"03",CodeEditor:"1",Image:"25",Terminal:"4"},{Narrative:"03",Preview:"14",Image:"25"},{Narrative:"03",Preview:"25",Terminal:"14"},{Narrative:"03",Terminal:"45",Image:"12"}])},registerLayouts:function(e){e.forEach(function(e){this.registerLayout(e)}.bind(this))},registerLayout:function(e){var t=Object.keys(e).sort().join("_"),s={};for(var r in e)s[r]={slots:""+e[r],cols:this._determineColForSlots(e[r])};this.arrangements[t]=s},_determineColForSlots:function(e){e+="";var t="";return/[03]/.test(e)&&(t+="1"),/[14]/.test(e)&&(t+="2"),/[25]/.test(e)&&(t+="3"),t},getArrangement:function(e){return this.arrangements[this.buildComponentName(e)]},arrangementAmong:function(e,t){var s=this.getArrangement(t);if(void 0===s)throw new Error("Couldn't find layout for "+this.buildComponentName(t));return s[o[e._schema]]||s[e._schema]},buildComponentName:function(e){return Object.keys(e).map(function(e){return o[e]||e}).sort(function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}).join("_")}})},705:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){var s={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(s[r]=e[r]);return s}Object.defineProperty(t,"__esModule",{value:!0});var n=s(1),o=r(n),a=s(658),l=r(a),c=s(662),u=r(c),h=s(193),d=r(h),f=o["default"].createClass({displayName:"Platform",propTypes:{type:o["default"].PropTypes.oneOf(["lessons","projects"])},componentWillMount:function(){d["default"].setData(this.props.proData)},render:function(){var e=this.props,t=e.type,s=i(e,["type"]);return"lessons"===t?o["default"].createElement(l["default"],s):"projects"===t?o["default"].createElement(u["default"],s):null}});t["default"]=f},706:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t){window.__debug__[e]=t},window.__debug__={}},707:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,s,r){return s&&e(t.prototype,s),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.Experiment=void 0;var o=s(1088),a=r(o);t.Experiment=function(){function e(t,s,r){i(this,e),this.slug=t+"",this.buckets=s,this.bucket=this._getBucket(this.slug,s,r)}return n(e,[{key:"_getBucket",value:function(e,t,s){for(var r=(0,a["default"])(s+e),i=parseInt(r.substring(0,10),16)%100,n=0,o=0;o<t.length;o++){if(i>=n&&i<n+t[o])return o;n+=t[o]}return t.length-1}}]),e}()},708:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={disableScrolling:function(){document.addEventListener("touchmove",function(e){e.preventDefault()})},fixHeight:function(){if(navigator.userAgent.match(/iPad;.*CPU.*OS 7_\d/i)&&window.innerHeight!=document.documentElement.clientHeight){var e=function(){document.documentElement.style.height=window.innerHeight+"px",0!==document.body.scrollTop&&window.scrollTo(0,0)};window.addEventListener("scroll",e,!1),window.addEventListener("orientationchange",e,!1),e(),document.body.style.webkitTransform="translate3d(0,0,0)"}}}},709:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,s,r){return s&&e(t.prototype,s),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=s(27),a=r(o),l=s(3),c=r(l),u=["navigationStart","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","requestStart","responseStart","responseEnd","domLoading","domInteractive","domContentLoadedEventEnd","domComplete","loadEventEnd"],h=["firstPaintTime","firstPaintAfterLoadTime"],d=["getGodexInstanceStart","godexConnectStart","godexConnectEnd","godexReady"],f=u.concat(h).concat(d),p=u.concat(d),m=function(){function e(t){i(this,e),this.measurements=[],this.measurementsIndex={},this._measurementsRegistered={},this.zero=window.performance.timing[u[0]],this.facets=t}return n(e,[{key:"sort",value:function(){this.measurements.sort(function(e,t){return e.value-t.value})}},{key:"fetchStandardEvents",value:function(){if(!window.performance||!window.performance.timing)return null;var e=window.performance.timing,t=!0,s=!1,r=void 0;try{for(var i,n=u[Symbol.iterator]();!(t=(i=n.next()).done);t=!0){var o=i.value,a=e[o];if(0!==a){var l=a-this.zero;this.registerEvent(o,l)}}}catch(c){s=!0,r=c}finally{try{!t&&n["return"]&&n["return"]()}finally{if(s)throw r}}if(window.chrome&&window.chrome.loadTimes){var d=window.chrome.loadTimes(),f=!0,p=!1,m=void 0;try{for(var g,v=h[Symbol.iterator]();!(f=(g=v.next()).done);f=!0){var o=g.value,a=1e3*d[o];if(0!==a){var l=Math.round(a-this.zero);this.registerEvent(o,l)}}}catch(c){p=!0,m=c}finally{try{!f&&v["return"]&&v["return"]()}finally{if(p)throw m}}}}},{key:"registerEvent",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?(new Date).valueOf()-this.zero:arguments[1];if(-1===f.indexOf(e))throw new Error("Unexpected custom event '"+e+"'");return void 0!==this.measurementsIndex[e]?void console.warn("Attempt to register event '"+e+"' more than once"):(this.measurementsIndex[e]=t,this.measurements.push({event:e,value:t}),void this._uploadIfComplete())}},{key:"get",value:function(){return this.sort(),this.measurements}},{key:"_uploadIfComplete",value:function(){var e=this;if(!this._uploaded){var t=!0,s=!1,r=void 0;try{for(var i,n=p[Symbol.iterator]();!(t=(i=n.next()).done);t=!0){var o=i.value;if(void 0===this.measurementsIndex[o])return}}catch(a){s=!0,r=a}finally{try{!t&&n["return"]&&n["return"]()}finally{if(s)throw r}}setTimeout(function(){e._upload()},5e3),this._uploaded=!0}}},{key:"_upload",value:function(){var e={metric:"TTG"},t=!0,s=!1,r=void 0;try{for(var i,n=f[Symbol.iterator]();!(t=(i=n.next()).done);t=!0){var o=i.value,l=this.measurementsIndex[o];void 0===l&&(l=""),e[o]=l}}catch(u){s=!0,r=u}finally{try{!t&&n["return"]&&n["return"]()}finally{if(s)throw r}}e=c["default"].extend(e,this.facets);var h=f.concat(Object.keys(this.facets).sort());a["default"].info(e,"learning_environment_performance",h)}}],[{key:"supported",value:function(){return window.performance&&window.performance.timing}}]),e}();t["default"]=m},710:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=null,r=null;t["default"]={save:function(){if(s=document.activeElement,s&&window.getSelection){var e=window.getSelection();r="Range"===e.type?e.getRangeAt(0):null}},restore:function(){if(s&&(s.focus(),r&&window.getSelection)){var e=window.getSelection();e.rangeCount>0&&e.removeAllRanges(),e.addRange(r)}}}},711:function(e,t){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e){var t=!0,s=!1,r=void 0;try{for(var i,n=o[Symbol.iterator]();!(t=(i=n.next()).done);t=!0){var a=i.value;if(a.test(e))return a}}catch(e){s=!0,r=e}finally{try{!t&&n["return"]&&n["return"]()}finally{if(s)throw r}}return null}var i=function(){function e(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,s,r){return s&&e(t.prototype,s),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.recognize=r;var n=t.causes={USER_ERROR:"USER_ERROR",BAD_TERMINAL_INSTANCE:"BAD_TERMINAL_INSTANCE",NETWORK_ISSUES:"NETWORK_ISSUES",UNKNOWN_CAUSE:"UNKNOWN_CAUSE"},o=[],a=function(){function e(t,r,i){s(this,e),this.id=t,this.matcher=r,this.probableCause=i}return i(e,[{key:"test",value:function(e){return this.matcher.test(e)}}]),e}();o.push(new a("PHANTOMJS_TIMEOUT",/Trying to start PhantomJS again/,n.BAD_TERMINAL_INSTANCE)),o.push(new a("UNKNOWN_ERROR",/.*/,n.UNKNOWN_CAUSE))},712:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,s,r){return s&&e(t.prototype,s),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=s(587),a=r(o),l=s(83),c=r(l),u=function d(e,t){i(this,d),this.status=e,this.body=t},h=function(){function e(t){i(this,e),this.workspace=t}return n(e,[{key:"GET",value:function(e){if(""===e)return"";var t=new c["default"](e).path();t=t.replace(/^\//,"").replace(/\/$/,"");var s=this.resolve(t);return s=s.replace(/^\//,"").replace(/\/$/,""),this.workspace.exists(s)?new u(200,(0,a["default"])(this.workspace,s,{})):new u(404,"Page Not Found")}},{key:"resolve",value:function(e){switch(e){case"":case"/":return"/index.html";default:return e}}}]),e}();t["default"]=h},713:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(1),n=r(i),o=s(615),a=r(o);t["default"]={anonymousUserWallIfNeeded:function(){return this.props.isRegisteredUser?null:n["default"].createElement(a["default"],{signUpForm:this.props.modals.signUp,signInForm:this.props.modals.signIn})}}},714:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={componentShouldBeDisabled:function(e){switch(e){case"Terminal":case"OutputTerminal":case"WebBrowser":case"PersistentCodeEditor":if(!this.state.workspaceReady)return!0;default:if(this.isExerciseLocked&&this.isExerciseLocked()||this.state.isAnon)return!0}return!1}}},715:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(1),n=r(i);t["default"]={getInitialState:function(){},debugWireframe:function(){var e=["red","green","blue","orange","purple","pink"];return this.state.grid.slotsList.map(function(t,s){return n["default"].createElement("div",{key:"slotWireframe"+s,style:{border:"1px solid "+e[s],color:e[s],position:"absolute",pointerEvents:"none",top:100*t.top()+"%",left:100*t.left()+"%",bottom:100-100*t.bottom()+"%",right:100-100*t.right()+"%",padding:10}},n["default"].createElement("div",{style:{position:"absolute",top:"50%",left:"50%",marginTop:-10,marginLeft:-10}},t.id))})},renderDebugLayer:function(){return this.state.showDebugWireframe?this.debugWireframe():null}}},716:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(83),n=r(i),o=s(104),a=r(o);t["default"]={loadedURL:function(e,t){void 0===t&&(t=1);var s=new n["default"](e),r=a["default"].state.history.filter(function(e){return e.displayUrl.path()===s.path()});return r.length>=t},loadedOneOf:function(e,t){for(var s=0;s<e.length;s++)if(this.loadedURL(e[s],t))return!0}}},717:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(188),n=r(i),o=s(733),a=r(o);t["default"]={codeContains:function(e,t){var s=n["default"].files.filter(function(t){return t.path==e||new RegExp(e).test(t.path)});if(1!==s.length||void 0===s||void 0===s[0].content)return!1;s=s[0];var r=new RegExp(t);return r.test(s.content)},hasOpened:function(e){return a["default"].hasOpened(e)}}},718:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={didRunOneOf:function(e){var t=!0,s=!1,r=void 0;try{for(var i,n=e[Symbol.iterator]();!(t=(i=n.next()).done);t=!0){var o=i.value;if(this.didRunCommand(o))return!0}}catch(a){s=!0,r=a}finally{try{!t&&n["return"]&&n["return"]()}finally{if(s)throw r}}},didRunCommand:function(e){return this.state.fake?this.state.history.some(function(t){return e instanceof RegExp?e.test(t.input):t.input==e},this):this.realTerminalText().search(e)>=0},ranOneOfWithExitCode:function(e,t){return this.didRunOneOf(e)}}},719:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(618),n=r(i),o=s(1),a=r(o),l=s(5),c=r(l),u=s(732),h=r(u);t["default"]={mixins:[c["default"].connect(h["default"],"activeDiscoveryCues")],getInitialState:function(){return{activeDiscoveryCues:h["default"].getActiveCues()}},componentDidMount:function(){this.unsubscribe=h["default"].listen(this.onCueChange)},componentWillUnmount:function(){this.unsubscribe()},onCueChange:function(e){this.setState({activeDiscoveryCues:e})},discoveryCues:function(){for(var e=[],t=this.state.activeDiscoveryCues,s=0;s<t.length;s++)e.push(a["default"].createElement(n["default"],{key:"cue-"+t[s].target,cue:t[s]}));return e}}},720:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={showErrors:function(e){e&&(e.visible=!0,e.timestamp=(new Date).valueOf(),this.setState({errors:e}))},hideErrors:function(){this.state.errors.visible=!1,this.state.errors.timestamp=(new Date).valueOf(),this.setState({errors:this.state.errors})}}},721:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(708),n=r(i),o=s(39);r(o);t["default"]={componentWillMount:function(){var e=this;n["default"].disableScrolling(),n["default"].fixHeight(),window.addEventListener("resize",function(){void 0!==e.state.adapter&&e.state.adapter.trigger("interface:resized")})}}},722:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={resetFilesContent:function(e,t){return{title:"Whoa there!",message:t+" has been moved. This will cause problems with this exercise. Please move "+t+" back to "+e+", or reset your files.",buttons:[{title:"Reset Files",action:function(){var e=this.resetFilesConfirmationContent();this.openSecondaryModal(e)}.bind(this)},{title:"ok",action:this.cancelAndCloseSecondaryModal}]}},resetFilesConfirmationContent:function(){return{title:"Reset Your Files?",message:"This will overwrite your existing files, and reset your progress to the beginning of this exercise",buttons:[{title:"Confirm",action:function(){this.toggleModal("FileTool"),this.props.broadcast("fixFiles")}.bind(this)},{title:"Cancel",action:this.cancelAndCloseSecondaryModal}]}}}},723:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(1),n=(r(i),s(14)),o=r(n),a=s(298);t["default"]={componentDidMount:function(){document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp)},componentWillUnmount:function(){document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp)},onMouseDown:function(e){0===e.button&&this.handleMouseDown&&(this._buildPosns(e),this.handleMouseDown(e))},onMouseUp:function(e){if(this.handleMouseUp){if(void 0!==e._dispatchIDs)return;this._buildPosns(e),this.handleMouseUp(e)}},onMouseMove:function(e){if(this.handleMouseMove){if(void 0!==e._dispatchIDs)return;this._buildPosns(e),this.handleMouseMove(e,this.state.lastMouseMoveEvent),this.state.lastMouseMoveEvent=e}},_buildPosns:function(e){var t=o["default"].findDOMNode(this).getBoundingClientRect();e.offsetPosn=new a.Posn(e.pageX-t.left,e.offsetY-t.top),
e.pagePosn=new a.Posn(e.pageX,e.pageY)}}},724:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(3),n=r(i),o=s(18),a=r(o),l=s(38),c=r(l);t["default"]={refreshNav:function(){this.setState({mayProceed:this.canAccessNextExercise()})},navigate:function(e,t,s){this.state.adapter.abortCheckpoints(),0>t&&(e--,t=this.props.course.lessons[this.props.course.lessons_order[e]].exercises_order.length-1);var r=this.props.course.lessons[this.props.course.lessons_order[e]],i=r.exercises[r.exercises_order[t]],o=this.isAccessible(e,t,0);if(o||t===this.state.currentExerciseIndex+1&&this.canAccessNextExercise()){if(t>=this.state.currentLesson.exercises_order.length&&e>=this.state.currentLessonIndex){if(this.props.segment)return this.setState({shouldShowCompletionModal:!0});e++,r=this.props.course.lessons[this.props.course.lessons_order[e]],t=0,i=r.exercises[r.exercises_order[t]],(0,c["default"])("info","No path segment found for '"+this.props.course.slug+"'")}var l=!this.isOnFarthestUnlockedExercise(this.state.progress,e,t);if(l&&o&&this.state.uploadSavepoints)return this.closeDrawer(),void alert("Going backwards with the Upload Savepoints box checked is BAD. Don't do that. :(");var u=this.getAdapter(i);s=n["default"].extend({push:!0},s),s.push&&window.history.pushState({exerciseIndex:t,lessonIndex:e},i.title,i.path+location.search),this.setState({currentExerciseIndex:t,currentExercise:i,currentLessonIndex:e,currentLesson:r,adapter:u,disabled:!1,wall:void 0}),a["default"].track("visit","exercise",{skill:this.props.course.slug,lesson:r.slug,exercise:i.slug}),(0,c["default"])("info","Navigated to exercise '"+i.slug+"'")}else console.warn("Advancement blocked due to insufficient progress")}}},725:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(1),n=r(i),o=s(661),a=r(o),l=s(736),c=r(l),u=s(18),h=r(u);t["default"]={componentDidMount:function(){c["default"].listen(this.apologizeForOutage)},apologizeForOutage:function(){h["default"].track("visit","outage_apology",{course:this.props.course.slug}),this.setState({wall:n["default"].createElement(a["default"],{courseSlug:this.props.course.slug})})}}},726:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(709),n=r(i);t["default"]={getInitialState:function(){var e=this;if(!n["default"].supported())return{};var t=new n["default"]({workspace:this.currentWorkspace().slug});return window.onload=function(){setTimeout(function(){e.state.performanceMeasurements.fetchStandardEvents()},5e3)},{performanceMeasurements:t}},registerPerformanceMeasurement:function(e,t){this.state.performanceMeasurements&&this.state.performanceMeasurements.registerEvent(e,t)},getPerformanceMeasurements:function(){return this.state.performanceMeasurements?this.state.performanceMeasurements.get():null}}},727:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){return{init:function(){this.getDefaultState?e||n["default"].error({message:"PersistLocal mixin requires a string key to be passed in."},"javascript_errors"):n["default"].error({message:"PersistLocal mixin requires method: getDefaultState"},"javascript_errors")},getInitialState:function(){var e=this.getPersistedState();return e?e:this.getDefaultState()},getPersistedState:function(){try{var t=localStorage.getItem("PersistLocalStore-"+e);if(t)return JSON.parse(t)}catch(s){n["default"].error({message:"Cannot get persisted state for "+e},"javascript_errors")}return null},preEmit:function(t){try{localStorage.setItem("PersistLocalStore-"+e,JSON.stringify(t))}catch(s){n["default"].error({message:"Cannot set persisted state for "+e},"javascript_errors")}}}};var i=s(27),n=r(i)},728:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(7),n=r(i);s(22),t["default"]={updateProgress:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];n["default"].extend({success:function(){},error:function(){}},t),n["default"].ajax({type:"POST",url:"/courses/"+this.props.course.slug+"/projects/"+this.props.project.slug+"/progress",data:{status:e,r:this.props.course.revision},success:t.success,error:t.error})}}},729:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(7),n=r(i);s(22);var o=s(18),a=(r(o),s(9)),l=(r(a),s(1)),c=r(l),u=s(672),h=r(u);t["default"]={getInitialProgress:function(e){return(void 0===e||void 0===e.current_state||void 0===e.current_state.lesson)&&(e={current_state:{lesson:0,exercise:0,checkpoint:0}}),e},_isStateInOrder:function(e,t){return e.lesson!=t.lesson?e.lesson<t.lesson:e.exercise!=t.exercise?e.exercise<t.exercise:e.checkpoint<t.checkpoint},_isStateEqual:function(e,t){return e.lesson==t.lesson&&e.exercise==t.exercise&&e.checkpoint==t.checkpoint},_compareState:function(e,t){return this._isStateEqual(e,t)?0:this._isStateInOrder(e,t)?-1:1},_compareWithCurrentProgress:function(e,t,s){var r={lesson:e,exercise:t,checkpoint:s};return this._compareState(r,this.state.progress.current_state)},_uploadProgress:function(e,t,s,r,i){var o="/learn/update_progress";n["default"].ajax({type:"POST",url:o,data:{course_id:e.slug,r:e.revision,new_progress:s,old_progress:t},success:function(e){e&&e.achievements&&e.achievements.length>0?(this.setState({achievements:e.achievements}),e.achievements.filter(function(e){return/Course Completed/.test(e.name)}).length>0&&this.setState({wall:c["default"].createElement(h["default"],{courseSlug:this.props.course.slug,courseName:this.props.course.title,achievements:e.achievements,dismiss:this._clearWall})})):this.setState({acheivements:{}})}.bind(this),error:i})},getAchievements:function(){return this.state.achievements},farthestCompleteExerciseIndex:function(){return this.props.progress.current_state.exercise},farthestCompleteLessonIndex:function(){return this.props.progress.current_state.lesson},isActiveCheckpoint:function(e,t,s){var r=this.state.progress.current_state;return e===r.lesson&&t===r.exercise&&s===r.checkpoint},isAccessible:function(e,t,s){return this.state.nolock?!0:this._compareWithCurrentProgress(e,t,s)<=0},isCourseStarted:function(){if(void 0===this.state.progress)return!1;var e=this.state.progress.current_state;return!(0===e.lesson&&0===e.exercise&&0===e.checkpoint)},isExerciseComplete:function(e,t){return this.isAccessible(e,t+1,0)},isCheckpointComplete:function(e,t,s){return this._compareWithCurrentProgress(e,t,s)<0},canAccessNextExercise:function(){return this.isAccessible(this.state.currentLessonIndex,this.state.currentExerciseIndex+1,0)},isOnFarthestUnlockedExercise:function(){var e=arguments.length<=0||void 0===arguments[0]?this.state.progress:arguments[0],t=arguments.length<=1||void 0===arguments[1]?this.state.currentLessonIndex:arguments[1],s=arguments.length<=2||void 0===arguments[2]?this.state.currentExerciseIndex:arguments[2];return e.current_state.exercise===s&&e.current_state.lesson===t},numCompletedExercisesForLesson:function(e){var t=this.props.course.lessons_order[e],t=this.props.course.lessons[t];return e<this.state.progress.current_state.lesson?t.exercises_order.length:e===this.state.progress.current_state.lesson?this.state.progress.current_state.exercise:0},handleCheckpointUpdate:function(e){if(this.isOnFarthestUnlockedExercise()){e.state=this.state,e.skill=this.props.course;var t=e.state.currentLessonIndex,s=e.state.adapter.checkpoints||[],r=e.state.currentExerciseIndex,t=e.state.currentLessonIndex,i=0;e.checkpointIndex+1==s.length?e.state.currentExerciseIndex+1>e.state.currentLesson.exercises_order.length-1?(t++,r=0):r=e.state.currentExerciseIndex+1:i=e.checkpointIndex+1,this.setAndUpdateProgressState({lessonIndex:t,exerciseIndex:r,checkpointIndex:i,course:e.course,oldProgress:e.state.progress,success:e.success,error:e.error})}},setAndUpdateProgressState:function(e){e.course=this.props.course,e.oldProgress=this.state.progress;var t={lesson:e.lessonIndex,exercise:e.exerciseIndex,checkpoint:e.checkpointIndex},s=(e.oldProgress.current_state.lesson===t.lesson,e.oldProgress.current_state.lesson+1===t.lesson,{current_state:t});return this._uploadProgress(e.course,this.state.progress,s,e.success,e.error),this.state.progress=s,this.setState({progress:s}),s}}},730:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(125),n=r(i),o=s(16),a=r(o),l=s(9),c=r(l);t["default"]={_setWorkspace:function(e){var t=this,s=e.workspace;s.user_id=this.props.collaborationSession.userId||window.CCDATA.current_user._id,e?e.components.PersistentCodeEditor&&n["default"].publishFilenames(e.components.PersistentCodeEditor.files):this.props.project&&this.props.project.components.PersistentCodeEditor&&n["default"].publishFilenames(this.props.project.components.PersistentCodeEditor.files),c["default"].isAnon()||a["default"].setWorkspace(s).then(function(){t.state.adapter.trigger("godex:ready"),t.setUpWorkspace()},function(){})}}},731:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(5),n=r(i),o=s(15),a=r(o),l=s(175),c=r(l),u=s(727),h=r(u);t["default"]=n["default"].createStore({mixins:[a["default"].store,(0,h["default"])("adminStore")],getDefaultState:function(){return{uploadSavepoints:!1,nolock:!1}},init:function(){this.listenTo(c["default"].adminChange,this.onAdminChange)},onAdminChange:function(e,t){var s=JSON.parse(JSON.stringify(this.state));s[e]=t,this.setState(s)}})},732:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(5),n=r(i),o=s(127),a=r(o),l=s(7),c=r(l);s(22);var u=[{target:"course-navigator",orientation:"right-above",content:"Click here to navigate the course."},{target:"discovery-resize-14",orientation_special:"middle-edge",content:"Drag the edges to resize the window."},{target:"discovery-fullscreen",content:"Click here to make this window fullscreen."},{target:"discovery-checklist",content:"In Projects, you can keep track of your progress as you go throught the tasks. Check each item as you complete it!"}];t["default"]=n["default"].createStore({init:function(){this.listenToMany({onCueSeen:a["default"].cueSeen}),this._activeCues=[],this._calculateActives()},onCueSeen:function(e){CCDATA&&CCDATA.current_user&&(CCDATA.current_user.ui_tour_elements[e]=!0,c["default"].post("/users/ui_tour_elements",{ui_tour_item:e},"json")),this._calculateActives(),this.trigger(this._activeCues)},_calculateActives:function(){var e=u;if(CCDATA&&CCDATA.current_user){for(var t in CCDATA.current_user.ui_tour_elements){var s=e.map(function(e){return e.target}).indexOf(t);e.splice(s,1)}this._activeCues=e}},getActiveCues:function(){return this._activeCues}})},733:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(5),n=r(i),o=s(62),a=r(o),l=s(130),c=(r(l),s(3));r(c);t["default"]=n["default"].createStore({init:function(){this.history=[],this.listenTo(a["default"].openFile,this.openFile)},openFile:function(e){this.history.push(e.name)},hasOpened:function(e){return this.history.some(function(t){return t==e})}})},734:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(5),n=r(i),o=s(127),a=r(o);t["default"]=n["default"].createStore({init:function(){this.listenToMany({onResized:a["default"].resized,onResizing:a["default"].resizing})},onResized:function(){this.trigger()},onResizing:function(){this.trigger()}})},735:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(3),n=(r(i),s(5)),o=r(n),a=s(17),l=r(a),c=s(125),u=r(c);t["default"]=o["default"].createStore({init:function(){this.watching=[],this.workspaceSlug=null,l["default"].listen(this.checkWatchedFiles),this.listenTo(u["default"].publishFilenames,this.setDefaultFiles),this.listenTo(u["default"].loadFiles,this.resetOrphanedFiles)},setDefaultFiles:function(e){this.watching=e.map(function(e){return e.filename})},resetOrphanedFiles:function(){this.watching=[],this.trigger([])},checkWatchedFiles:function(e){if(e.workspaceObject&&e.workspaceReady){var t=[],s=!0,r=!1,i=void 0;try{for(var n,o=this.watching[Symbol.iterator]();!(s=(n=o.next()).done);s=!0){var a=n.value;void 0===e.workspaceObject.getFile(a)&&t.push(a)}}catch(l){r=!0,i=l}finally{try{!s&&o["return"]&&o["return"]()}finally{if(r)throw i}}this.trigger(t)}}})},736:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(5),n=r(i),o=s(273),a=r(o);t["default"]=n["default"].createStore({init:function(){this.listenToMany(a["default"])},onApologize:function(){this.trigger(!0)}})},737:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(274),n=r(i),o=s(62),a=r(o),l=s(5),c=r(l);t["default"]=c["default"].createStore({init:function(){this.output=[],this.listenToMany({onClear:a["default"].saveFiles,onStdout:n["default"].stdout,onStderr:n["default"].stderr})},onClear:function(){this.output=[],this.trigger(this.output)},onStdout:function(e){this.output.push({type:"stdout",text:e}),this.trigger(this.output)},onStderr:function(e){this.output.push({type:"stderr",text:e}),this.trigger(this.output)}})},738:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(5),n=r(i),o=s(275),a=r(o),l=s(15),c=r(l);t["default"]=n["default"].createStore({mixins:[c["default"].store],init:function(){this.listenToMany({onUpdate:a["default"].update})},onUpdate:function(e,t){this.setState({status:e,userName:t})},getInitialState:function(){return{status:"",userName:""}}})},739:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(5),n=r(i),o=s(178),a=r(o),l=s(7),c=r(l),u=s(18),h=r(u),d="/practice/self_assessment_checklist";t["default"]=n["default"].createStore({init:function(){this.listenToMany({onCheckAssessment:a["default"].checkAssessment,onResetProject:a["default"].resetProject})},getInitialState:function(e){this.allDone=!0,this.assessments=e.projectAssessments,this.projectSlug=e.projectSlug,this.skillSlug=e.skillSlug,this.revision=e.revision,this.userProgress=e.userProgress;var t=!0,s=!1,r=void 0;try{for(var i,n=this.assessments[Symbol.iterator]();!(t=(i=n.next()).done);t=!0){var o=i.value,a=!0,l=!1,c=void 0;try{for(var u,h=o.tasks[Symbol.iterator]();!(a=(u=h.next()).done);a=!0){var d=u.value;d.done=void 0!==e.userProgress[d.key]&&"true"===e.userProgress[d.key],d.done||(this.allDone=!1)}}catch(f){l=!0,c=f}finally{try{!a&&h["return"]&&h["return"]()}finally{if(l)throw c}}}}catch(f){s=!0,r=f}finally{try{!t&&n["return"]&&n["return"]()}finally{if(s)throw r}}return{assessments:this.assessments,allDone:this.allDone}},onCheckAssessment:function(e,t){var s=!1;void 0===this.userProgress[e]&&(s=!0,h["default"].track("project","checklist_click",{project:this.projectSlug,skill:this.skillSlug,self_assessment:e}),h["default"].track("action","submit",{project:this.projectSlug,skill:this.skillSlug,curriculum:this.skillSlug,self_assessment:e,submit_type:"project_checklist_submit"})),this.userProgress[e]=t;var r=!0,i=!0,n=!1,o=void 0;try{for(var a,l=this.assessments[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var c=a.value,u=!0,d=!1,f=void 0;try{for(var p,m=c.tasks[Symbol.iterator]();!(u=(p=m.next()).done);u=!0){var g=p.value;g.key===e&&(g.done=t),g.done||(r=!1)}}catch(v){d=!0,f=v}finally{try{!u&&m["return"]&&m["return"]()}finally{if(d)throw f}}}}catch(v){n=!0,o=v}finally{try{!i&&l["return"]&&l["return"]()}finally{if(n)throw o}}r&&!this.allDone&&s&&h["default"].track("project","checklist_complete",{project:this.projectSlug,skill:this.skillSlug}),this.allDone=r,this._updateStore()},onResetProject:function(){var e=!0,t=!1,s=void 0;try{for(var r,i=this.assessments[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var n=r.value,o=!0,a=!1,l=void 0;try{for(var c,u=n.tasks[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var h=c.value;h.done=!1}}catch(d){a=!0,l=d}finally{try{!o&&u["return"]&&u["return"]()}finally{if(a)throw l}}}}catch(d){t=!0,s=d}finally{try{!e&&i["return"]&&i["return"]()}finally{if(t)throw s}}this.allDone=!1,this._updateStore()},_updateStore:function(){var e={},t=!0,s=!1,r=void 0;try{for(var i,n=this.assessments[Symbol.iterator]();!(t=(i=n.next()).done);t=!0){var o=i.value,a=!0,l=!1,u=void 0;try{for(var h,f=o.tasks[Symbol.iterator]();!(a=(h=f.next()).done);a=!0){var p=h.value;e[p.key]=p.done}}catch(m){l=!0,u=m}finally{try{!a&&f["return"]&&f["return"]()}finally{if(l)throw u}}}}catch(m){s=!0,r=m}finally{try{!t&&n["return"]&&n["return"]()}finally{if(s)throw r}}c["default"].ajax({type:"POST",url:d,data:{id:this.projectSlug,course_id:this.skillSlug,r:this.revision,tasks:e}}),this.trigger(this.assessments,this.allDone)}})},740:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,s,r){return s&&e(t.prototype,s),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=s(3),a=r(o),l=s(33),c=r(l),u=s(126),h=r(u),d=s(17),f=s(16),p=r(f),m=s(274),g=r(m),v=s(176),y=r(v),_=s(77),b=s(9),k=r(b),w=s(27),x=r(w),T=s(38),S=r(T),C=s(186),E=function(){function e(t){i(this,e),this.contentWorkspace=t,this.slug=t.slug,this.type=t.type,this.hasLostConnection=!1,c["default"].listen(this.onGodexClientChange)}return n(e,[{key:"persist",value:function(){return h["default"].persist().then(function(){p["default"].persist.completed()},function(e){p["default"].persist.failed(e)})}},{key:"initialize",value:function(){var e=this;return new Promise(function(t,s){void 0===window.WebSocket&&s("Browser unsupported"),h["default"].getClient.completed.listen(function(t){e.setUpFileSystemEventCallback(t),t.removeAllListeners("output"),t.removeAllListeners("error"),t.on("output",function(e){g["default"].stdout(e.Output)}),t.on("error",function(e){g["default"].stderr(e.Error)}),t.removeAllListeners("stdout"),t.removeAllListeners("stderr"),t.on("stdout",function(e){g["default"].stdout(e.Output)}),t.on("stderr",function(e){g["default"].stderr(e.Error)}),t.removeAllListeners("peer:join"),t.removeAllListeners("peer:leave"),t.on("peer:join",function(e){y["default"].update(e.Peers);var t=e.Peers.filter(function(e){return e.Username!==k["default"].get("username")}),s="";t.forEach(function(e){s+=e.Username+" "}),k["default"].isAdvisor()||(0,_.trackEvent)("advisor-joined-collaboration",{advisors:s})}),t.on("peer:leave",function(e){y["default"].update(e.Peers),k["default"].isAdvisor()?(0,_.trackEvent)("learner-left-collaboration"):(0,_.trackEvent)("advisor-left-collaboration")}),t.removeAllListeners("workspace:lock"),t.removeAllListeners("workspace:unlock"),t.on("workspace:lock",function(e){p["default"].peerLock(e.User)}),t.on("workspace:unlock",function(e){p["default"].peerUnlock(e.User)})}),h["default"].getClient(e.contentWorkspace).then(function(r){e.getFileTree().then(t,s)},function(e){s("Failed to get Godex client: "+e)})})}},{key:"onGodexClientChange",value:function(e){switch(e.status){case"connecting":p["default"].setStatus(d.STATUSES.CONNECTING);break;case"available":p["default"].setStatus(d.STATUSES.AVAILABLE);break;case"unavailable":p["default"].setStatus(d.STATUSES.UNAVAILABLE);break;case"disconnected":p["default"].setStatus(d.STATUSES.DISCONNECTED);break;case"idle":p["default"].setIdleState(!0);break;default:x["default"].error("Unhandled godexClientState.status: "+e.status)}"disconnected"===e.status?(this.hasLostConnection=!0,p["default"].setReadyState(!1)):"available"===e.status&&this.hasLostConnection&&p["default"].setReadyState(!0)}},{key:"setUpFileSystemEventCallback",value:function(e){var t={},s=a["default"].debounce(function(){p["default"].getFileTree()},500);e.removeAllListeners("fs"),e.on("fs",function(e){var r=e.path;void 0===t[r]&&(t[r]=a["default"].debounce(function(){p["default"].getFile(r)},500)),t[r](),s()})}},{key:"getFileTree",value:function(){var e=this;return h["default"].getFileTree().then(function(t){t.Files=[t.Files],e.workspace=(0,C.GodexFileTreeToWorkspace)(t),p["default"].getFileTree.completed(e.workspace)},function(e){p["default"].getFileTree.failed(e)})}},{key:"getFiles",value:function(e){var t=this;return e=e.filter(function(e){return t.workspace.exists(e)}),new Promise(function(s,r){c["default"].state.client.getFilesByNames(t.slug,e,function(e,t){e?r(e):s(t)})}).then(function(s){s.Files.forEach(function(e){t.workspace.updateFile((0,C.GodexFileToWorkspaceFile)(e))}),p["default"].getFiles.completed(t.workspace.getFiles(e))},function(e){p["default"].getFiles.failed(e)})}},{key:"getFile",value:function(e,t){var s=this;return new Promise(function(r,i){c["default"].state.client.getFile(s.slug,e,t,function(e,t){e?i(e):r(t)})}).then(function(t){var r=(0,C.GodexFileToWorkspaceFile)({fileName:e,content:t.Content});s.workspace.updateFile(r),p["default"].getFile.completed(r)},function(e){p["default"].getFile.failed(e)})}},{key:"deleteFile",value:function(e){var t=this;return new Promise(function(s,r){c["default"].state.client.deleteFile(t.slug,e,function(t){t?r(t):s(e)})}).then(function(e){t.workspace.deleteFile(e),p["default"].deleteFile.completed(e)},function(e){p["default"].deleteFile.failed(e)})}},{key:"updateFiles",value:function(e){var t=this,s=e.map(C.WorkspaceFileToGodexFile);return new Promise(function(r,i){c["default"].state.client.updateFiles(t.slug,s,function(t){t?i(t):r(e)})}).then(function(e){t.workspace.updateFiles(e),p["default"].updateFiles.completed(e)},function(e){(0,S["default"])("error","Failed to save files: "+e),p["default"].updateFiles.failed(e)})}},{key:"createDirectories",value:function(e){var t=this,s=e.map(C.WorkspaceDirectoryToGodexDirectory);return new Promise(function(r,i){c["default"].state.client.updateFiles(t.slug,s,function(t){t?i(t):r(e)})}).then(function(e){t.workspace.createDirectories(e.map(function(e){return e.path})),p["default"].createDirectories.completed(e)},function(e){(0,S["default"])("error","Failed to create directories: "+e),p["default"].createDirectories.failed(e)})}},{key:"rename",value:function(e,t){var s=this;return new Promise(function(r,i){c["default"].state.client.renameFile(s.slug,e,t,function(e,t){e?i(e):r(t)})}).then(function(r){s.workspace.rename(e,t),p["default"].rename.completed(e,t)},function(e){p["default"].rename.failed(e)})}}]),e}();t["default"]=E},741:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,s,r){return s&&e(t.prototype,s),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=s(38),a=r(o),l=s(9),c=r(l),u=s(296),h=r(u),d=s(16),f=r(d),p=s(17),m=s(186),g=(r(m),function(){function e(t){i(this,e),this.slug=t,this.client=new h["default"](c["default"].get("_id"),c["default"].get("authentication_token"))}return n(e,[{key:"persist",value:function(){return this.client.persist(this.workspace).then(function(){f["default"].persist.completed()},function(e){f["default"].persist.failed(e)})}},{key:"initialize",value:function(){var e=this;return this.client.fetch(this.slug).then(function(t){e.workspace=t,f["default"].setStatus(p.STATUSES.AVAILABLE),f["default"].setReadyState(!0)},function(e){f["default"].setStatus(p.STATUSES.UNAVAILABLE),f["default"].setReadyState(!1)})}},{key:"getFileTree",value:function(){return f["default"].getFileTree.completed(this.workspace.getFileTree())}},{key:"getFiles",value:function(e){return f["default"].getFiles.completed(this.workspace.getFiles(e))}},{key:"getFile",value:function(e,t){return f["default"].getFile.completed(this.workspace.getFile(e,t))}},{key:"deleteFile",value:function(e){return this.workspace.deleteFile(e),this.client.persist(this.workspace).then(function(){f["default"].deleteFile.completed(e)},function(e){f["default"].deleteFile.failed(e)})}},{key:"updateFiles",value:function(e){return this.workspace.updateFiles(e),f["default"].updateFiles.completed(e),Promise.resolve()}},{key:"createDirectories",value:function(e){return this.workspace.createDirectories(e),this.client.persist(this.workspace).then(function(){f["default"].createDirectories.completed(e)},function(t){f["default"].createDirectories.failed(e)})}},{key:"rename",value:function(e,t){var s=this;return this.workspace.rename(e,t),this.client.persist(this.workspace).then(function(){var r=s.workspace.getFile(t);f["default"].rename.completed(e,t,r)},function(e){f["default"].rename.failed(e),(0,a["default"])("error","Failed to rename file: "+e)})}}]),e}());t["default"]=g},787:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i=s(7),n=r(i);s(788),function(){var e,t,s,r,i,o,a,l,c,u,h,d,f,p,m,g,v,y,_,b,k,w,x,T,S,C,E,P,M,N,F,O,A,I,L,j,R=function(e,t){return function(){return e.apply(t,arguments)}},D=[].slice;A=0,I=1,L=2,T=13,N=9,k=46,b=8,C=37,M=39,F=38,w=40,S=36,x=35,P=33,E=34,l="jqconsole-",r=""+l+"cursor",i=""+l+"header",c=""+l+"prompt",a=""+l+"old-prompt",o=""+l+"input",s=""+l+"blurred",y="keypress",m="<span/>",f="<div/>",p=":empty",O="\n",d=">>> ",h="... ",u=2,t=""+l+"ansi-",g="",v=/\[(\d*)(?:;(\d*))*m/,e=function(){function e(){this.stylize=R(this.stylize,this),this._closeSpan=R(this._closeSpan,this),this._openSpan=R(this._openSpan,this),this.getClasses=R(this.getClasses,this),this._style=R(this._style,this),this._color=R(this._color,this),this._remove=R(this._remove,this),this._append=R(this._append,this),this.klasses=[]}return e.prototype.COLORS=["black","red","green","yellow","blue","magenta","cyan","white"],e.prototype._append=function(e){return e=""+t+e,-1===this.klasses.indexOf(e)?this.klasses.push(e):void 0},e.prototype._remove=function(){var e,s,r,i,n,o;for(r=1<=arguments.length?D.call(arguments,0):[],o=[],i=0,n=r.length;n>i;i++)s=r[i],"fonts"===s||"color"===s||"background-color"===s?o.push(this.klasses=function(){var r,i,n,o;for(n=this.klasses,o=[],r=0,i=n.length;i>r;r++)e=n[r],e.indexOf(s)!==t.length&&o.push(e);return o}.call(this)):(s=""+t+s,o.push(this.klasses=function(){var t,r,i,n;for(i=this.klasses,n=[],t=0,r=i.length;r>t;t++)e=i[t],e!==s&&n.push(e);return n}.call(this)));return o},e.prototype._color=function(e){return this.COLORS[e]},e.prototype._style=function(e){if(""===e&&(e=0),e=parseInt(e),!isNaN(e))switch(e){case 0:return this.klasses=[];case 1:return this._append("bold");case 2:return this._append("lighter");case 3:return this._append("italic");case 4:return this._append("underline");case 5:return this._append("blink");case 6:return this._append("blink-rapid");case 8:return this._append("hidden");case 9:return this._append("line-through");case 10:return this._remove("fonts");case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:return this._remove("fonts"),this._append("fonts-"+(e-10));case 20:return this._append("fraktur");case 21:return this._remove("bold","lighter");case 22:return this._remove("bold","lighter");case 23:return this._remove("italic","fraktur");case 24:return this._remove("underline");case 25:return this._remove("blink","blink-rapid");case 28:return this._remove("hidden");case 29:return this._remove("line-through");case 30:case 31:case 32:case 33:case 34:case 35:case 36:case 37:return this._remove("color"),this._append("color-"+this._color(e-30));case 39:return this._remove("color");case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:return this._remove("background-color"),this._append("background-color-"+this._color(e-40));case 49:return this._remove("background-color");case 51:return this._append("framed");case 53:return this._append("overline");case 54:return this._remove("framed");case 55:return this._remove("overline")}},e.prototype.getClasses=function(){return this.klasses.join(" ")},e.prototype._openSpan=function(e){return'<span class="'+this.getClasses()+'">'+e},e.prototype._closeSpan=function(e){return""+e+"</span>"},e.prototype.stylize=function(e){var t,s,r,i,n,o;for(e=this._openSpan(e),r=0;(r=e.indexOf(g,r))&&-1!==r;)if(s=e.slice(r).match(v)){for(o=s.slice(1),i=0,n=o.length;n>i;i++)t=o[i],this._style(t);e=this._closeSpan(e.slice(0,r))+this._openSpan(e.slice(r+1+s[0].length))}else r++;return this._closeSpan(e)},e}(),j=function(e,t){return'<span class="'+e+'">'+(t||"")+"</span>"},_=function(){function t(t,s,r,o){this.container=t,this._HideComposition=R(this._HideComposition,this),this._ShowComposition=R(this._ShowComposition,this),this._UpdateComposition=R(this._UpdateComposition,this),this._EndComposition=R(this._EndComposition,this),this._StartComposition=R(this._StartComposition,this),this._CheckComposition=R(this._CheckComposition,this),this._ProcessMatch=R(this._ProcessMatch,this),this._HandleKey=R(this._HandleKey,this),this._HandleChar=R(this._HandleChar,this),this.isMobile=!!navigator.userAgent.match(/iPhone|iPad|iPod|Android/i),this.isIos=!!navigator.userAgent.match(/iPhone|iPad|iPod/i),this.isAndroid=!!navigator.userAgent.match(/Android/i),this.$window=(0,n["default"])(window),this.header=s||"",this.prompt_label_main="string"==typeof r?r:d,this.prompt_label_continue=o||h,this.indent_width=u,this.state=I,this.input_queue=[],this.input_callback=null,this.multiline_callback=null,this.history=[],this.history_index=0,this.history_new="",this.history_active=!1,this.shortcuts={},this.$console=(0,n["default"])('<pre class="jqconsole"/>').appendTo(this.container),this.$console.css({position:"absolute",top:0,bottom:0,right:0,left:0,margin:0,overflow:"auto"}),this.$console_focused=!0,this.$input_container=(0,n["default"])(f).appendTo(this.container),this.$input_container.css({position:"relative",width:1,height:0,top:-999999,overflow:"hidden"}),this.$input_source=(0,n["default"])("<textarea/>"),this.$input_source.attr({wrap:"off",autocapitalize:"off",autocorrect:"off",spellcheck:"false",autocomplete:"off"}),this.$input_source.css({position:"absolute",width:2}),this.$input_source.appendTo(this.$input_container),this.$composition=(0,n["default"])(f),this.$composition.addClass(""+l+"composition"),this.$composition.css({display:"inline",position:"relative"}),this.matchings={openings:{},closings:{},clss:[]},this.ansi=new e,this._InitPrompt(),this._SetupEvents(),this.Write(this.header,i),(0,n["default"])(this.container).data("jqconsole",this)}return t.prototype.ResetHistory=function(){return this.SetHistory([])},t.prototype.ResetShortcuts=function(){return this.shortcuts={}},t.prototype.ResetMatchings=function(){return this.matchings={openings:{},closings:{},clss:[]}},t.prototype.Reset=function(){this.state!==I&&this.ClearPromptText(!0),this.state=I,this.input_queue=[],this.input_callback=null,this.multiline_callback=null,this.ResetHistory(),this.ResetShortcuts(),this.ResetMatchings(),this.$prompt.detach(),this.$input_container.detach(),this.$console.html(""),this.$prompt.appendTo(this.$console),this.$input_container.appendTo(this.container),this.Write(this.header,i)},t.prototype.GetHistory=function(){
return this.history},t.prototype.SetHistory=function(e){return this.history=e.slice(),this.history_index=this.history.length},t.prototype._CheckKeyCode=function(e){if(e=isNaN(e)?e.charCodeAt(0):parseInt(e,10),!(e>0&&256>e)||isNaN(e))throw new Error("Key code must be a number between 0 and 256 exclusive.");return e},t.prototype._LetterCaseHelper=function(e,t){return t(e),e>=65&&90>=e&&t(e+32),e>=97&&122>=e?t(e-32):void 0},t.prototype.RegisterShortcut=function(e,t){var s,r=this;if(e=this._CheckKeyCode(e),"function"!=typeof t)throw new Error("Callback must be a function, not "+t+".");s=function(e){return e in r.shortcuts||(r.shortcuts[e]=[]),r.shortcuts[e].push(t)},this._LetterCaseHelper(e,s)},t.prototype.UnRegisterShortcut=function(e,t){var s,r=this;e=this._CheckKeyCode(e),s=function(e){return e in r.shortcuts?t?r.shortcuts[e].splice(r.shortcuts[e].indexOf(t),1):delete r.shortcuts[e]:void 0},this._LetterCaseHelper(e,s)},t.prototype.GetColumn=function(){var e;return this.$prompt_cursor.text(""),e=this.$console.text().split(O),this.$prompt_cursor.html("&nbsp;"),e[e.length-1].length},t.prototype.GetLine=function(){return this.$console.text().split(O).length-1},t.prototype.ClearPromptText=function(e){if(this.state===I)throw new Error("ClearPromptText() is not allowed in output state.");this.$prompt_before.html(""),this.$prompt_after.html(""),this.$prompt_label.text(e?"":this._SelectPromptLabel(!1)),this.$prompt_left.text(""),this.$prompt_right.text("")},t.prototype.GetPromptText=function(e){var t,s,r,i,o;if(this.state===I)throw new Error("GetPromptText() is not allowed in output state.");return e?(this.$prompt_cursor.text(""),o=this.$prompt.text(),this.$prompt_cursor.html("&nbsp;"),o):(i=function(e){var t;return t=[],e.children().each(function(){return t.push((0,n["default"])(this).children().last().text())}),t.join(O)},s=i(this.$prompt_before),s&&(s+=O),r=this.$prompt_left.text()+this.$prompt_right.text(),t=i(this.$prompt_after),t&&(t=O+t),s+r+t)},t.prototype.SetPromptText=function(e){if(this.state===I)throw new Error("SetPromptText() is not allowed in output state.");this.ClearPromptText(!1),this._AppendPromptText(e),this._ScrollToEnd()},t.prototype.SetPromptLabel=function(e,t){this.prompt_label_main=e,null!=t&&(this.prompt_label_continue=t)},t.prototype.Write=function(e,t,s){var r;return null==s&&(s=!0),s&&(e=this.ansi.stylize((0,n["default"])(m).text(e).html())),r=(0,n["default"])(m).html(e),null!=t&&r.addClass(t),this.Append(r)},t.prototype.Append=function(e){var t;return t=(0,n["default"])(e).insertBefore(this.$prompt),this._ScrollToEnd(),this.$prompt_cursor.detach().insertAfter(this.$prompt_left),t},t.prototype.Input=function(e){var t,s,r,i,n=this;if(this.state===L)r=this.input_callback,i=this.multiline_callback,s=this.history_active,t=this.async_multiline,this.AbortPrompt(),this.input_queue.unshift(function(){return n.Prompt(s,r,i,t)});else if(this.state!==I)return void this.input_queue.push(function(){return n.Input(e)});this.history_active=!1,this.input_callback=e,this.multiline_callback=null,this.state=A,this.$prompt.attr("class",o),this.$prompt_label.text(this._SelectPromptLabel(!1)),this.Focus(),this._ScrollToEnd()},t.prototype.Prompt=function(e,t,s,r){var i=this;return this.state!==I?void this.input_queue.push(function(){return i.Prompt(e,t,s,r)}):(this.history_active=e,this.input_callback=t,this.multiline_callback=s,this.async_multiline=r,this.state=L,this.$prompt.attr("class",c+" "+this.ansi.getClasses()),this.$prompt_label.text(this._SelectPromptLabel(!1)),this.Focus(),void this._ScrollToEnd())},t.prototype.AbortPrompt=function(){if(this.state!==L)throw new Error("Cannot abort prompt when not in prompt state.");this.Write(this.GetPromptText(!0)+O,a),this.ClearPromptText(!0),this.state=I,this.input_callback=this.multiline_callback=null,this._CheckInputQueue()},t.prototype.Focus=function(){this.IsDisabled()||this.$input_source.focus()},t.prototype.SetIndentWidth=function(e){return this.indent_width=e},t.prototype.GetIndentWidth=function(){return this.indent_width},t.prototype.RegisterMatching=function(e,t,s){var r;return r={opening_char:e,closing_char:t,cls:s},this.matchings.clss.push(s),this.matchings.openings[e]=r,this.matchings.closings[t]=r},t.prototype.UnRegisterMatching=function(e,t){var s;return s=this.matchings.openings[e].cls,delete this.matchings.openings[e],delete this.matchings.closings[t],this.matchings.clss.splice(this.matchings.clss.indexOf(s),1)},t.prototype.Dump=function(){var e,t;return e=this.$console.find("."+i).nextUntil("."+c),function(){var s,r,i;for(i=[],s=0,r=e.length;r>s;s++)t=e[s],(0,n["default"])(t).is("."+a)?i.push((0,n["default"])(t).text().replace(/^\s+/,">>> ")):i.push((0,n["default"])(t).text());return i}().join(" ")},t.prototype.GetState=function(){return this.state===A?"input":this.state===I?"output":"prompt"},t.prototype.Disable=function(){return this.$input_source.attr("disabled",!0),this.$input_source.blur()},t.prototype.Enable=function(){return this.$input_source.attr("disabled",!1)},t.prototype.IsDisabled=function(){return Boolean(this.$input_source.attr("disabled"))},t.prototype.MoveToStart=function(e){this._MoveTo(e,!0)},t.prototype.MoveToEnd=function(e){this._MoveTo(e,!1)},t.prototype._CheckInputQueue=function(){return this.input_queue.length?this.input_queue.shift()():void 0},t.prototype._InitPrompt=function(){return this.$prompt=(0,n["default"])(j(o)).appendTo(this.$console),this.$prompt_before=(0,n["default"])(m).appendTo(this.$prompt),this.$prompt_current=(0,n["default"])(m).appendTo(this.$prompt),this.$prompt_after=(0,n["default"])(m).appendTo(this.$prompt),this.$prompt_label=(0,n["default"])(m).appendTo(this.$prompt_current),this.$prompt_left=(0,n["default"])(m).appendTo(this.$prompt_current),this.$prompt_right=(0,n["default"])(m).appendTo(this.$prompt_current),this.$prompt_right.css({position:"relative"}),this.$prompt_cursor=(0,n["default"])(j(r,"&nbsp;")),this.$prompt_cursor.insertBefore(this.$prompt_right),this.$prompt_cursor.css({color:"transparent",display:"inline",zIndex:0}),this.isMobile?void 0:this.$prompt_cursor.css("position","absolute")},t.prototype._SetupEvents=function(){var e,t,r=this;return this.isMobile?this.$console.click(function(e){return e.preventDefault(),r.Focus()}):this.$console.mouseup(function(e){var t;return 2===e.which?r.Focus():(t=function(){return window.getSelection().toString()?void 0:(e.preventDefault(),r.Focus())},setTimeout(t,0))}),this.$input_source.focus(function(){var e,t;return r._ScrollToEnd(),r.$console_focused=!0,r.$console.removeClass(s),t=function(){return r.$console_focused?r.$console.removeClass(s):void 0},setTimeout(t,100),e=function(){return r.isIos&&r.$console_focused?r.$input_source.hide():void 0},setTimeout(e,500)}),this.$input_source.blur(function(){var e;return r.$console_focused=!1,r.isIos&&r.$input_source.show(),e=function(){return r.$console_focused?void 0:r.$console.addClass(s)},setTimeout(e,100)}),t=n["default"].browser.opera?"input":"paste",this.$input_source.bind(t,function(){var e;return e=function(){return r.in_composition?void 0:(r._AppendPromptText(r.$input_source.val()),r.$input_source.val(""),r.Focus())},setTimeout(e,0)}),this.$input_source.keypress(this._HandleChar),this.$input_source.keydown(this._HandleKey),this.$input_source.keydown(this._CheckComposition),null!=n["default"].browser.mozilla&&(this.$input_source.bind("compositionstart",this._StartComposition),this.$input_source.bind("compositionend",this._EndCommposition),this.$input_source.bind("text",this._UpdateComposition)),null!=n["default"].browser.opera?(e=function(){return r.in_composition?void 0:r.$input_source.val().length?r._StartComposition():void 0},setInterval(e,200)):void 0},t.prototype._HandleChar=function(e){var t,s;return this.state===I||e.metaKey||e.ctrlKey?!0:(t=e.which,8===t||9===t||13===t?!1:(s=String.fromCharCode(t),0===s.length?!0:(this.$prompt_left.text(this.$prompt_left.text()+s),this._ScrollToEnd(),!1)))},t.prototype._HandleKey=function(e){var t;if(this.state===I)return!0;if(t=e.keyCode||e.which,setTimeout(n["default"].proxy(this._CheckMatchings,this),0),e.altKey)return!0;if(e.ctrlKey||e.metaKey)return this._HandleCtrlShortcut(t);if(e.shiftKey){switch(t){case T:this._HandleEnter(!0);break;case N:this._Unindent();break;case F:this._MoveUp();break;case w:this._MoveDown();break;case P:this._ScrollUp();break;case E:this._ScrollDown();break;default:return!0}return!1}switch(t){case T:this._HandleEnter(!1);break;case N:this._Indent();break;case k:this._Delete(!1);break;case b:this._Backspace(!1);break;case C:this._MoveLeft(!1);break;case M:this._MoveRight(!1);break;case F:this._HistoryPrevious();break;case w:this._HistoryNext();break;case S:this.MoveToStart(!1);break;case x:this.MoveToEnd(!1);break;case P:this._ScrollUp();break;case E:this._ScrollDown();break;default:return!0}return!1},t.prototype._HandleCtrlShortcut=function(e){var t,s,r,i;switch(e){case k:this._Delete(!0);break;case b:this._Backspace(!0);break;case C:this._MoveLeft(!0);break;case M:this._MoveRight(!0);break;case F:this._MoveUp();break;case w:this._MoveDown();break;case x:this.MoveToEnd(!0);break;case S:this.MoveToStart(!0);break;default:if(e in this.shortcuts){for(i=this.shortcuts[e],s=0,r=i.length;r>s;s++)t=i[s],t.call(this);return!1}return!0}return!1},t.prototype._HandleEnter=function(e){var t,s,r=this;return e?this._InsertNewLine(!0):(s=this.GetPromptText(),t=function(e){var t,i,n,o,a,c;if(e!==!1){for(r.MoveToEnd(!0),r._InsertNewLine(!0),c=[],n=o=0,a=Math.abs(e);a>=0?a>o:o>a;n=a>=0?++o:--o)e>0?c.push(r._Indent()):c.push(r._Unindent());return c}return i=r.state===A?"input":"prompt",r.Write(r.GetPromptText(!0)+O,""+l+"old-"+i),r.ClearPromptText(!0),r.history_active&&(r.history.length&&r.history[r.history.length-1]===s||r.history.push(s),r.history_index=r.history.length),r.state=I,t=r.input_callback,r.input_callback=null,t&&t(s),r._CheckInputQueue()},this.multiline_callback?this.async_multiline?this.multiline_callback(s,t):t(this.multiline_callback(s)):t(!1))},t.prototype._GetDirectionals=function(e){var t,s,r,i,o,a,l,c;return i=e?this.$prompt_left:this.$prompt_right,t=e?this.$prompt_right:this.$prompt_left,r=e?this.$prompt_before:this.$prompt_after,s=e?this.$prompt_after:this.$prompt_before,a=e?n["default"].proxy(this.MoveToStart,this):n["default"].proxy(this.MoveToEnd,this),o=e?n["default"].proxy(this._MoveLeft,this):n["default"].proxy(this._MoveRight,this),c=e?"last":"first",l=e?"prependTo":"appendTo",{$prompt_which:i,$prompt_opposite:t,$prompt_relative:r,$prompt_rel_opposite:s,MoveToLimit:a,MoveDirection:o,which_end:c,where_append:l}},t.prototype._VerticalMove=function(e){var t,s,r,i,n,o,a,l;return l=this._GetDirectionals(e),r=l.$prompt_which,t=l.$prompt_opposite,s=l.$prompt_relative,n=l.MoveToLimit,i=l.MoveDirection,s.is(p)?void 0:(o=this.$prompt_left.text().length,n(),i(),a=r.text(),t.text(e?a.slice(o):a.slice(0,o)),r.text(e?a.slice(0,o):a.slice(o)))},t.prototype._MoveUp=function(){return this._VerticalMove(!0)},t.prototype._MoveDown=function(){return this._VerticalMove()},t.prototype._HorizontalMove=function(e,t){var s,r,i,o,a,l,c,u,h,d,f,g,v,y;if(y=this._GetDirectionals(t),a=y.$prompt_which,r=y.$prompt_opposite,o=y.$prompt_relative,i=y.$prompt_rel_opposite,g=y.which_end,f=y.where_append,u=t?/\w*\W*$/:/^\w*\W*/,h=a.text()){if(e){if(v=h.match(u),!v)return;return v=v[0],d=r.text(),r.text(t?v+d:d+v),c=v.length,a.text(t?h.slice(0,-c):h.slice(c))}return d=r.text(),r.text(t?h.slice(-1)+d:d+h[0]),a.text(t?h.slice(0,-1):h.slice(1))}return o.is(p)?void 0:(l=(0,n["default"])(m)[f](i),l.append((0,n["default"])(m).text(this.$prompt_label.text())),l.append((0,n["default"])(m).text(r.text())),s=o.children()[g]().detach(),this.$prompt_label.text(s.children().first().text()),a.text(s.children().last().text()),r.text(""))},t.prototype._MoveLeft=function(e){return this._HorizontalMove(e,!0)},t.prototype._MoveRight=function(e){return this._HorizontalMove(e)},t.prototype._MoveTo=function(e,t){var s,r,i,n,o,a,l;if(a=this._GetDirectionals(t),i=a.$prompt_which,s=a.$prompt_opposite,r=a.$prompt_relative,o=a.MoveToLimit,n=a.MoveDirection,e){for(l=[];!r.is(p)||""!==i.text();)o(!1),l.push(n(!1));return l}return s.text(this.$prompt_left.text()+this.$prompt_right.text()),i.text("")},t.prototype._Delete=function(e){var t,s,r;if(s=this.$prompt_right.text()){if(e){if(r=s.match(/^\w*\W*/),!r)return;return r=r[0],this.$prompt_right.text(s.slice(r.length))}return this.$prompt_right.text(s.slice(1))}return this.$prompt_after.is(p)?void 0:(t=this.$prompt_after.children().first().detach(),this.$prompt_right.text(t.children().last().text()))},t.prototype._Backspace=function(e){var t,s,r;if(setTimeout(n["default"].proxy(this._ScrollToEnd,this),0),s=this.$prompt_left.text()){if(e){if(r=s.match(/\w*\W*$/),!r)return;return r=r[0],this.$prompt_left.text(s.slice(0,-r.length))}return this.$prompt_left.text(s.slice(0,-1))}return this.$prompt_before.is(p)?void 0:(t=this.$prompt_before.children().last().detach(),this.$prompt_label.text(t.children().first().text()),this.$prompt_left.text(t.children().last().text()))},t.prototype._Indent=function(){var e;return this.$prompt_left.prepend(function(){var t,s,r;for(r=[],e=t=1,s=this.indent_width;s>=1?s>=t:t>=s;e=s>=1?++t:--t)r.push(" ");return r}.call(this).join(""))},t.prototype._Unindent=function(){var e,t,s,r,i;for(e=this.$prompt_left.text()+this.$prompt_right.text(),i=[],t=s=1,r=this.indent_width;(r>=1?r>=s:s>=r)&&/^ /.test(e);t=r>=1?++s:--s)this.$prompt_left.text()?this.$prompt_left.text(this.$prompt_left.text().slice(1)):this.$prompt_right.text(this.$prompt_right.text().slice(1)),i.push(e=e.slice(1));return i},t.prototype._InsertNewLine=function(e){var t,s,r;return null==e&&(e=!1),r=this._SelectPromptLabel(!this.$prompt_before.is(p)),t=(0,n["default"])(m).appendTo(this.$prompt_before),t.append((0,n["default"])(m).text(r)),t.append((0,n["default"])(m).text(this.$prompt_left.text())),this.$prompt_label.text(this._SelectPromptLabel(!0)),e&&(s=this.$prompt_left.text().match(/^\s+/))?this.$prompt_left.text(s[0]):this.$prompt_left.text(""),this._ScrollToEnd()},t.prototype._AppendPromptText=function(e){var t,s,r,i,n,o;for(s=e.split(O),this.$prompt_left.text(this.$prompt_left.text()+s[0]),n=s.slice(1),o=[],r=0,i=n.length;i>r;r++)t=n[r],this._InsertNewLine(),o.push(this.$prompt_left.text(t));return o},t.prototype._ScrollUp=function(){var e;return e=this.$console[0].scrollTop-this.$console.height(),this.$console.stop().animate({scrollTop:e},"fast")},t.prototype._ScrollDown=function(){var e;return e=this.$console[0].scrollTop+this.$console.height(),this.$console.stop().animate({scrollTop:e},"fast")},t.prototype._ScrollToEnd=function(){var e,t=this;return this.$console.scrollTop(this.$console[0].scrollHeight),e=function(){var e,s,r,i,n,o,a;if(s=t.$prompt_cursor.height(),a=t.$window.scrollTop(),o=t.$window.scrollLeft(),e=document.documentElement.clientHeight,i=t.$prompt_cursor.offset(),n=t.$prompt_cursor.position(),t.$input_container.css({left:n.left,top:n.top-999999}),r=i.top-2*s,t.isMobile&&"undefined"!=typeof orientation&&null!==orientation){if(a<i.top||a>i.top)return t.$window.scrollTop(r)}else{if(a+e<i.top)return t.$window.scrollTop(i.top-e+s);if(a>r)return t.$window.scrollTop(i.top)}},setTimeout(e,0)},t.prototype._SelectPromptLabel=function(e){return this.state===L?e?" \n"+this.prompt_label_continue:this.prompt_label_main:e?"\n ":" "},t.prototype._outerHTML=function(e){return document.body.outerHTML?e.get(0).outerHTML:(0,n["default"])(f).append(e.eq(0).clone()).html()},t.prototype._Wrap=function(e,t,s){var r,i;return i=e.html(),r=i.slice(0,t)+j(s,i[t])+i.slice(t+1),e.html(r)},t.prototype._WalkCharacters=function(e,t,s,r,i){var n,o,a;for(o=i?e.length:0,e=e.split(""),a=function(){var t,s,r,n;return i?(r=e,e=2<=r.length?D.call(r,0,s=r.length-1):(s=0,[]),t=r[s++]):(n=e,t=n[0],e=2<=n.length?D.call(n,1):[]),t&&(o+=i?-1:1),t};n=a();)if(n===t?r++:n===s&&r--,0===r)return{index:o,current_count:r};return{index:-1,current_count:r}},t.prototype._ProcessMatch=function(e,t,s){var r,i,o,a,l,c,u,h,d,f,p,m,g=this;return f=t?[e.closing_char,e.opening_char]:[e.opening_char,e.closing_char],a=f[0],h=f[1],p=this._GetDirectionals(t),o=p.$prompt_which,i=p.$prompt_relative,l=1,c=!1,d=o.html(),t||(d=d.slice(1)),s&&t&&(d=d.slice(0,-1)),m=this._WalkCharacters(d,a,h,l,t),u=m.index,l=m.current_count,u>-1?(this._Wrap(o,u,e.cls),c=!0):(r=i.children(),r=t?Array.prototype.reverse.call(r):r,r.each(function(s,r){var i,o;return i=(0,n["default"])(r).children().last(),d=i.html(),o=g._WalkCharacters(d,a,h,l,t),u=o.index,l=o.current_count,u>-1?(t||u--,g._Wrap(i,u,e.cls),c=!0,!1):void 0})),c},t.prototype._CheckMatchings=function(e){var t,s,r,i,o,a,l;for(r=e?this.$prompt_left.text().slice(this.$prompt_left.text().length-1):this.$prompt_right.text()[0],l=this.matchings.clss,o=0,a=l.length;a>o;o++)t=l[o],(0,n["default"])("."+t,this.$console).contents().unwrap();if((s=this.matchings.closings[r])?i=this._ProcessMatch(s,!0,e):(s=this.matchings.openings[r])?i=this._ProcessMatch(s,!1,e):e||this._CheckMatchings(!0),e){if(i)return this._Wrap(this.$prompt_left,this.$prompt_left.html().length-1,s.cls)}else if(i)return this._Wrap(this.$prompt_right,0,s.cls)},t.prototype._HistoryPrevious=function(){return!this.history_active||this.history_index<=0?void 0:(this.history_index===this.history.length&&(this.history_new=this.GetPromptText()),this.SetPromptText(this.history[--this.history_index]))},t.prototype._HistoryNext=function(){return!this.history_active||this.history_index>=this.history.length?void 0:this.history_index===this.history.length-1?(this.history_index++,this.SetPromptText(this.history_new)):this.SetPromptText(this.history[++this.history_index])},t.prototype._CheckComposition=function(e){var t;return t=e.keyCode||e.which,null!=n["default"].browser.opera&&this.in_composition&&this._UpdateComposition(),229===t?this.in_composition?this._UpdateComposition():this._StartComposition():void 0},t.prototype._StartComposition=function(){return this.$input_source.bind(y,this._EndComposition),this.in_composition=!0,this._ShowComposition(),setTimeout(this._UpdateComposition,0)},t.prototype._EndComposition=function(){return this.$input_source.unbind(y,this._EndComposition),this.in_composition=!1,this._HideComposition(),this.$input_source.val("")},t.prototype._UpdateComposition=function(e){var t,s=this;return t=function(){return s.in_composition?s.$composition.text(s.$input_source.val()):void 0},setTimeout(t,0)},t.prototype._ShowComposition=function(){return this.$composition.css("height",this.$prompt_cursor.height()),this.$composition.empty(),this.$composition.appendTo(this.$prompt_left)},t.prototype._HideComposition=function(){return this.$composition.detach()},t}(),n["default"].fn.jqconsole=function(e,t,s){return new _(this,e,t,s)},n["default"].fn.jqconsole.JQConsole=_,n["default"].fn.jqconsole.Ansi=e}.call(void 0)},788:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i=s(7),n=r(i);!function(e,t,s){function r(s){n[s]||(n[s]=!0,e.migrateWarnings.push(s),t.console&&console.warn&&!e.migrateMute&&console.warn("JQMIGRATE: "+s))}function i(t,s,i,n){if(Object.defineProperty)try{return void Object.defineProperty(t,s,{configurable:!0,enumerable:!0,get:function(){return r(n),i},set:function(e){r(n),i=e}})}catch(o){}e._definePropertyBroken=!0,t[s]=i}var n={};e.migrateWarnings=[],e.migrateReset=function(){n={},e.migrateWarnings.length=0},"BackCompat"===document.compatMode&&r("jQuery is not compatible with Quirks Mode");var o={},a=e.attr,l=e.attrHooks.value&&e.attrHooks.value.get||function(){return null},c=e.attrHooks.value&&e.attrHooks.value.set||function(){return s},u=/^(?:input|button)$/i,h=/^[238]$/,d=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,f=/^(?:checked|selected)$/i;i(e,"attrFn",o,"jQuery.attrFn is deprecated"),e.attr=function(t,i,n,o){var l=i.toLowerCase(),c=t&&t.nodeType;return o&&(r("jQuery.fn.attr( props, pass ) is deprecated"),t&&!h.test(c)&&e.isFunction(e.fn[i]))?e(t)[i](n):("type"===i&&n!==s&&u.test(t.nodeName)&&r("Can't change the 'type' of an input or button in IE 6/7/8"),!e.attrHooks[l]&&d.test(l)&&(e.attrHooks[l]={get:function(t,r){var i,n=e.prop(t,r);return n===!0||"boolean"!=typeof n&&(i=t.getAttributeNode(r))&&i.nodeValue!==!1?r.toLowerCase():s},set:function(t,s,r){var i;return s===!1?e.removeAttr(t,r):(i=e.propFix[r]||r,i in t&&(t[i]=!0),t.setAttribute(r,r.toLowerCase())),r}},f.test(l)&&r("jQuery.fn.attr("+l+") may use property instead of attribute")),a.call(e,t,i,n))},e.attrHooks.value={get:function(e,t){var s=(e.nodeName||"").toLowerCase();return"button"===s?l.apply(this,arguments):("input"!==s&&"option"!==s&&r("property-based jQuery.fn.attr('value') is deprecated"),t in e?e.value:null)},set:function(e,t){var s=(e.nodeName||"").toLowerCase();return"button"===s?c.apply(this,arguments):("input"!==s&&"option"!==s&&r("property-based jQuery.fn.attr('value', val) is deprecated"),void(e.value=t))}};var p,m,g=e.fn.init,v=/^(?:[^<]*(<[\w\W]+>)[^>]*|#([\w\-]*))$/;e.fn.init=function(t,s,i){var n;return t&&"string"==typeof t&&!e.isPlainObject(s)&&(n=v.exec(t))&&n[1]&&("<"!==t.charAt(0)&&r("$(html) HTML strings must start with '<' character"),s&&s.context&&(s=s.context),e.parseHTML)?g.call(this,e.parseHTML(e.trim(t),s,!0),s,i):g.apply(this,arguments)},e.fn.init.prototype=e.fn,e.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},p=e.uaMatch(navigator.userAgent),m={},p.browser&&(m[p.browser]=!0,m.version=p.version),m.chrome?m.webkit=!0:m.webkit&&(m.safari=!0),e.browser=m,i(e,"browser",m,"jQuery.browser is deprecated"),e.sub=function(){function t(e,s){return new t.fn.init(e,s)}e.extend(!0,t,this),t.superclass=this,t.fn=t.prototype=this(),t.fn.constructor=t,t.sub=this.sub,t.fn.init=function(r,i){return i&&i instanceof e&&!(i instanceof t)&&(i=t(i)),e.fn.init.call(this,r,i,s)},t.fn.init.prototype=t.fn;var s=t(document);return r("jQuery.sub() is deprecated"),t};var y=e.fn.data;e.fn.data=function(t){var i,n,o=this[0];return!o||"events"!==t||1!==arguments.length||(i=e.data(o,t),n=e._data(o,t),i!==s&&i!==n||n===s)?y.apply(this,arguments):(r("Use of jQuery.fn.data('events') is deprecated"),n)};var _=/\/(java|ecma)script/i,b=e.fn.andSelf||e.fn.addBack,k=e.buildFragment;e.fn.andSelf=function(){return r("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()"),b.apply(this,arguments)},e.clean||(e.clean=function(t,s,i,n){s=s||document,s=!s.nodeType&&s[0]||s,s=s.ownerDocument||s,r("jQuery.clean() is deprecated");var o,a,l,c,u=[];if(e.merge(u,e.buildFragment(t,s).childNodes),i)for(l=function(e){return!e.type||_.test(e.type)?n?n.push(e.parentNode?e.parentNode.removeChild(e):e):i.appendChild(e):void 0},o=0;null!=(a=u[o]);o++)e.nodeName(a,"script")&&l(a)||(i.appendChild(a),"undefined"!=typeof a.getElementsByTagName&&(c=e.grep(e.merge([],a.getElementsByTagName("script")),l),u.splice.apply(u,[o+1,0].concat(c)),o+=c.length));return u}),e.buildFragment=function(t,s,n,o){var a,l="jQuery.buildFragment() is deprecated";s=s||document,s=!s.nodeType&&s[0]||s,s=s.ownerDocument||s;try{a=k.call(e,t,s,n,o)}catch(c){a=k.call(e,t,s.nodeType?[s]:s[0],n,o),r(l)}return a.fragment||(i(a,"fragment",a,l),i(a,"cacheable",!1,l)),a};var w=e.event.add,x=e.event.remove,T=e.event.trigger,S=e.fn.toggle,C=e.fn.live,E=e.fn.die,P="ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",M=new RegExp("\\b(?:"+P+")\\b"),N=/(?:^|\s)hover(\.\S+|)\b/,F=function(t){return"string"!=typeof t||e.event.special.hover?t:(N.test(t)&&r("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'"),t&&t.replace(N,"mouseenter$1 mouseleave$1"))};e.event.props&&"attrChange"!==e.event.props[0]&&e.event.props.unshift("attrChange","attrName","relatedNode","srcElement"),i(e.event,"handle",e.event.dispatch,"jQuery.event.handle is undocumented and deprecated"),e.event.add=function(e,t,s,i,n){e!==document&&M.test(t)&&r("AJAX events should be attached to document: "+t),w.call(this,e,F(t||""),s,i,n)},e.event.remove=function(e,t,s,r,i){x.call(this,e,F(t)||"",s,r,i)},e.fn.error=function(){var e=Array.prototype.slice.call(arguments,0);return r("jQuery.fn.error() is deprecated"),e.splice(0,0,"error"),arguments.length?this.bind.apply(this,e):(this.triggerHandler.apply(this,e),this)},e.fn.toggle=function(t,s){if(!e.isFunction(t)||!e.isFunction(s))return S.apply(this,arguments);r("jQuery.fn.toggle(handler, handler...) is deprecated");var i=arguments,n=t.guid||e.guid++,o=0,a=function(s){var r=(e._data(this,"lastToggle"+t.guid)||0)%o;return e._data(this,"lastToggle"+t.guid,r+1),s.preventDefault(),i[r].apply(this,arguments)||!1};for(a.guid=n;o<i.length;)i[o++].guid=n;return this.click(a)},e.fn.live=function(t,s,i){return r("jQuery.fn.live() is deprecated"),C?C.apply(this,arguments):(e(this.context).on(t,this.selector,s,i),this)},e.fn.die=function(t,s){return r("jQuery.fn.die() is deprecated"),E?E.apply(this,arguments):(e(this.context).off(t,this.selector||"**",s),this)},e.event.trigger=function(e,t,s,i){return!s&!M.test(e)&&r("Global events are undocumented and deprecated"),T.call(this,e,t,s||document,i)},e.each(P.split("|"),function(t,s){e.event.special[s]={setup:function(){var t=this;return t!==document&&(e.event.add(document,s+"."+e.guid,function(){e.event.trigger(s,null,t,!0)}),e._data(this,s,e.guid++)),!1},teardown:function(){return this!==document&&e.event.remove(document,s+"."+e._data(this,s)),!1}}})}(n["default"],window)},790:function(e,t){"use strict";function s(e,t,s,o){function a(){c.handshake(),h||(s(c),h=!0)}if(s=s||n,o=o||{},!t)throw new Error("Stuff: el not found.");var l=document.createElement("iframe"),c=new r(l,{el:t});c.config=o,window.addEventListener("message",c.messageHandler.bind(c),!1),i.push(l),l.setAttribute("scrolling","no"),l.setAttribute("src",e);for(var u in o.callbacks)o.callbacks.hasOwnProperty(u)&&c.on(u,o.callbacks[u].bind(c));var h=!1;l.addEventListener("load",a,!1),t.appendChild(l)}function r(e,t){if(this.iframe=e,this.callbacks={once:{},always:{}},t.sandbox===!0)this.sandbox="allow-scripts allow-same-origin";else if("string"==typeof t.sandbox){var s=t.sandbox;-1===s.indexOf("allow-scripts")&&(s+=" allow-scripts"),-1===s.indexOf("allow-same-origin")&&(s+=" allow-same-origin"),this.sandbox=s}else this.sandbox=null;this.secret=Math.ceil(999999999*Math.random())+1}Object.defineProperty(t,"__esModule",{value:!0});var i=[],n=function(){};s.clear=function(){i.forEach(function(e){var t=e.parentElement;t&&t.removeChild(e)}),i=[]},r.prototype={trigger:function(e,t){var s,r,i=this;if(s=this.callbacks.once[e],void 0!==s&&s.length>0){var n=s.shift();n.call(n.thisArg||this,t)}r=this.callbacks.always[e],r&&r.forEach(function(e){e.call(e.thisArg||i,t)})},messageHandler:function(e){var t;try{t=JSON.parse(e.data)}catch(s){return}if(t.secret===this.secret){var r=t.data,i=t.type;this.trigger(i,r)}},post:function(e,t){this.iframe.contentWindow.postMessage(JSON.stringify({type:e,data:t,secret:this.secret}),"*")},evaljs:function(e,t,s){var r=function(e){var s,r=e.error,i=r;r&&(s=window[r.__errorType__])&&(i=new s(r.message),i.stack=r.stack,i.type=r.type,i.arguments=r.arguments),(t||n).call(this,i,e.result)};r.thisArg=s,this.once("evaljs",r),this.post("evaljs",e)},transformHTTPToHTTPS:function(e){for(var t=["googleapis.com","herokuapp.com"],s=["s3.amazonaws.com","cdnjs.cloudflare.com","code.jquery.com","www.codecademy.com","www.google.com","bitly.com","bit.ly","js.live.net","firebase.github.io","www.parsecdn.com","connect.soundcloud.com","goog.gl","dl.dropboxusercontent.com","i.imgur.com","api.npr.org"],r=0;r<s.length;r++){var i=s[r];e=e.replace(new RegExp("http://"+i,"g"),"https://"+i)}for(var r=0;r<t.length;r++){var i=t[r],n=new RegExp("http://[^.]*."+i,"g");e=e.replace(n,function(e){return e.replace("http:","https:")}),e=e.replace(new RegExp("http://"+i,"g"),"https://"+i)}return e},load:function(e,t,s){t=t||n,t.thisArg=s,e=this.transformHTTPToHTTPS(e),this.once("load",t),this.post("disableFunctions",this.config.disabledFunctions||[]),this.post("load",e)},html:function(e,t){e=e||n,e.thisArg=t,this.once("html",e),this.post("html",null)},handshake:function(){this.post("handshake",this.sandbox)},once:function(e,t,s){t=t||n,t.thisArg=s,this.callbacks.once[e]=this._pushOrCreate(this.callbacks.once[e],t)},on:function(e,t,s){t=t||n,t.thisArg=s,this.callbacks.always[e]=this._pushOrCreate(this.callbacks.always[e],t)},_pushOrCreate:function(e,t){return e?e.push(t):e=[t],e},off:function(e,t){var s=this.callbacks[e];if(s){var r=s.indexOf(t);-1!==r&&s.splice(r,1)}else this.callbacks[e]=[]}},s.Context=r,t["default"]=s},797:function(e,t,s){var r,i;/*! Case - v1.3.2 - 2015-12-02
	* Copyright (c) 2015 Nathan Bubna; Licensed MIT, GPL */
(function(){"use strict";var n=function(e,t){return t=t||"",e.replace(/(^|-)/g,"$1\\u"+t).replace(/,/g,"\\u"+t)},o=n("20-2F,3A-40,5B-60,7B-7E,A0-BF,D7,F7","00"),a="a-z"+n("DF-F6,F8-FF","00"),l="A-Z"+n("C0-D6,D8-DE","00"),c="A|An|And|As|At|But|By|En|For|If|In|Of|On|Or|The|To|Vs?\\.?|Via",u=function(e,t,s,r){return e=e||o,t=t||a,s=s||l,r=r||c,{capitalize:new RegExp("(^|["+e+"])(["+t+"])","g"),pascal:new RegExp("(^|["+e+"])+(["+t+s+"])","g"),fill:new RegExp("["+e+"]+(.|$)","g"),sentence:new RegExp('(^\\s*|[\\?\\!\\.]+"?\\s+"?|,\\s+")(['+t+"])","g"),improper:new RegExp("\\b("+r+")\\b","g"),relax:new RegExp("([^"+s+"])(["+s+"]*)(["+s+"])(?=["+t+"]|$)","g"),upper:new RegExp("^[^"+t+"]+$"),hole:/\s/,room:new RegExp("["+e+"]")}},h=u(),d={re:h,unicodes:n,regexps:u,types:[],up:String.prototype.toUpperCase,low:String.prototype.toLowerCase,cap:function(e){return d.up.call(e.charAt(0))+e.slice(1)},decap:function(e){return d.low.call(e.charAt(0))+e.slice(1)},fill:function(e,t){return e&&null!=t?e.replace(h.fill,function(e,s){return s?t+s:""}):e},prep:function(e,t,s,r){if(!e)return e||"";if(!r&&h.upper.test(e)&&(e=d.low.call(e)),!t&&!h.hole.test(e)){var i=d.fill(e," ");h.hole.test(i)&&(e=i)}return s||h.room.test(e)||(e=e.replace(h.relax,d.relax)),e},relax:function(e,t,s,r){return t+" "+(s?s+" ":"")+r}},f={_:d,of:function(e){for(var t=0,s=d.types.length;s>t;t++)if(f[d.types[t]](e)===e)return d.types[t]},flip:function(e){return e.replace(/\w/g,function(e){return(e==d.up.call(e)?d.low:d.up).call(e)})},random:function(e){return e.replace(/\w/g,function(e){return(Math.round(Math.random())?d.up:d.low).call(e)})},type:function(e,t){f[e]=t,d.types.push(e)}},p={snake:function(e){return f.lower(e,"_")},constant:function(e){return f.upper(e,"_")},camel:function(e){return d.decap(f.pascal(e))},kebab:function(e){return f.lower(e,"-")},lower:function(e,t){return d.fill(d.low.call(d.prep(e,t)),t)},upper:function(e,t){return d.fill(d.up.call(d.prep(e,t,!1,!0)),t)},capital:function(e,t){return d.fill(d.prep(e).replace(h.capitalize,function(e,t,s){return t+d.up.call(s)}),t)},pascal:function(e){return d.fill(d.prep(e,!1,!0).replace(h.pascal,function(e,t,s){return d.up.call(s)}),"")},title:function(e){return f.capital(e).replace(h.improper,function(e,t,s,r){return s>0&&s<r.lastIndexOf(" ")?d.low.call(e):e})},sentence:function(e,t){return e=f.lower(e).replace(h.sentence,function(e,t,s){return t+d.up.call(s)}),t&&t.forEach(function(t){e=e.replace(new RegExp("\\b"+f.lower(t)+"\\b","g"),d.cap)}),e}};p.squish=p.pascal;for(var m in p)f.type(m,p[m]);s(1198);r="object"==typeof e&&e.exports?e.exports=f:this.Case=f,i="function"==typeof r?r.call(t,s,t,e):r,!(void 0!==i&&(e.exports=i))}).call(this)},799:function(e,t,s){var r,i;/*!
	  Copyright (c) 2016 Jed Watson.
	  Licensed under the MIT License (MIT), see
	  http://jedwatson.github.io/classnames
	*/
!function(){"use strict";function s(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var i=typeof r;if("string"===i||"number"===i)e.push(this&&this[r]||r);else if(Array.isArray(r))e.push(s.apply(this,r));else if("object"===i)for(var o in r)n.call(r,o)&&r[o]&&e.push(this&&this[o]||o)}}return e.join(" ")}var n={}.hasOwnProperty;"undefined"!=typeof e&&e.exports?e.exports=s:(r=[],i=function(){return s}.apply(t,r),!(void 0!==i&&(e.exports=i)))}()},961:function(e,t){!function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&s.rotl(e,8)|4278255360&s.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=s.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],s=0,r=0;s<e.length;s++,r+=8)t[r>>>5]|=e[s]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],s=0;s<32*e.length;s+=8)t.push(e[s>>>5]>>>24-s%32&255);return t},bytesToHex:function(e){for(var t=[],s=0;s<e.length;s++)t.push((e[s]>>>4).toString(16)),t.push((15&e[s]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],s=0;s<e.length;s+=2)t.push(parseInt(e.substr(s,2),16));return t},bytesToBase64:function(e){for(var s=[],r=0;r<e.length;r+=3)for(var i=e[r]<<16|e[r+1]<<8|e[r+2],n=0;4>n;n++)8*r+6*n<=8*e.length?s.push(t.charAt(i>>>6*(3-n)&63)):s.push("=");return s.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var s=[],r=0,i=0;r<e.length;i=++r%4)0!=i&&s.push((t.indexOf(e.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<2*i|t.indexOf(e.charAt(r))>>>6-2*i);return s}};e.exports=s}()},993:function(e,t){},997:function(e,t){e.exports={disabled:"index__disabled___CT5P9"}},999:function(e,t){e.exports={hint:"index__hint___19uc6",hintHeader:"index__hintHeader___3jc7L",toggleArrow:"index__toggleArrow___a0-jG",hintHeaderText:"index__hintHeaderText___1gCLv",hintHeaderIcon:"index__hintHeaderIcon___IZjHz",hintBody:"index__hintBody___3kg2J",hintBodyShown:"index__hintBodyShown___1ms0a"}},1e3:function(e,t){e.exports={peer:"index__peer___14lMS",useForComponent:"index__useForComponent___29Fx9",userIcon:"index__userIcon___3gmIL",sleeve:"index__sleeve___3BE3l",useElipse:"index__useElipse___2BgeK",doneBtn:"index__doneBtn___1_TE1"}},1001:function(e,t){},1002:function(e,t){e.exports={peers:"index__peers___2wOMz"}},1003:function(e,t){e.exports={formInputs:"index__formInputs___2Befg",radioOption:"index__radioOption___Kxuxm",optionsTitle:"index__optionsTitle___3FStD",reportForm:"index__reportForm___36ZoF",reportFormText:"index__reportFormText___GmCJB",reportFormTextDisabled:"index__reportFormTextDisabled___aKQLs",reportFormIntroText:"index__reportFormIntroText___3H23t",reportFormIntroLink:"index__reportFormIntroLink___1GzhQ",reportFormButton:"index__reportFormButton___2Cps1",reportFormButtonDisabled:"index__reportFormButtonDisabled___1o9B1",formButtonWrapper:"index__formButtonWrapper___2Xaer",formButton:"index__formButton___1U4ic",errorMessage:"index__errorMessage___284tX",helpText:"index__helpText___3fP43"}},1004:function(e,t){e.exports={shareCodeControl:"index__shareCodeControl___EEmSE",cta:"index__cta___1Md8Y",ctaArrow:"index__ctaArrow___2_jSO"}},1017:function(e,t){e.exports={editor:"index__editor___OmgoU"}},1037:function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var s=function(){};s.prototype=t.prototype,e.prototype=new s,e.prototype.constructor=e}},1088:function(e,t,s){!function(){var t=s(961),r=s(318).utf8,i=s(1089),n=s(318).bin,o=function(e,s){e.constructor==String?e=s&&"binary"===s.encoding?n.stringToBytes(e):r.stringToBytes(e):i(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||(e=e.toString());for(var a=t.bytesToWords(e),l=8*e.length,c=1732584193,u=-271733879,h=-1732584194,d=271733878,f=0;f<a.length;f++)a[f]=16711935&(a[f]<<8|a[f]>>>24)|4278255360&(a[f]<<24|a[f]>>>8);a[l>>>5]|=128<<l%32,a[(l+64>>>9<<4)+14]=l;for(var p=o._ff,m=o._gg,g=o._hh,v=o._ii,f=0;f<a.length;f+=16){var y=c,_=u,b=h,k=d;c=p(c,u,h,d,a[f+0],7,-680876936),d=p(d,c,u,h,a[f+1],12,-389564586),h=p(h,d,c,u,a[f+2],17,606105819),u=p(u,h,d,c,a[f+3],22,-1044525330),c=p(c,u,h,d,a[f+4],7,-176418897),d=p(d,c,u,h,a[f+5],12,1200080426),h=p(h,d,c,u,a[f+6],17,-1473231341),u=p(u,h,d,c,a[f+7],22,-45705983),c=p(c,u,h,d,a[f+8],7,1770035416),d=p(d,c,u,h,a[f+9],12,-1958414417),h=p(h,d,c,u,a[f+10],17,-42063),u=p(u,h,d,c,a[f+11],22,-1990404162),c=p(c,u,h,d,a[f+12],7,1804603682),d=p(d,c,u,h,a[f+13],12,-40341101),h=p(h,d,c,u,a[f+14],17,-1502002290),u=p(u,h,d,c,a[f+15],22,1236535329),c=m(c,u,h,d,a[f+1],5,-165796510),d=m(d,c,u,h,a[f+6],9,-1069501632),h=m(h,d,c,u,a[f+11],14,643717713),u=m(u,h,d,c,a[f+0],20,-373897302),c=m(c,u,h,d,a[f+5],5,-701558691),d=m(d,c,u,h,a[f+10],9,38016083),h=m(h,d,c,u,a[f+15],14,-660478335),u=m(u,h,d,c,a[f+4],20,-405537848),c=m(c,u,h,d,a[f+9],5,568446438),d=m(d,c,u,h,a[f+14],9,-1019803690),h=m(h,d,c,u,a[f+3],14,-187363961),u=m(u,h,d,c,a[f+8],20,1163531501),c=m(c,u,h,d,a[f+13],5,-1444681467),d=m(d,c,u,h,a[f+2],9,-51403784),h=m(h,d,c,u,a[f+7],14,1735328473),u=m(u,h,d,c,a[f+12],20,-1926607734),c=g(c,u,h,d,a[f+5],4,-378558),d=g(d,c,u,h,a[f+8],11,-2022574463),h=g(h,d,c,u,a[f+11],16,1839030562),u=g(u,h,d,c,a[f+14],23,-35309556),c=g(c,u,h,d,a[f+1],4,-1530992060),d=g(d,c,u,h,a[f+4],11,1272893353),h=g(h,d,c,u,a[f+7],16,-155497632),u=g(u,h,d,c,a[f+10],23,-1094730640),c=g(c,u,h,d,a[f+13],4,681279174),d=g(d,c,u,h,a[f+0],11,-358537222),h=g(h,d,c,u,a[f+3],16,-722521979),u=g(u,h,d,c,a[f+6],23,76029189),c=g(c,u,h,d,a[f+9],4,-640364487),d=g(d,c,u,h,a[f+12],11,-421815835),h=g(h,d,c,u,a[f+15],16,530742520),u=g(u,h,d,c,a[f+2],23,-995338651),c=v(c,u,h,d,a[f+0],6,-198630844),d=v(d,c,u,h,a[f+7],10,1126891415),h=v(h,d,c,u,a[f+14],15,-1416354905),u=v(u,h,d,c,a[f+5],21,-57434055),c=v(c,u,h,d,a[f+12],6,1700485571),d=v(d,c,u,h,a[f+3],10,-1894986606),h=v(h,d,c,u,a[f+10],15,-1051523),u=v(u,h,d,c,a[f+1],21,-2054922799),c=v(c,u,h,d,a[f+8],6,1873313359),d=v(d,c,u,h,a[f+15],10,-30611744),h=v(h,d,c,u,a[f+6],15,-1560198380),u=v(u,h,d,c,a[f+13],21,1309151649),c=v(c,u,h,d,a[f+4],6,-145523070),d=v(d,c,u,h,a[f+11],10,-1120210379),h=v(h,d,c,u,a[f+2],15,718787259),u=v(u,h,d,c,a[f+9],21,-343485551),c=c+y>>>0,u=u+_>>>0,h=h+b>>>0,d=d+k>>>0}return t.endian([c,u,h,d])};o._ff=function(e,t,s,r,i,n,o){var a=e+(t&s|~t&r)+(i>>>0)+o;return(a<<n|a>>>32-n)+t},o._gg=function(e,t,s,r,i,n,o){var a=e+(t&r|s&~r)+(i>>>0)+o;return(a<<n|a>>>32-n)+t},o._hh=function(e,t,s,r,i,n,o){var a=e+(t^s^r)+(i>>>0)+o;return(a<<n|a>>>32-n)+t},o._ii=function(e,t,s,r,i,n,o){var a=e+(s^(t|~r))+(i>>>0)+o;return(a<<n|a>>>32-n)+t},o._blocksize=16,o._digestsize=16,e.exports=function(e,s){if("undefined"!=typeof e){var r=t.wordsToBytes(o(e,s));return s&&s.asBytes?r:s&&s.asString?n.bytesToString(r):t.bytesToHex(r)}}}()},1089:function(e,t){e.exports=function(e){return!(null==e||!e.constructor||"function"!=typeof e.constructor.isBuffer||!e.constructor.isBuffer(e))}},1091:function(e,t,s){var r,i,n;r=s(3),i=s(797),n=function(e,t){var s,o,a,l;if(null==t&&(t="camel"),l=e,a=i[t],r.isArray(e))for(l=[],s=0;s<e.length;)l.push(n(e[s],t)),++s;else if(r.isObject(e)){l={};for(o in e)l[a(o)]=n(e[o],t)}return l},e.exports=n},1096:function(e,t,s){"use strict";e.exports=s(493)},1178:function(e,t){e.exports=function(e,t,s){for(var r=0,i=e.length,n=3==arguments.length?s:e[r++];i>r;)n=t.call(null,n,e[r],++r,e);return n}},1192:function(e,t,s){function r(){}function i(e){var t={}.toString.call(e);switch(t){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function n(e){return e===Object(e)}function o(e){if(!n(e))return e;var t=[];for(var s in e)null!=e[s]&&a(t,s,e[s]);return t.join("&")}function a(e,t,s){return Array.isArray(s)?s.forEach(function(s){a(e,t,s)}):void e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}function l(e){for(var t,s,r={},i=e.split("&"),n=0,o=i.length;o>n;++n)s=i[n],t=s.split("="),r[decodeURIComponent(t[0])]=decodeURIComponent(t[1]);return r}function c(e){var t,s,r,i,n=e.split(/\r?\n/),o={};n.pop();for(var a=0,l=n.length;l>a;++a)s=n[a],t=s.indexOf(":"),r=s.slice(0,t).toLowerCase(),i=b(s.slice(t+1)),o[r]=i;return o}function u(e){return/[\/+]json\b/.test(e)}function h(e){return e.split(/ *; */).shift()}function d(e){return _(e.split(/ *; */),function(e,t){var s=t.split(/ *= */),r=s.shift(),i=s.shift();return r&&i&&(e[r]=i),e},{})}function f(e,t){t=t||{},this.req=e,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||"undefined"==typeof this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText,this.setStatusProperties(this.xhr.status),this.header=this.headers=c(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text?this.text:this.xhr.response):null}function p(e,t){var s=this;y.call(this),this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",function(){var e=null,t=null;try{t=new f(s)}catch(r){return e=new Error("Parser is unable to parse the response"),e.parse=!0,e.original=r,e.rawResponse=s.xhr&&s.xhr.responseText?s.xhr.responseText:null,s.callback(e)}if(s.emit("response",t),e)return s.callback(e,t);if(t.status>=200&&t.status<300)return s.callback(e,t);var i=new Error(t.statusText||"Unsuccessful HTTP response");i.original=e,i.response=t,i.status=t.status,s.callback(i,t)})}function m(e,t){return"function"==typeof t?new p("GET",e).end(t):1==arguments.length?new p("GET",e):new p(e,t)}function g(e,t){var s=m("DELETE",e);return t&&s.end(t),s}var v,y=s(1193),_=s(1178);v="undefined"!=typeof window?window:"undefined"!=typeof self?self:this,m.getXHR=function(){if(!(!v.XMLHttpRequest||v.location&&"file:"==v.location.protocol&&v.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}return!1};var b="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};m.serializeObject=o,m.parseString=l,m.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},m.serialize={"application/x-www-form-urlencoded":o,"application/json":JSON.stringify},m.parse={"application/x-www-form-urlencoded":l,"application/json":JSON.parse},f.prototype.get=function(e){return this.header[e.toLowerCase()]},f.prototype.setHeaderProperties=function(e){var t=this.header["content-type"]||"";this.type=h(t);var s=d(t);for(var r in s)this[r]=s[r]},f.prototype.parseBody=function(e){var t=m.parse[this.type];return t&&e&&(e.length||e instanceof Object)?t(e):null},f.prototype.setStatusProperties=function(e){1223===e&&(e=204);var t=e/100|0;this.status=this.statusCode=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.clientError=4==t,this.serverError=5==t,this.error=4==t||5==t?this.toError():!1,this.accepted=202==e,this.noContent=204==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.notFound=404==e,this.forbidden=403==e},f.prototype.toError=function(){var e=this.req,t=e.method,s=e.url,r="cannot "+t+" "+s+" ("+this.status+")",i=new Error(r);return i.status=this.status,i.method=t,i.url=s,i},m.Response=f,y(p.prototype),p.prototype.use=function(e){return e(this),this},p.prototype.timeout=function(e){return this._timeout=e,this},p.prototype.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},p.prototype.abort=function(){return this.aborted?void 0:(this.aborted=!0,this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this)},p.prototype.set=function(e,t){if(n(e)){for(var s in e)this.set(s,e[s]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},p.prototype.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},p.prototype.getHeader=function(e){return this._header[e.toLowerCase()]},p.prototype.type=function(e){return this.set("Content-Type",m.types[e]||e),this},p.prototype.parse=function(e){return this._parser=e,this},p.prototype.accept=function(e){return this.set("Accept",m.types[e]||e),this},p.prototype.auth=function(e,t){var s=btoa(e+":"+t);return this.set("Authorization","Basic "+s),this},p.prototype.query=function(e){return"string"!=typeof e&&(e=o(e)),e&&this._query.push(e),this},p.prototype.field=function(e,t){return this._formData||(this._formData=new v.FormData),this._formData.append(e,t),this},p.prototype.attach=function(e,t,s){return this._formData||(this._formData=new v.FormData),this._formData.append(e,t,s||t.name),this},p.prototype.send=function(e){var t=n(e),s=this.getHeader("Content-Type");if(t&&n(this._data))for(var r in e)this._data[r]=e[r];else"string"==typeof e?(s||this.type("form"),s=this.getHeader("Content-Type"),"application/x-www-form-urlencoded"==s?this._data=this._data?this._data+"&"+e:e:this._data=(this._data||"")+e):this._data=e;return!t||i(e)?this:(s||this.type("json"),this)},p.prototype.callback=function(e,t){var s=this._callback;this.clearTimeout(),s(e,t)},p.prototype.crossDomainError=function(){var e=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");e.crossDomain=!0,e.status=this.status,e.method=this.method,e.url=this.url,this.callback(e)},p.prototype.timeoutError=function(){var e=this._timeout,t=new Error("timeout of "+e+"ms exceeded");t.timeout=e,this.callback(t)},p.prototype.withCredentials=function(){return this._withCredentials=!0,this},p.prototype.end=function(e){var t=this,s=this.xhr=m.getXHR(),n=this._query.join("&"),o=this._timeout,a=this._formData||this._data;this._callback=e||r,s.onreadystatechange=function(){if(4==s.readyState){var e;try{e=s.status}catch(r){e=0}if(0==e){if(t.timedout)return t.timeoutError();if(t.aborted)return;return t.crossDomainError()}t.emit("end")}};var l=function(e){e.total>0&&(e.percent=e.loaded/e.total*100),e.direction="download",t.emit("progress",e)};this.hasListeners("progress")&&(s.onprogress=l);try{s.upload&&this.hasListeners("progress")&&(s.upload.onprogress=l)}catch(c){}if(o&&!this._timer&&(this._timer=setTimeout(function(){t.timedout=!0,t.abort()},o)),n&&(n=m.serializeObject(n),this.url+=~this.url.indexOf("?")?"&"+n:"?"+n),s.open(this.method,this.url,!0),this._withCredentials&&(s.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof a&&!i(a)){var h=this.getHeader("Content-Type"),d=this._parser||m.serialize[h?h.split(";")[0]:""];!d&&u(h)&&(d=m.serialize["application/json"]),d&&(a=d(a))}for(var f in this.header)null!=this.header[f]&&s.setRequestHeader(f,this.header[f]);return this.emit("request",this),s.send("undefined"!=typeof a?a:null),this},p.prototype.then=function(e,t){return this.end(function(s,r){s?t(s):e(r)})},m.Request=p,m.get=function(e,t,s){var r=m("GET",e);return"function"==typeof t&&(s=t,t=null),t&&r.query(t),s&&r.end(s),r},m.head=function(e,t,s){var r=m("HEAD",e);return"function"==typeof t&&(s=t,t=null),t&&r.send(t),s&&r.end(s),r},m.del=g,m["delete"]=g,m.patch=function(e,t,s){var r=m("PATCH",e);return"function"==typeof t&&(s=t,t=null),t&&r.send(t),s&&r.end(s),r},m.post=function(e,t,s){var r=m("POST",e);return"function"==typeof t&&(s=t,t=null),t&&r.send(t),s&&r.end(s),r},m.put=function(e,t,s){var r=m("PUT",e);return"function"==typeof t&&(s=t,t=null),t&&r.send(t),s&&r.end(s),r},e.exports=m},1193:function(e,t){function s(e){return e?r(e):void 0}function r(e){for(var t in s.prototype)e[t]=s.prototype[t];return e}e.exports=s,s.prototype.on=s.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},s.prototype.once=function(e,t){function s(){this.off(e,s),t.apply(this,arguments)}return s.fn=t,this.on(e,s),this},s.prototype.off=s.prototype.removeListener=s.prototype.removeAllListeners=s.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var s=this._callbacks["$"+e];if(!s)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r,i=0;i<s.length;i++)if(r=s[i],r===t||r.fn===t){s.splice(i,1);break}return this},s.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),s=this._callbacks["$"+e];if(s){s=s.slice(0);for(var r=0,i=s.length;i>r;++r)s[r].apply(this,t)}return this},s.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},s.prototype.hasListeners=function(e){return!!this.listeners(e).length}},1194:function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},1198:function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},1200:function(e,t){function s(e,t,s){var r;return r=t?new i(e,t):new i(e)}var r=function(){return this}(),i=r.WebSocket||r.MozWebSocket;e.exports=i?s:null,i&&(s.prototype=i.prototype)}});
